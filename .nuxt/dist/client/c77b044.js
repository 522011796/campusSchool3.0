(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{1256:function(t,e,l){"use strict";l.r(e);l(179);var n=l(6),o={name:"mySelect",props:{placeholder:{default:"",type:String},selValue:{default:"",type:[String,Number,Boolean]},options:{default:function(){return[]},type:Array},size:{defalult:"medium",validate:function(t){return Object(n.D)(t,["large","medium","small","mini"])}},clearable:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean},filterable:{default:!1,type:Boolean},remote:{default:!1,type:Boolean},loading:{default:!1,type:Boolean},group:{default:!1,type:Boolean},remoteMethod:{default:function(data){return data},type:Function},widthStyle:{default:"",type:[String,Number]}},computed:{selectModel:function(){this.value=this.selValue},setPlaceholder:function(){this.selectPlaceholder=this.placeholder?this.placeholder:this.$t("请选择")},setWidth:function(){this.widthStyle&&(this.width={width:this.widthStyle+"px"})}},data:function(){return{selectPlaceholder:"",value:"",width:""}},methods:{handleChange:function(data){this.$emit("change",data)}}},r=l(10),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("el-select",t._b({style:t.width,attrs:{setPlaceholder:t.setPlaceholder,placeholder:t.selectPlaceholder,size:t.size,clearable:t.clearable,disabled:t.disabled,filterable:t.filterable,loading:t.loading,remote:t.remote,"remote-method":t.remoteMethod,setWidth:t.setWidth},on:{change:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},"el-select",t.selectModel,!1),[0==t.group?t._l(t.options,(function(t,e){return l("el-option",{key:e,attrs:{label:t.label,value:t.value,disabled:t.disabled}})})):t._e(),t._v(" "),1==t.group?t._l(t.options,(function(e){return l("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})):t._e()],2)],1)}),[],!1,null,null,null);e.default=component.exports},1257:function(t,e,l){"use strict";l.r(e);var n=l(6),o={name:"myInputButton",props:{placeholder:{default:"请输入内容",type:String},widthClass:{default:"width: 150px",type:String},selectWidthClass:{default:"width: 100px",type:String},size:{defalult:"medium",validate:function(t){return Object(n.D)(t,["large","medium","small","mini"])}},type:{defalult:"",validate:function(t){return Object(n.D)(t,["success","info","warning","danger","primary"])}},plain:{default:!1,type:Boolean},iconStyle:{default:"",type:String},showSelect:{default:!1,type:Boolean},clearable:{default:!1,type:Boolean},options:{default:function(){return[]},type:Array}},computed:{},mounted:function(){this.showIcon=""!==this.iconStyle},data:function(){return{inputValue:"",selectValue:"",showIcon:!1}},methods:{handleClick:function(data){var t={};this.selectValue?t={select:this.selectValue,input:this.inputValue}:this.selectValue||(t={input:this.inputValue}),this.$emit("click",t)},selectChange:function(data){this.selectValue=data}}},r=l(10),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("span",[l("el-input",{style:t.widthClass,attrs:{size:t.size,placeholder:t.placeholder,clearable:t.clearable},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}},[t.showSelect?l("el-select",{style:t.selectWidthClass,attrs:{slot:"prepend",clearable:t.clearable,placeholder:t.$t("请选择")},on:{change:t.selectChange},slot:"prepend",model:{value:t.selectValue,callback:function(e){t.selectValue=e},expression:"selectValue"}},t._l(t.options,(function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled}})})),1):t._e()],1),t._v(" "),l("el-button",{attrs:{size:t.size,type:t.type,plain:t.plain},on:{click:t.handleClick}},[t.showIcon?l("i",{class:t.iconStyle}):t._e(),t._v("\n    "+t._s(t.$t("搜索"))+"\n  ")])],1)}),[],!1,null,null,null);e.default=component.exports},1260:function(t,e,l){"use strict";l.r(e);l(6);var n={name:"myNormalDialog",props:{visible:{type:Boolean,default:!0},title:{type:String,default:""},content:{type:String,default:""},detail:{type:String,default:""},width:{type:String,default:"30%"},loading:{type:Boolean,default:!1}},computed:{openCardDialog:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}},setLoading:{get:function(){return this.loading},set:function(t){}}},data:function(){return{showLoading:!1}},methods:{handleOkChange:function(data){this.$emit("ok-click",data)},handleCancelChange:function(data){this.$emit("cancel-click",data)},closeDialog:function(data){this.$emit("close",data)}}},o=l(10),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("el-dialog",{staticClass:"custom-dialog",attrs:{visible:t.openCardDialog,"close-on-click-modal":!1,loading:t.loading},on:{"update:visible":function(e){t.openCardDialog=e},close:t.closeDialog}},[l("div",{attrs:{slot:"title"},slot:"title"},[l("div",{staticClass:"dialog-title"},[t._v("\n        "+t._s(t.title)+"\n      ")]),t._v(" "),l("div",{staticStyle:{height:"1px",background:"#EBEEF5",margin:"0px 0px"}})]),t._v(" "),l("div",{staticClass:"text-center"},[l("div",[l("i",{staticClass:"fa fa-info-circle",staticStyle:{"font-size":"18px"}}),t._v("\n        "+t._s(t.content)+"\n      ")]),t._v(" "),l("div",{staticClass:"color-muted font-size-12 margin-top-5"},[t._v("\n        "+t._s(t.detail)+"\n      ")])]),t._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("div",{staticStyle:{height:"1px",background:"#EBEEF5",margin:"0px 0px"}}),t._v(" "),l("el-row",[l("el-col",{staticClass:"text-center",attrs:{span:12}},[l("div",{staticStyle:{background:"#ffffff",width:"100%",height:"100%",cursor:"default"},on:{click:t.handleCancelChange}},[t._v(t._s(t.$t("取消")))])]),t._v(" "),l("el-col",{staticClass:"text-center",attrs:{span:12}},[l("div",{staticStyle:{background:"#f5f5f5",width:"100%",height:"100%",cursor:"default"},on:{click:function(e){0==t.loading&&t.handleOkChange()}}},[l("span",{class:{"color-muted":t.loading}},[t.loading?l("i",{staticClass:"el-icon-loading"}):t._e(),t._v("\n              "+t._s(t.$t("确定"))+"\n            ")])])])],1)],1)])],1)}),[],!1,null,null,null);e.default=component.exports},1261:function(t,e,l){"use strict";l.r(e);var n={name:"LayoutTb",data:function(){return{showTab:!0,showTag:!1}},mounted:function(){this.showTab=void 0!==this.$slots.tab},created:function(){},methods:{}},o=l(10),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("div",{staticClass:"color-muted font-size-12 padding-top-5 animated fadeInUp"},[t.showTag?l("span",{staticClass:"layout-menu-title"},[t._t("tag")],2):t._e()]),t._v(" "),t.showTab?l("div",{staticClass:"layout-top-tab margin-top-5"},[t._t("tab")],2):t._e(),t._v(" "),l("div",{staticClass:"layout-bottom-tab margin-top-10"},[t._t("content")],2)])}),[],!1,null,null,null);e.default=component.exports},1265:function(t,e,l){"use strict";l.r(e);l(179),l(53);var n=l(9),o=l(6),r={name:"myCascader",mixins:[l(76).a],props:{selValue:{default:function(){return[]},type:Array},props:{default:function(){return{}},type:Object},placeholder:{default:"请选择",type:String},label:{default:"",type:String},disabled:{default:!1,type:Boolean},clearable:{default:!1,type:Boolean},size:{defalult:"medium",validate:function(t){return Object(o.D)(t,["large","medium","small","mini"])}},type:{default:"",type:String},subType:{default:1,type:String},widthStyle:{default:"",type:[String,Number]},collapseTags:{default:!1,type:Boolean}},computed:{selectModel:function(){this.value=this.selValue},setWidth:function(){this.widthStyle&&(this.width={width:this.widthStyle+"px"})}},data:function(){return{value:"",options:[],width:"",data:[]}},created:function(){this.initInfo()},methods:{initInfo:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=t.type){e.next=6;break}return e.next=3,t.getCollegeInfo(t.subType);case 3:t.data=t.dataCollege,e.next=28;break;case 6:if(2!=t.type){e.next=12;break}return e.next=9,t.getDormBuildInfo(t.subType);case 9:t.data=t.dataDormBuild,e.next=28;break;case 12:if(3!=t.type){e.next=18;break}return e.next=15,t.getSchoolBuildInfo(t.subType);case 15:t.data=t.dataSchoolBuild,e.next=28;break;case 18:if(4!=t.type){e.next=24;break}return e.next=21,t.getDeptInfo(t.subType);case 21:t.data=t.dataDept,e.next=28;break;case 24:if(5!=t.type){e.next=28;break}return e.next=27,t.getRoleTreeInfo();case 27:t.data=t.dataRoleTreeList;case 28:case"end":return e.stop()}}),e)})))()},handleChange:function(data){this.$emit("change",data)}},watch:{type:function(t){this.initInfo()},subType:function(t){this.initInfo()}}},c=l(10),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("el-cascader",t._b({ref:"cascaderSelector",style:t.width,attrs:{options:t.data,setWidth:t.setWidth,disabled:t.disabled,clearable:t.clearable,size:t.size,props:t.props,placeholder:t.placeholder,"collapse-tags":t.collapseTags},on:{change:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},"el-cascader",t.selectModel,!1))],1)}),[],!1,null,null,null);e.default=component.exports},1269:function(t,e,l){"use strict";l.r(e);var n=l(6),o={name:"myRadio",props:{selValue:{default:"",type:[Boolean,String]},label:{default:"",type:[Boolean,String]},group:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean},border:{default:!1,type:Boolean},button:{default:!1,type:Boolean},textColor:{default:"",type:String},fill:{default:"",type:String},options:{default:function(){return[]},type:Array},size:{defalult:"medium",validate:function(t){return Object(n.D)(t,["large","medium","small","mini"])}}},computed:{selectModel:function(){this.value=this.selValue}},data:function(){return{value:""}},methods:{handleChange:function(data){this.$emit("change",data)}}},r=l(10),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("span",[t.group?t._e():l("el-radio",t._b({attrs:{label:t.label,disabled:t.disabled,border:t.border,size:t.size},on:{change:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},"el-radio",t.selectModel,!1),[t._t("default")],2),t._v(" "),t.group?l("el-radio-group",t._b({attrs:{disabled:t.disabled,size:t.size,"text-color":t.textColor,fill:t.fill},on:{change:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},"el-radio-group",t.selectModel,!1),[t._l(t.options,(function(e){return t.button?t._e():l("el-radio",{key:e.value,attrs:{label:e.value,disabled:e.disabled,border:t.border}},[t._v(t._s(e.label))])})),t._v(" "),t._l(t.options,(function(e){return t.button?l("el-radio-button",{key:e.value,attrs:{label:e.value,disabled:e.disabled,border:t.border}},[t._v(t._s(e.label))]):t._e()}))],2):t._e()],1)}),[],!1,null,null,null);e.default=component.exports},1270:function(t,e,l){"use strict";l.r(e);l(179);var n,o=l(104),r=l(6),c={name:"mySex",props:(n={sex:{default:0,type:[String,Number]},tag:{default:"tag",validate:function(t){return Object(r.D)(t,["tag","text"])}},size:{defalult:"medium",validate:function(t){return Object(r.D)(t,["large","medium","small","mini"])}}},Object(o.a)(n,"size",{defalult:"medium",validate:function(t){return Object(r.D)(t,["large","medium","small","mini"])}}),Object(o.a)(n,"type",{defalult:"",validate:function(t){return Object(r.D)(t,["success","info","warning","danger"])}}),Object(o.a)(n,"effect",{defalult:"light",validate:function(t){return Object(r.D)(t,["dark","light","plain"])}}),n),computed:{selectModel:function(){this.value=this.selValue}},data:function(){return{value:""}},methods:{}},d=l(10),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("span",t._b({},"span",t.selectModel,!1),["text"==t.tag?[1==t.sex?l("label",[t._v(t._s(t.$t("男")))]):t._e(),t._v(" "),2==t.sex?l("label",[t._v(t._s(t.$t("女")))]):t._e(),t._v(" "),3==t.sex?l("label",[t._v(t._s(t.$t("未知")))]):t._e()]:t._e(),t._v(" "),"tag"==t.tag?[1==t.sex?l("el-tag",{attrs:{size:t.size,type:t.type,effect:t.effect}},[t._v(t._s(t.$t("男")))]):t._e(),t._v(" "),2==t.sex?l("el-tag",{attrs:{size:t.size,type:t.type,effect:t.effect}},[t._v(t._s(t.$t("女")))]):t._e(),t._v(" "),3==t.sex?l("el-tag",{attrs:{size:t.size,type:t.type,effect:t.effect}},[t._v(t._s(t.$t("未知")))]):t._e()]:t._e()],2)}),[],!1,null,null,null);e.default=component.exports},1299:function(t,e,l){var content=l(1323);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(31).default)("6c30d5b0",content,!0,{sourceMap:!1})},1316:function(t,e,l){"use strict";l.r(e);l(179);var n={name:"myFormAuditType",props:{itemIndex:{type:[Number,String],default:0},customUserStatus:{type:Boolean,default:!1}},computed:{},data:function(){return{popVisible:!1,value:""}},methods:{addPop:function(){this.popVisible=!0},selAuditType:function(t,e,l){this.popVisible=!1,this.$emit("click",e,l,parseInt(this.itemIndex))},showPop:function(){this.$emit("showPop")}}},o=(l(1322),l(10)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("el-popover",{attrs:{placement:"right",width:"100",trigger:"hover"},on:{show:t.showPop},model:{value:t.popVisible,callback:function(e){t.popVisible=e},expression:"popVisible"}},[l("div",{staticClass:"font-size-12"},[l("div",{},[l("div",{staticClass:"color-muted"},[l("span",[t._v(t._s(t.$t("审批节点")))])]),t._v(" "),l("div",{staticClass:"margin-left-5"},[l("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,1,"audit")}}},[l("i",{staticClass:"fa fa-user"}),t._v(" "),l("span",[t._v(t._s(t.$t("固定人审批")))])]),t._v(" "),l("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,2,"audit")}}},[l("i",{staticClass:"fa fa-cog"}),t._v(" "),l("span",[t._v(t._s(t.$t("系统角色审批")))])]),t._v(" "),0==t.customUserStatus?l("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,3,"audit")}}},[l("i",{staticClass:"fa fa-flag"}),t._v(" "),l("span",[t._v(t._s(t.$t("发起人自选审批")))])]):t._e()])]),t._v(" "),l("div",{staticClass:"margin-top-5"},[l("div",{staticClass:"color-muted"},[l("span",[t._v(t._s(t.$t("抄送节点")))])]),t._v(" "),l("div",{staticClass:"margin-left-5"},[l("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,4,"send")}}},[l("i",{staticClass:"fa fa-user"}),t._v(" "),l("span",[t._v(t._s(t.$t("抄送给固定人")))])]),t._v(" "),l("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,5,"send")}}},[l("i",{staticClass:"fa fa-cog"}),t._v(" "),l("span",[t._v(t._s(t.$t("抄送给系统角色")))])])])])]),t._v(" "),l("span",{staticClass:"flow-item-line-block",attrs:{slot:"reference"},slot:"reference"},[l("i",{staticClass:"fa fa-plus-circle color-muted",staticStyle:{"font-size":"25px"},on:{click:t.addPop}})])])],1)}),[],!1,null,"129ebc32",null);e.default=component.exports},1322:function(t,e,l){"use strict";var n=l(1299);l.n(n).a},1323:function(t,e,l){(e=l(30)(!1)).push([t.i,'.flow-item-line-block[data-v-129ebc32]{position:relative}.flow-item-line-block[data-v-129ebc32]:after{top:-24px}.flow-item-line-block[data-v-129ebc32]:after,.flow-item-line-block[data-v-129ebc32]:before{content:"";width:1px;height:15px;position:absolute;left:10px;background:#dcdfe6}.flow-item-line-block[data-v-129ebc32]:before{top:19px}.flow-item-child-block[data-v-129ebc32]:hover{background:#eee}',""]),t.exports=e},1468:function(t,e,l){var content=l(1840);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(31).default)("3b4354ba",content,!0,{sourceMap:!1})},1469:function(t,e,l){var content=l(1842);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(31).default)("5287110e",content,!0,{sourceMap:!1})},1470:function(t,e,l){var content=l(1844);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(31).default)("3fd78e46",content,!0,{sourceMap:!1})},1555:function(t,e,l){"use strict";l.r(e);l(709),l(107);var n=l(76),o=(l(7),l(6)),r=l(1256),c=l(1316),d=l(1561),h={name:"MyNewStudentFlow",components:{TeacherTreeAndListRoleNoPage:l(1562).default,MyNewStudentFlowType:d.default,MyFormAuditType:c.default,MySelect:r.default},mixins:[n.a],props:{formId:Object,flowData:{default:function(){return[]},type:Array},form:{default:function(){return{auditType:"",name:"",allowRepeat:!1,allowBack:!1,reportSuccess:!1,face:!1,qrcode:!1,custom:!1,report:"",datetimerange:[],items:[],hType:"",hName:"",subType:"",enrollPayUrl:"",checkinSheetName:"",updateClass:!1,checkinSheetTips:""}},type:Object}},computed:{},data:function(){return{checkRight1All:!1,checkRight2All:!1,popVisible:!1,refreshTeacherStatus:!1,activeName:"only",flowCustonUserStatus:!1,flowDetailIndex:"",flowDetailData:"",approverUsers:[],formFieldList:[],auditFlowType:[{label:this.$t("固定人审批"),text:this.$t("固定人审批"),value:1},{label:this.$t("系统角色审批"),text:this.$t("系统角色审批"),value:2},{label:this.$t("发起人自选审批"),text:this.$t("发起人自选审批"),value:3},{label:this.$t("抄送给固定人"),text:this.$t("抄送给固定人"),value:4},{label:this.$t("抄送给系统角色"),text:this.$t("抄送给系统角色"),value:5},{label:this.$t("自选抄送人"),text:this.$t("自选抄送人"),value:6}]}},created:function(){},methods:{selType:function(data,t){for(var i=0;i<this.flowDetailData.users.length;i++)t==this.flowDetailData.users[i].user_id&&(this.flowDetailData.users[i].right_type=data)},selRange:function(data,t){for(var i=0;i<this.flowDetailData.users.length;i++)t==this.flowDetailData.users[i].user_id&&(this.flowDetailData.users[i].right_range=data)},selAuditType:function(t,e,l,n){var o={type:n,extra:e,name:this.auditFlowTypeItemInfo(t,"set"),users:[],allowRepeat:!1,allowBack:!1,reportSuccess:!1,face:!1,qrcode:!1,custom:!1,report:1==t,datetimerange:[],items:[],hType:"",hName:"",subType:t,enrollPayUrl:"",checkinSheetName:"",updateClass:!1,checkinSheetTips:""};this.flowData.splice(l,0,o),this.selFlowItemBlock(null,o,l)},delAuditType:function(t,data,e){this.flowData.splice(e,1)},handleClick:function(t){this.activeName=t},handleAuditTypeChange:function(data){this.form.auditType=data},handleUserType:function(data){this.flowDetailData.htype=data,this.flowDetailData.hType=data},auditFlowTypeItemInfo:function(t,e){return Object(o.C)(t,e)},selFlowItemBlock:function(t,data,e){this.flowDetailData=data,this.approverUsers=data.users,this.flowDetailIndex=e},loadingShow:function(t){var e=this,l=null;switch(clearTimeout(l),t){case 1:this.refreshTeacherStatus=!0,l=setTimeout((function(){e.refreshTeacherStatus=!1,clearTimeout(l)}),1500)}},handleShowTeacher:function(t){var e=this;setTimeout((function(){1==t&&e.$refs.popverTeacherRef._handleOpen()}),800)},handleSelUser:function(data,t){if(1==t){this.flowDetailData.users=data,this.flowDetailData.hName=[];for(var i=0;i<data.length;i++)this.flowDetailData.hName.push(data[i].real_name)}this.approverUsers=this.flowDetailData.users},handleFormChange:function(t,e){this.flowData[this.flowDetailIndex].datetimerange=[this.$moment(t[0]).format("YYYY-MM-DD HH:mm"),this.$moment(t[1]).format("YYYY-MM-DD HH:mm")]},versionList:function(){this.$emit("versionClick")},handleChangeBox:function(data){this.flowData[this.flowDetailIndex].items=data},changeUpdateClass:function(data){this.flowData[this.flowDetailIndex].updateClass=data},showPop:function(){this.flowCustonUserStatus=!1;for(var i=0;i<this.flowData.length;i++)if("CustomUser"==this.flowData[i].hType){this.flowCustonUserStatus=!0;break}}}},f=(l(1841),l(10)),component=Object(f.a)(h,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("div",{staticClass:"form-set-main",style:t.drawHeight3},[l("div",{staticClass:"pull-right form-set-right",staticStyle:{"overflow-y":"auto"}},[l("div",{staticClass:"header-block padding-lr-10 border-bottom-1"},[l("el-row",[l("el-col",{staticClass:"text-center",attrs:{span:24}},[l("span",{staticClass:"tab-class font-bold",class:"only"==t.activeName?"color-warning":"",on:{click:function(e){return t.handleClick("only")}}},[l("i",{staticClass:"fa fa-file"}),t._v("\n                "+t._s(t.$t("节点属性"))+"\n              ")])])],1)],1),t._v(" "),l("div",{staticClass:"margin-top-10 padding-lr-10 font-size-12"},[[l("div",[l("div",{staticClass:"font-bold"},[t._v(t._s(t.$t("节点类型")))]),t._v(" "),1===t.flowDetailData.type?l("div",{staticClass:"margin-top-10"},[t._v(t._s(t.$t("线上流程")))]):t._e(),t._v(" "),0===t.flowDetailData.type?l("div",{staticClass:"margin-top-10"},[t._v(t._s(t.$t("线下流程")))]):t._e()]),t._v(" "),l("div",{staticClass:"margin-top-10"},[l("div",{staticClass:"font-bold"},[t._v(t._s(t.$t("节点名称")))]),t._v(" "),l("div",{staticClass:"margin-top-5"},[l("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini"},model:{value:t.flowDetailData.name,callback:function(e){t.$set(t.flowDetailData,"name",e)},expression:"flowDetailData.name"}})],1)]),t._v(" "),5==t.flowDetailData.subType?[l("div",{staticClass:"margin-top-10"},[l("div",{staticClass:"font-bold"},[t._v(t._s(t.$t("学生端显示名称")))]),t._v(" "),l("div",{staticClass:"margin-top-5"},[l("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini",row:5},model:{value:t.flowDetailData.checkinSheetName,callback:function(e){t.$set(t.flowDetailData,"checkinSheetName",e)},expression:"flowDetailData.checkinSheetName"}})],1)]),t._v(" "),l("div",{staticClass:"margin-top-10"},[l("div",{staticClass:"font-bold"},[t._v(t._s(t.$t("报到须知")))]),t._v(" "),l("div",{staticClass:"margin-top-5 custom-textarea-inner"},[l("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",autosize:{minRows:10},row:10,maxlength:"500","show-word-limit":""},model:{value:t.flowDetailData.checkinSheetTips,callback:function(e){t.$set(t.flowDetailData,"checkinSheetTips",e)},expression:"flowDetailData.checkinSheetTips"}})],1)])]:t._e(),t._v(" "),5!=t.flowDetailData.subType?l("div",{staticClass:"margin-top-10"},[[l("div",{staticClass:"font-bold"},[t._v(t._s(t.$t("管理员")))]),t._v(" "),l("div",{staticClass:"margin-top-5"},[l("el-popover",{attrs:{"popper-class":"custom-popper-class-form",placement:"left",width:"700",trigger:"click"},on:{show:function(e){return t.handleShowTeacher(1)}}},[l("div",[l("teacher-tree-and-list-role-no-page",{ref:"popverTeacherRef",attrs:{"user-type":"user","sel-arr":t.flowDetailData.users,"set-type":"check"},on:{select:function(e){return t.handleSelUser(e,1)},selectType:t.selType,selectRange:t.selRange}})],1),t._v(" "),l("el-button",{attrs:{slot:"reference",type:"success",plain:"",size:"small"},on:{click:function(e){return t.loadingShow(1)}},slot:"reference"},[1==t.refreshTeacherStatus?l("i",{staticClass:"fa fa-refresh fa-spin"}):t._e(),t._v("\n                      "+t._s(t.$t("管理员"))+"("+t._s(t.$t("人数"))+":"+t._s(t.approverUsers.length)+")\n                    ")])],1)],1)]],2):t._e()],t._v(" "),5!=t.flowDetailData.subType?[l("div",{staticClass:"margin-top-10"},[l("div",[l("div",[l("span",{staticClass:"font-bold"},[t._v(t._s(t.$t("依赖环节")))])])]),t._v(" "),l("div",{staticClass:"margin-top-10"},[l("el-row",[l("el-col",{attrs:{span:20}},t._l(t.flowData,(function(e,n){return""!=t.flowDetailData?l("div",{key:n,staticStyle:{height:"19px","line-height":"19px"}},[l("span",[t._v(t._s(e.name))])]):t._e()})),0),t._v(" "),l("el-col",{staticClass:"text-center",attrs:{span:4}},[""!=t.flowDetailData?l("el-checkbox-group",{on:{change:t.handleChangeBox},model:{value:t.flowDetailData.items,callback:function(e){t.$set(t.flowDetailData,"items",e)},expression:"flowDetailData.items"}},t._l(t.flowData,(function(e,n){return l("div",{key:n,staticClass:"text-right"},[l("el-checkbox",{attrs:{label:n,disabled:n===t.flowDetailIndex}},[t._v(" ")])],1)})),0):t._e()],1)],1)],1)])]:t._e(),t._v(" "),1==t.flowDetailData.subType?[l("div",{staticClass:"margin-top-10"},[l("div",[l("div",[l("span",{staticClass:"font-bold"},[t._v(t._s(t.$t("分班权限")))])])]),t._v(" "),l("div",{staticClass:"margin-top-10"},[l("el-row",[l("el-col",{attrs:{span:20}},[l("div",{staticStyle:{height:"19px","line-height":"19px"}},[l("span",[t._v(t._s(t.$t("允许老师分班")))])])]),t._v(" "),l("el-col",{staticClass:"text-right",attrs:{span:4}},[l("el-checkbox",{on:{change:t.changeUpdateClass},model:{value:t.flowDetailData.updateClass,callback:function(e){t.$set(t.flowDetailData,"updateClass",e)},expression:"flowDetailData.updateClass"}},[t._v(" ")])],1)],1)],1)])]:t._e(),t._v(" "),5!=t.flowDetailData.subType?[l("div",{staticClass:"margin-top-10"},[l("div",[l("div",[l("span",{staticClass:"font-bold"},[t._v(t._s(t.$t("设置办理有效期")))])])]),t._v(" "),l("div",{staticClass:"margin-top-10"},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{"unlink-panels":!0,size:"mini",format:"yyyy-MM-dd HH:mm",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(e){return t.handleFormChange(e)}},model:{value:t.flowDetailData.datetimerange,callback:function(e){t.$set(t.flowDetailData,"datetimerange",e)},expression:"flowDetailData.datetimerange"}})],1)])]:t._e(),t._v(" "),3==t.flowDetailData.subType?[l("div",{staticClass:"margin-top-10"},[l("div",{staticClass:"font-bold"},[t._v(t._s(t.$t("缴费链接")))]),t._v(" "),l("div",{staticClass:"margin-top-5"},[l("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini"},model:{value:t.flowDetailData.enrollPayUrl,callback:function(e){t.$set(t.flowDetailData,"enrollPayUrl",e)},expression:"flowDetailData.enrollPayUrl"}})],1)])]:t._e(),t._v(" "),5!=t.flowDetailData.subType?[l("div",{staticClass:"margin-top-10"},[l("div",[l("div",[l("span",{staticClass:"font-bold"},[t._v(t._s(t.$t("办理权限")))])])]),t._v(" "),l("div",{staticClass:"margin-top-10"},[l("el-row",[l("el-col",{attrs:{span:20}},[l("span",[t._v("可重复提交")])]),t._v(" "),l("el-col",{staticClass:"text-center",attrs:{span:4}},[l("el-checkbox",{model:{value:t.flowDetailData.allowRepeat,callback:function(e){t.$set(t.flowDetailData,"allowRepeat",e)},expression:"flowDetailData.allowRepeat"}})],1)],1)],1),t._v(" "),l("div",{staticClass:"margin-top-10"},[l("el-row",[l("el-col",{attrs:{span:20}},[l("span",[t._v("允许撤销")])]),t._v(" "),l("el-col",{staticClass:"text-center",attrs:{span:4}},[l("el-checkbox",{model:{value:t.flowDetailData.allowBack,callback:function(e){t.$set(t.flowDetailData,"allowBack",e)},expression:"flowDetailData.allowBack"}})],1)],1)],1)])]:t._e(),t._v(" "),5!=t.flowDetailData.subType&&1==t.flowDetailData.report?[l("div",{staticClass:"margin-top-10"},[l("div",[l("div",[l("span",{staticClass:"font-bold"},[t._v(t._s(t.$t("报到核验方式")))])])]),t._v(" "),l("div",{staticClass:"margin-top-10"},[l("el-row",[l("el-col",{attrs:{span:20}},[l("span",[t._v("人工手动")])]),t._v(" "),l("el-col",{staticClass:"text-center",attrs:{span:4}},[l("el-checkbox",{model:{value:t.flowDetailData.custom,callback:function(e){t.$set(t.flowDetailData,"custom",e)},expression:"flowDetailData.custom"}})],1)],1)],1),t._v(" "),l("div",{staticClass:"margin-top-10"},[l("el-row",[l("el-col",{attrs:{span:20}},[l("span",[t._v("二维码(主扫)")])]),t._v(" "),l("el-col",{staticClass:"text-center",attrs:{span:4}},[l("el-checkbox",{model:{value:t.flowDetailData.qrcode,callback:function(e){t.$set(t.flowDetailData,"qrcode",e)},expression:"flowDetailData.qrcode"}})],1)],1)],1),t._v(" "),l("div",{staticClass:"margin-top-10"},[l("el-row",[l("el-col",{attrs:{span:20}},[l("span",[t._v("人脸识别")])]),t._v(" "),l("el-col",{staticClass:"text-center",attrs:{span:4}},[l("el-checkbox",{model:{value:t.flowDetailData.face,callback:function(e){t.$set(t.flowDetailData,"face",e)},expression:"flowDetailData.face"}})],1)],1)],1)])]:t._e(),t._v(" "),5!=t.flowDetailData.subType&&0==t.flowDetailData.report?[l("div",{staticClass:"margin-top-10"},[l("div",[l("div",[l("span",{staticClass:"font-bold"},[t._v(t._s(t.$t("成功报到设置")))])])]),t._v(" "),l("div",{staticClass:"margin-top-10"},[l("el-row",[l("el-col",{attrs:{span:20}},[l("span",[t._v("设为报到成功")])]),t._v(" "),l("el-col",{staticClass:"text-center",attrs:{span:4}},[l("el-checkbox",{model:{value:t.flowDetailData.reportSuccess,callback:function(e){t.$set(t.flowDetailData,"reportSuccess",e)},expression:"flowDetailData.reportSuccess"}})],1)],1)],1)])]:t._e()],2)]),t._v(" "),l("div",{staticClass:"form-set-left"},[l("div",{staticClass:"text-center flow-main-block",staticStyle:{"overflow-y":"auto",position:"relative"},style:t.drawHeight5},[l("div",{staticClass:"flow-fixed-block font-size-12 font-bold margin-bottom-20 bg-success"},[l("span",[t._v(t._s(t.$t("开始")))])]),t._v(" "),l("div",{staticClass:"margin-bottom-20 margin-top-20"},[l("my-new-student-flow-type",{attrs:{"item-index":0,"pop-visible":t.popVisible},on:{click:t.selAuditType}})],1),t._v(" "),t._l(t.flowData,(function(e,n){return t.flowData.length>0?l("div",{key:n},[l("div",{staticClass:"flow-item-block",on:{click:function(l){return t.selFlowItemBlock(l,e,n)}}},[l("div",{staticClass:"flow-item-title-block",class:"1"==e.subType?"bg-warning":"bg-success"},[l("i",{staticClass:"fa fa-times-circle flow-item-close-block color-danger",on:{click:function(l){return l.stopPropagation(),t.delAuditType(l,e,n)}}}),t._v(" "),l("span",{staticClass:"font-bold font-size-12"},[l("el-row",[l("el-col",{attrs:{span:20}},[l("i",{staticClass:"fa fa-tag"}),t._v(" "),l("label",[t._v(t._s(e.name))]),t._v(" "),1==e.type&&9==e.subType?l("label",[t._v("("+t._s(t.$t("线上"))+")")]):t._e(),t._v(" "),0==e.type&&9==e.subType?l("label",[t._v("("+t._s(t.$t("线下"))+")")]):t._e()]),t._v(" "),l("el-col",{staticClass:"text-right",attrs:{span:4}},[l("i",{staticClass:"fa fa-cog"})])],1)],1)]),t._v(" "),l("div",{staticClass:"padding-lr-10 padding-tb-10 text-left font-size-12"},[5!=e.subType?l("div",[l("div",[l("span",{staticStyle:{position:"relative",top:"-5px"}},[l("i",{staticClass:"fa fa-users"}),t._v(" "),l("label",[t._v(t._s(t.$t("人员"))+": ")])]),t._v(" "),l("span",[[t._l(e.hName,(function(e,n){return n<4?l("el-tag",{key:n,staticClass:"margin-left-5 moon-content-text-ellipsis-class",staticStyle:{width:"50px"},attrs:{size:"mini"}},[l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e,placement:"top-start"}},[l("span",[t._v(t._s(e))])])],1):t._e()})),t._v(" "),e.users.length>=4?l("label",{staticClass:"flow-user-count-tag margin-left-5"},[t._v("4+")]):t._e()]],2)]),t._v(" "),l("div",{staticClass:"margin-top-5"},[l("span",{staticStyle:{position:"relative",top:"-5px"}},[l("i",{staticClass:"fa fa-cog"}),t._v(" "),l("label",[t._v(t._s(t.$t("权限"))+": ")])]),t._v(" "),l("span",[e.allowBack?l("el-tag",{staticClass:"margin-left-5 moon-content-text-ellipsis-class",staticStyle:{width:"80px"},attrs:{size:"mini",type:"success"}},[t._v("\n                        "+t._s(t.$t("允许撤销"))+"\n                      ")]):t._e(),t._v(" "),e.allowRepeat?l("el-tag",{staticClass:"margin-left-5 moon-content-text-ellipsis-class",staticStyle:{width:"80px"},attrs:{size:"mini",type:"warning"}},[t._v("\n                        "+t._s(t.$t("可重复提交"))+"\n                      ")]):t._e()],1)]),t._v(" "),l("div",{staticClass:"margin-top-5"},[l("span",{staticStyle:{position:"relative",top:"-5px"}},[l("i",{staticClass:"fa fa-history"}),t._v(" "),l("label",[t._v(t._s(t.$t("时间"))+": ")])]),t._v(" "),l("span",[[l("el-tag",{staticClass:"margin-left-5 moon-content-text-ellipsis-class",staticStyle:{width:"240px"},attrs:{size:"mini",type:"success"}},[t._v("\n                          "+t._s(t.$moment(e.datetimerange[0]).format("YYYY-MM-DD HH:mm"))+"\n                          -\n                          "+t._s(t.$moment(e.datetimerange[1]).format("YYYY-MM-DD HH:mm"))+"\n                        ")])]],2)])]):t._e()])]),t._v(" "),l("div",{staticClass:"margin-bottom-20 margin-top-20"},[l("my-new-student-flow-type",{attrs:{"item-index":n+1,"pop-visible":t.popVisible},on:{click:t.selAuditType}})],1)]):t._e()})),t._v(" "),l("div",{staticClass:"flow-fixed-block font-size-12 font-bold bg-danger"},[l("span",[t._v(t._s(t.$t("结束")))])])],2)]),t._v(" "),l("div",{staticClass:"moon-clearfix"})])])}),[],!1,null,"b0a3553c",null);e.default=component.exports;installComponents(component,{TeacherTreeAndListRoleNoPage:l(1562).default,MyNewStudentFlowType:l(1561).default})},1561:function(t,e,l){"use strict";l.r(e);l(179);var n={name:"MyNewStudentFlowType",props:{itemIndex:{type:[Number,String],default:0},customUserStatus:{type:Boolean,default:!1}},computed:{},data:function(){return{popVisible:!1,value:""}},methods:{addPop:function(){this.popVisible=!0},selAuditType:function(t,e,l,n){this.popVisible=!1,this.$emit("click",e,l,parseInt(this.itemIndex),n)},showPop:function(){this.$emit("showPop")}}},o=(l(1839),l(10)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("el-popover",{attrs:{placement:"right",width:"100",trigger:"hover"},on:{show:t.showPop},model:{value:t.popVisible,callback:function(e){t.popVisible=e},expression:"popVisible"}},[l("div",{staticClass:"font-size-12"},[l("div",{},[l("div",{staticClass:"color-muted"},[l("span",[t._v(t._s(t.$t("线下流程")))])]),t._v(" "),l("div",{staticClass:"margin-left-5"},[l("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,1,"audit",0)}}},[l("i",{staticClass:"fa fa-user"}),t._v(" "),l("span",[t._v(t._s(t.$t("现场报到"))+" ("+t._s(t.$t("系统"))+")")])]),t._v(" "),l("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,3,"audit",0)}}},[l("i",{staticClass:"fa fa-cog"}),t._v(" "),l("span",[t._v(t._s(t.$t("现场缴费"))+" ("+t._s(t.$t("系统"))+")")])]),t._v(" "),l("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,5,"audit",0)}}},[l("i",{staticClass:"fa fa-cog"}),t._v(" "),l("span",[t._v(t._s(t.$t("打印报到单"))+" ("+t._s(t.$t("系统"))+")")])]),t._v(" "),l("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,9,"send",0)}}},[l("i",{staticClass:"fa fa-cog"}),t._v(" "),l("span",[t._v(t._s(t.$t("自定义环节")))])])])]),t._v(" "),l("div",{staticClass:"margin-top-5"},[l("div",{staticClass:"color-muted"},[l("span",[t._v(t._s(t.$t("线上流程")))])]),t._v(" "),l("div",{staticClass:"margin-left-5"},[l("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,4,"send",1)}}},[l("i",{staticClass:"fa fa-user"}),t._v(" "),l("span",[t._v(t._s(t.$t("信息采集"))+" ("+t._s(t.$t("系统"))+")")])]),t._v(" "),l("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,0,"send",1)}}},[l("i",{staticClass:"fa fa-cog"}),t._v(" "),l("span",[t._v(t._s(t.$t("接站登记"))+" ("+t._s(t.$t("系统"))+")")])]),t._v(" "),l("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,2,"send",1)}}},[l("i",{staticClass:"fa fa-cog"}),t._v(" "),l("span",[t._v(t._s(t.$t("线上选寝"))+" ("+t._s(t.$t("系统"))+")")])]),t._v(" "),l("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,9,"send",1)}}},[l("i",{staticClass:"fa fa-cog"}),t._v(" "),l("span",[t._v(t._s(t.$t("自定义环节")))])])])])]),t._v(" "),l("span",{staticClass:"flow-item-line-block",attrs:{slot:"reference"},slot:"reference"},[l("i",{staticClass:"fa fa-plus-circle color-muted",staticStyle:{"font-size":"25px"},on:{click:t.addPop}})])])],1)}),[],!1,null,"0626a07a",null);e.default=component.exports},1562:function(t,e,l){"use strict";l.r(e);l(237),l(709),l(65),l(179),l(107),l(53);var n=l(9),o=l(1265),r=l(7),c=l(1269),d=l(1257),h=l(6),f={name:"teacherTreeAndListRoleNoPage",components:{MyRadio:c.default,MyCascader:o.default,MyInputButton:d.default},props:{selValue:{default:"",type:[String,Array]},selArr:{default:function(){return[]},type:Array},setType:{default:"radio",type:[String,Number]},userType:{default:"",type:String},groupId:{default:"",type:[String,Number]},maxHeight:{default:"300",type:[String,Number]}},computed:{_selValue:function(){this.commSelUserVal=this.selValue},_selArr:function(){}},data:function(){return{commAllCheck:!1,commAllCheckCount:0,value:"",commPage:1,commNum:20,commTotalTotal:0,tableTeacherCommData:[],searchCommDeptData:[],commSearchKey:"",commSearchDept:"",commSelUserVal:"",commSelUserArr:[],commSelUserNameArr:[],commSelUserTempArr:[],commSelUserValObj:{},commSelUserValArr:[],filterRoleType:[{label:this.$t("查看"),value:0,text:this.$t("查看")},{label:this.$t("操作"),value:1,text:this.$t("操作")}],filterCollType:[],searchRoleType:"",searchCollType:"",commLoading:!1,commTalbeLoading:!1,commFlag:!1,commMultipleSelection:[],commRow:"",commGetRowKeys:function(t){return t.user_id}}},created:function(){this._initAsync()},methods:{_initAsync:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._getCollegeInfo(1);case 2:t.filterCollType=t._collegeData;case 3:case"end":return e.stop()}}),e)})))()},_getCollegeInfo:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=[],t.next=3,e.$axios.get(r.a.hierarchical_college).then((function(t){if(t.data.data){for(var i=0;i<t.data.data.tree.length;i++)l.push({value:t.data.data.tree[i].id,id:t.data.data.tree[i].id,label:t.data.data.tree[i].name,text:t.data.data.tree[i].name,unit:t.data.data.tree[i].unit});e._collegeData=l}}));case 3:case"end":return t.stop()}}),t)})))()},_initTeacher:function(){var t=this;this.checkboxCount=0;var e={page:this.commPage,num:this.commNum,departPath:this.commSearchDept,userType:"checkDepart",type:this.userType,groupId:this.groupId};this.commTalbeLoading=!0,e.realName=this.commSearchKey.input,this.commLoading=!0,this.$axios.get(r.a.dormaccess_teacher_select_status_page,{params:e}).then((function(e){if(e.data.data){for(var i=0;i<e.data.data.page.list.length;i++){if(e.data.data.page.list[i].right_range=[],e.data.data.page.list[i].right_type=0,Object(h.u)(e.data.data.page.list[i],t.commSelUserArr,"user_id")>-1){t.commFlag=!0,e.data.data.page.list[i]._checked=!0;for(var l=0;l<t.commSelUserArr.length;l++)if(t.commSelUserArr[l].user_id==e.data.data.page.list[i].user_id){var n=t.commSelUserArr[l].right_range;e.data.data.page.list[i].right_range=n,e.data.data.page.list[i].right_type=t.commSelUserArr[l].right_type}t.checkboxCount++}else e.data.data.page.list[i]._checked=!1}0!=t.checkboxCount&&t.checkboxCount==t.tableTeacherCommData.length?t.commAllCheck=!0:t.commAllCheck=!1,t.commFlag=!1,t.tableTeacherCommData=e.data.data.page.list,t.commTotalTotal=e.data.data.page.totalCount,t.commNum=e.data.data.page.num,t.commPage=e.data.data.page.currentPage}t.commTalbeLoading=!1,t.commLoading=!1}))},_handleOpen:function(){var t=this;this.commPage=1,this.commNum=20,this.commSelUserArr=this.selArr,setTimeout((function(){t._initTeacher()}),800)},_handleChange:function(data,t){this.commSelUserVal=data.user_id,this.commSelUserValObj=data,this.$emit("change",data)},_handleCascaderChange:function(data){this.commSearchDept=data[data.length-1],this.commPage=1,this._initTeacher()},_handleSelectionSelect:function(t,e){if(t)this.commSelUserArr.push(e),e._checked=!0,this.checkboxCount++;else{var l=Object(h.u)(e,this.commSelUserArr,"user_id");this.commSelUserArr.splice(l,1),e._checked=!1,this.checkboxCount--}0!=this.checkboxCount&&this.checkboxCount==this.tableTeacherCommData.length?this.commAllCheck=!0:this.commAllCheck=!1,this.$emit("select",this.commSelUserArr)},_handleSelectionAllSelect:function(t){this.commAllCheck=t;for(var i=0;i<this.tableTeacherCommData.length;i++)if(1==t){this.tableTeacherCommData[i]._checked=!0,-1==Object(h.u)(this.tableTeacherCommData[i],this.commSelUserArr,"user_id")&&this.commSelUserArr.push(this.tableTeacherCommData[i]),this.checkboxCount++}else{var e=Object(h.u)(this.tableTeacherCommData[i],this.commSelUserArr,"user_id");this.commSelUserArr.splice(e,1),this.tableTeacherCommData[i]._checked=!1,this.checkboxCount--}this.$emit("select",this.commSelUserArr)},_handleSelectionChange:function(data){},_handleSizeChange:function(data){this.commPage=1,this.commNum=data,this._initTeacher()},_handleCurrentChange:function(data){this.commPage=data,this._initTeacher()},_handleResetChange:function(){this.value="",this.commNum=20,this.commPage=1,this.searchCommDeptData=[],this.commSearchKey="",this.commSearchDept="",this.commSelUserVal="",this.commSelUserValObj={},this.commSelUserValArr=[],this.commSelUserArr=[],this.$refs.SelectorDept&&this.$refs.SelectorDept.$refs.cascaderSelector&&this.$refs.SelectorDept.$refs.cascaderSelector.$refs.panel.calculateCheckedNodePaths(),this.$refs.SelectorDept&&this.$refs.SelectorDept.$refs.cascaderSelector&&this.$refs.SelectorDept.$refs.cascaderSelector.$refs.panel.calculateCheckedNodePaths()},_handleSelect:function(){this.commFlag=!0;for(var t=[],e=[].concat(this.tableTeacherCommData),l=[].concat(this.selArr),i=0;i<e.length;i++){Object(h.u)(e[i],l,"user_id")>-1&&(t.push(e[i]),this.$refs.commTableRef.toggleRowSelection(e[i],!0))}this.commSelUserTempArr=t,this.commFlag=!1},_handleSearch:function(data){this.commSearchKey=data,this.commPage=1,this._initTeacher()},_getSelectData:function(){this.$emit("select",this.commSelUserArr)},_handleSearchChange:function(t,e,l,n){1==e?(this.tableTeacherCommData[l].right_type=t,this.$emit("selectType",t,n.user_id)):2==e&&(this.tableTeacherCommData[l].right_range=t,this.$emit("selectRange",t,n.user_id))}}},m=l(10),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{ref:"commTeacherList"},[l("div",{staticClass:"layout-inline"},[l("my-cascader",{ref:"SelectorDept",staticClass:"layout-item",attrs:{size:"small","width-style":"160","sel-value":t.searchCommDeptData,type:"4","sub-type":""},on:{change:function(e){return t._handleCascaderChange(e)}}}),t._v(" "),l("my-input-button",{staticClass:"layout-item",attrs:{size:"small",clearable:!0,type:"success",plain:""},on:{click:t._handleSearch}})],1),t._v(" "),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.commLoading,expression:"commLoading"}],ref:"commTableRef",attrs:{data:t.tableTeacherCommData,"max-height":t.maxHeight,size:"mini"}},["check"==t.setType?l("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:t.commTalbeLoading,expression:"commTalbeLoading"}],attrs:{align:"center",width:"55"},scopedSlots:t._u([{key:"header",fn:function(e){return[l("el-checkbox",{on:{change:t._handleSelectionAllSelect},model:{value:t.commAllCheck,callback:function(e){t.commAllCheck=e},expression:"commAllCheck"}})]}},{key:"default",fn:function(e){return[l("el-checkbox",{on:{change:function(l){return t._handleSelectionSelect(l,e.row)}},model:{value:e.row._checked,callback:function(l){t.$set(e.row,"_checked",l)},expression:"scope.row._checked"}})]}}],null,!1,1304403255)}):t._e(),t._v(" "),"radio"==t.setType?l("el-table-column",{attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("my-radio",t._b({attrs:{"sel-value":t.commSelUserVal,label:e.row.user_id},on:{change:function(l){return t._handleChange(e.row)}}},"my-radio",t._selValue,!1),[l("span")])]}}],null,!1,4043958644)}):t._e(),t._v(" "),l("el-table-column",{attrs:{property:"real_name",align:"center",label:"姓名"}}),t._v(" "),l("el-table-column",{attrs:{property:"job_num",align:"center",label:"工号"}}),t._v(" "),l("el-table-column",{attrs:{property:"",align:"center",label:"部门",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.department_name?e.row.department_name:"--"))]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n            "+t._s(e.row.department_name?e.row.department_name:"--")+"\n          ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:"权限类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("my-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:t.$t("请选择"),"sel-value":e.row.right_type,options:t.filterRoleType},on:{change:function(l){return t._handleSearchChange(l,1,e.$index,e.row)}}})]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center custom-select-tag",label:"院系范围",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:function(l){return t._handleSearchChange(l,2,e.$index,e.row)}},model:{value:e.row.right_range,callback:function(l){t.$set(e.row,"right_range",l)},expression:"scope.row.right_range"}},t._l(t.filterCollType,(function(t,e){return l("el-option",{key:e,attrs:{label:t.label,value:""+t.value}})})),1)]}}])})],1),t._v(" "),l("div",{staticClass:"text-right margin-top-10"},[l("el-pagination",{attrs:{"current-page":t.commPage,"page-sizes":[10,20,30,50,100],"page-size":t.commNum,layout:"total, sizes, prev, pager, next",total:t.commTotalTotal},on:{"size-change":t._handleSizeChange,"current-change":t._handleCurrentChange}})],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{MyCascader:l(1265).default,MyInputButton:l(1257).default,MyRadio:l(1269).default,MySelect:l(1256).default})},1839:function(t,e,l){"use strict";var n=l(1468);l.n(n).a},1840:function(t,e,l){(e=l(30)(!1)).push([t.i,'.flow-item-line-block[data-v-0626a07a]{position:relative}.flow-item-line-block[data-v-0626a07a]:after{top:-24px}.flow-item-line-block[data-v-0626a07a]:after,.flow-item-line-block[data-v-0626a07a]:before{content:"";width:1px;height:15px;position:absolute;left:10px;background:#dcdfe6}.flow-item-line-block[data-v-0626a07a]:before{top:19px}.flow-item-child-block[data-v-0626a07a]:hover{background:#eee}',""]),t.exports=e},1841:function(t,e,l){"use strict";var n=l(1469);l.n(n).a},1842:function(t,e,l){(e=l(30)(!1)).push([t.i,".form-set-main[data-v-b0a3553c]{box-shadow:0 0 4px #dcdfe6;border-right:1px solid #dcdfe6}.form-set-left[data-v-b0a3553c]{margin-right:310px}.form-set-left[data-v-b0a3553c],.form-set-right[data-v-b0a3553c]{background:#f8f8f8;height:100%;box-shadow:0 0 4px #dcdfe6}.form-set-right[data-v-b0a3553c]{width:300px}.form-set-menu-item[data-v-b0a3553c]{font-size:12px;text-align:center;height:40px;line-height:40px}.form-set-menu-item-active[data-v-b0a3553c]{background:#3e8db8;color:#fff}.title-block-tag[data-v-b0a3553c]{display:inline-block;height:20px;width:3px;background:#e6a23c;font-weight:700;border-radius:3px}.title-block-text[data-v-b0a3553c]{font-weight:700;position:relative;top:-5px}.item-tag-block[data-v-b0a3553c]{height:25px;line-height:25px;background:#8cc5ff;border-radius:5px;padding:0 10px;color:#909399}.flow-fixed-block[data-v-b0a3553c]{width:40px;height:40px;line-height:40px;border-radius:100%;margin:20px auto 0;color:#fff}.flow-item-block[data-v-b0a3553c]{border-radius:5px;background:#fff;min-height:50px;width:350px;margin:20px auto;box-shadow:0 0 4px #dcdfe6}.flow-item-title-block[data-v-b0a3553c]{position:relative;height:30px;line-height:30px;padding:0 10px;color:#fff;text-align:left;border-top-left-radius:5px;border-top-right-radius:5px}.flow-item-close-block[data-v-b0a3553c]{position:absolute;right:-10px;top:-10px}.flow-user-count-tag[data-v-b0a3553c]{position:relative;display:inline-block;width:20px;height:20px;line-height:20px;border-radius:100%;background:#f56c6c;text-align:center;font-size:12px;color:#fff;top:-5px}.header-block[data-v-b0a3553c]{height:40px;line-height:40px}.tab-class[data-v-b0a3553c]{cursor:default;padding:10px}",""]),t.exports=e},1843:function(t,e,l){"use strict";var n=l(1470);l.n(n).a},1844:function(t,e,l){(e=l(30)(!1)).push([t.i,".container[data-v-f8f4fe14]{padding:10px 15px}.header-block[data-v-f8f4fe14]{height:40px;line-height:40px}",""]),t.exports=e},1984:function(t,e,l){"use strict";l.r(e);l(237),l(109),l(360),l(709),l(65),l(106),l(710),l(110);var n=l(76),o=l(7),r=l(6),c=l(86),d=l.n(c),h={data:function(){return{rules:{name:[{required:!0,message:this.$t("请输入名称"),trigger:"blur"},{validator:d.a.FormValidate.Form().validatenall1_20Reg,trigger:"blur"}]}}}},f=l(1260),m=l(1256),v=l(1555),_=l(1270),w={components:{DrawerLayoutRight:l(236).default,MySex:_.default,MyNewStudentFlow:v.default,MySelect:m.default,MyNormalDialog:f.default},mixins:[n.a,h],data:function(){return{commAllCheck:!1,commAllCheckCount:0,checkboxCount:0,pageStudent:1,totalStudent:0,numStudent:20,subTitle:"",visibleConfim:!1,tableData:[],tableStudentData:[],dialogSetting:!1,drawerVisible:!1,dialogLoading:!1,drawerLoading:!1,dialogFlowSetting:!1,tableStudentLoading:!1,btnLoading:!1,btnFlowLoading:!1,updateClassBool:!1,listId:"",yearOptions:[],searchKey:"",searchEnable:"",searchStatus:"",statusOptions:[],typeOptions:[],studentSelArray:[],searchYear:"",searchSex:"",searchStudnetKey:"",searchStudentCollege:"",searchStudentMajor:"",searchStudentGrade:"",searchStudentClass:"",searchCommDeptData:[],versionStatus:"",serverDataItem:{},serverDataIndex:"",flowListData:[],formFieldList:[],flowFormData:{},fliterTimes:[],fliterPCs:[],searchStudnetCollege:"",searchStudnetMajor:"",searchStudnetGrade:"",searchStudnetClass:"",searchStudentKey:"",searchStudentTime:[],searchStudentPC:"",selData:[],selDataOk:[],selDataBakOk:[],form:{id:"",year:"",name:"",type:"",time:""}}},created:function(){this.init(),this.initBatchList(),this.getYearInfo()},methods:{getYearInfo:function(){var t=this;this.$axios.get(o.a.enroll_page,{params:{page:1,num:9999}}).then((function(e){if(e.data.data){for(var l=[],i=0;i<e.data.data.list.length;i++)l.push({label:e.data.data.list[i].enrollName,text:e.data.data.list[i].enrollName,value:e.data.data.list[i].id});t.yearOptions=l}}))},getRowKeys:function(t){return t.user_id},handleSelectionChange:function(data){this.selData=data},_handleSelectionStudentSelect:function(t,e){if(t)this.selData.push(e),e._checked=!0,this.checkboxCount++;else{var l=Object(r.u)(e,this.selData,"user_id");this.selData.splice(l,1),e._checked=!1,this.checkboxCount--}0!=this.checkboxCount&&this.checkboxCount==this.tableStudentData.length?this.commAllCheck=!0:this.commAllCheck=!1},_handleSelectionStudentAllSelect:function(t){this.commAllCheck=t;for(var i=0;i<this.tableStudentData.length;i++)if(1==t){this.tableStudentData[i]._checked=!0,-1==Object(r.u)(this.tableStudentData[i],this.selData,"user_id")&&this.selData.push(this.tableStudentData[i]),this.checkboxCount++}else{this.tableStudentData[i]._checked=!1;var e=Object(r.u)(this.tableStudentData[i],this.selData,"user_id");e>-1&&(this.selData.splice(e,1),i-=1),this.checkboxCount--}},init:function(){var t=this,e={page:this.page,num:this.num,enable:this.searchStatus,searchKey:this.searchKey};this.$axios.get(o.a.enroll_process_page,{params:e}).then((function(e){e.data.data&&(t.tableData=e.data.data.list,t.total=e.data.data.totalCount,t.num=e.data.data.num,t.page=e.data.data.currentPage)}))},initStudent:function(){var t=this,e={page:this.pageStudent,num:this.numStudent,sex:this.searchSex,collegeId:this.searchStudnetCollege,majorId:this.searchStudnetMajor,grade:this.searchStudnetGrade,classId:this.searchStudnetClass,searchKey:this.searchStudnetKey,enrollBatch:this.searchStudentPC};this.searchStudentTime&&this.searchStudentTime.length>0&&(e.beginTime=this.$moment(this.searchStudentTime[0]).format("YYYY-MM-DD"),e.beginTime=this.$moment(this.searchStudentTime[1]).format("YYYY-MM-DD")),this.tableStudentLoading=!0,this.$axios.get(o.a.enroll_student_page,{params:e}).then((function(e){if(e.data.data){var l=[];0==t.selData.length?(l=t.selDataOk,t.selData=t.selDataOk):t.selDataOk.forEach((function(e){t.selData.forEach((function(t){e.user_id==t.user_id&&l.push(e)}))}));for(var i=0;i<e.data.data.list.length;i++){Object(r.u)(e.data.data.list[i],l,"user_id")>-1?(e.data.data.list[i]._checked=!0,t.checkboxCount++):e.data.data.list[i]._checked=!1}0!=t.checkboxCount&&t.checkboxCount==t.tableStudentData.length?t.commAllCheck=!0:t.commAllCheck=!1,t.tableStudentData=e.data.data.list,t.totalStudent=e.data.data.totalCount,t.numStudent=e.data.data.num,t.pageStudent=e.data.data.currentPage,t.tableStudentLoading=!1}}))},initBatchList:function(){var t=this;this.tableStudentLoading=!0,this.$axios.get(o.a.enroll_batch_list,{params:{},loading:!1}).then((function(e){if(e.data.data){for(var l=[],i=0;i<e.data.data.length;i++)l.push({label:e.data.data[i].enroll_batch,value:e.data.data[i].enroll_batch,text:e.data.data[i].enroll_batch});t.fliterPCs=l}}))},sizeChange:function(t){this.page=1,this.num=t,this.init()},currentPage:function(t){this.page=t,this.init()},jumpPage:function(data){this.page=data,this.init()},sizeStudentChange:function(t){this.pageStudent=1,this.numStudent=t,this.initStudent()},currentStudentPage:function(t){this.pageStudent=t,this.initStudent()},closeDialog:function(t){this.form={id:"",name:"",enable:!0},this.subTitle="",this.studentSelArray=[],this.searchSex="",this.searchClass="",this.searchYear="",this.searchStudnetKey="",this.searchStudnetCollege="",this.searchStudnetMajor="",this.searchStudnetGrade="",this.searchStudnetClass="",this.searchStudentKey="",this.listId="",this.flowListData=[],this.serverDataIndex="",this.flowFormData={auditType:"",name:"",allowRepeat:!1,allowBack:!1,reportSuccess:!1,face:!1,qrcode:!1,custom:!1,report:"",datetimerange:[],items:[],hType:"",hName:"",subType:""},this.$refs.form&&this.$refs.form.resetFields(),this.$refs.tableStudentRef&&this.$refs.tableStudentRef.clearSelection(),this.$refs.flow&&(this.$refs.flow.flowDetailData="",this.$refs.flow.approverUsers=[]),this.selDataOk=[],this.selDataBakOk=[],this.selData=[],this.flowListData=[],this.drawerVisible=!1,this.dialogFlowSetting=!1,this.btnFlowLoading=!1,this.resetCasadeSelector("selectorDept")},closeDrawDialog:function(t){this.$refs.tableStudentRef&&this.$refs.tableStudentRef.clearSelection(),this.$refs.studentRef&&(this.$refs.studentRef.inputValue=""),this.selDataOk=this.selDataBakOk,this.selData=[],this.pageStudent=1,this.numStudent=20,this.drawerVisible=!1},handleCancelChange:function(data){this.visibleConfim=!1},handleOkChange:function(data){var t=this;this.dialogLoading=!0;var e,l={id:this.form.id};e=o.a.enroll_process_del,l=this.$qs.stringify(l),this.$axios.post(e,l).then((function(e){200==e.data.code?(t.init(),Object(r.b)(e.data.desc)):Object(r.a)(e.data.desc),t.visibleConfim=!1,t.dialogLoading=!1}))},studentManage:function(){this.$refs.tableStudentRef&&this.$refs.tableStudentRef.clearSelection(),this.initStudent(),this.drawerVisible=!0},addInfo:function(){this.dialogSetting=!0},editInfo:function(t){var e=this;this.form={id:t.id,name:t.processName,enable:t.enable};var l={id:t.id};this.$axios.get(o.a.enroll_process_user_ids,{params:l,loading:!1}).then((function(t){if(t.data.data){for(var l=[],i=0;i<t.data.data.length;i++)l.push({user_id:t.data.data[i]});e.selData=[].concat(l),e.selDataOk=[].concat(l),e.selDataBakOk=[].concat(l)}})),this.dialogSetting=!0},settingInfo:function(t){var e=this;this.listId=t.id;var l=[],n={processId:t.id};this.$axios.get(o.a.enroll_process_link_list,{params:n}).then((function(n){if(n.data.data){for(var i=0;i<n.data.data.length;i++){var o=[],r=[],c={id:n.data.data[i].id,auditType:"",name:n.data.data[i].linkName,allowRepeat:n.data.data[i].checkRepeat,allowBack:n.data.data[i].checkCancel,datetimerange:n.data.data[i].beginTime?[e.$moment(n.data.data[i].beginTime).format("YYYY-MM-DD HH:mm"),e.$moment(n.data.data[i].endTime).format("YYYY-MM-DD HH:mm")]:[],items:n.data.data[i].dependLinkId?JSON.parse(n.data.data[i].dependLinkId):[],hType:"",type:n.data.data[i].linkType,subType:n.data.data[i].linkSubType};if(1==n.data.data[i].linkSubType){var d=JSON.parse(n.data.data[i].otherSetting);c.face=d.face,c.qrcode=d.qrcode,c.custom=d.custom,c.updateClass=d.updateClass,c.report=!0}else if(3==n.data.data[i].linkSubType){var h=JSON.parse(n.data.data[i].otherSetting);c.face=h.face,c.qrcode=h.qrcode,c.custom=h.custom,c.enrollPayUrl=h.enrollPayUrl,c.report=!0}else if(5==n.data.data[i].linkSubType){if(n.data.data[i].otherSetting&&""!=n.data.data[i].otherSetting){var f=JSON.parse(n.data.data[i].otherSetting);c.checkinSheetName=f.checkinSheetName,c.checkinSheetTips=f.checkinSheetTips}}else{var m=JSON.parse(n.data.data[i].otherSetting);m&&(c.reportSuccess=m.linkReport),m&&(c.report=!1)}for(var v=0;v<n.data.data[i].adminList.length;v++){var _=n.data.data[i].adminList[v].right_range?n.data.data[i].adminList[v].right_range:"",w=""!=n.data.data[i].adminList[v].right_type?n.data.data[i].adminList[v].right_type:0;n.data.data[i].adminList[v].right_range=""!=_?_.split(","):[],n.data.data[i].adminList[v].right_type=w,o.push(n.data.data[i].adminList[v]),r.push(n.data.data[i].adminList[v].real_name)}c.users=o,c.hName=r,l.push(c)}e.flowListData=l,e.serverDataItem=t}})),this.dialogFlowSetting=!0},deleteInfo:function(t){this.form.id=t.id,this.visibleConfim=!0},statusInfo:function(t,e){var l=this,n={id:t.id,enable:e};n=this.$qs.stringify(n),this.$axios.post(o.a.enroll_process_publish,n).then((function(t){200==t.data.code?(l.init(),Object(r.b)(t.data.desc)):Object(r.a)(t.data.desc)}))},handleChangeTime:function(data){this.searchStudentTime=data},handleSearchChange:function(t,e){1==e?this.searchStatus=t:2==e?this.searchYear=t:3==e?this.searchSex=t:4==e?this.searchStudentTime=t:5==e&&(this.searchStudentPC=t)},handleCascaderChange:function(data){this.searchStudnetCollege="",this.searchStudnetMajor="",this.searchStudnetGrade="",this.searchStudnetClass="",1==data.length?this.searchStudnetCollege=data[0]:2==data.length?(this.searchStudnetCollege=data[0],this.searchStudnetMajor=data[1]):3==data.length?(this.searchStudnetCollege=data[0],this.searchStudnetMajor=data[1],this.searchStudnetGrade=data[2]):4==data.length&&(this.searchStudnetCollege=data[0],this.searchStudnetMajor=data[1],this.searchStudnetGrade=data[2],this.searchStudnetClass=data[3])},search:function(data){this.searchKey=data.input,this.page=1,this.init(data)},searchStudent:function(data){this.searchStudnetKey=data.input,this.pageStudent=1,this.initStudent()},cancelDrawDialog:function(){this.selData=[],this.selDataOk=[],this.drawerVisible=!1},okDrawDialog:function(t){this.selDataOk=JSON.parse(JSON.stringify(this.selData)),this.selDataBakOk=JSON.parse(JSON.stringify(this.selData)),this.drawerVisible=!1},cancelFlowDrawDialog:function(){this.dialogFlowSetting=!1},okFlowDrawDialog:function(t){var e=this,l=this.$refs.flow.flowData,n=this.$refs.flow.form,c=[],d=[],h=[],f=[],m={},v=0;if(0!=l.length){for(var i=0;i<l.length;i++){c=[],d=[],"",h=[];var _=l[i].users;5!=l[i].subType&&0==_.length&&v++;for(var w=0;w<_.length;w++){c.push(_[w].user_id),d.push(_[w].real_name);_[w].right_type;h.push({adminUserId:_[w].user_id,rightRange:_[w].right_range.length>0?_[w].right_range.join():"",rightType:_[w].right_type})}var y=l[i].datetimerange;if(5!=l[i].subType&&0==y.length&&v++,v>0)return void Object(r.c)(this.$t("请检查管理员或者时间是否设置！"));var C={adminUser:h,beginTime:l[i].datetimerange[0],endTime:l[i].datetimerange[1],checkCancel:l[i].allowBack,checkRepeat:l[i].allowRepeat,dependLinkId:l[i].items,linkName:l[i].name,linkType:l[i].type,linkSubType:l[i].subType};1==l[i].type?C.otherSetting={linkReport:l[i].reportSuccess}:(C.otherSetting={face:l[i].face,qrcode:l[i].qrcode,custom:l[i].custom},1==l[i].subType&&(C.otherSetting.updateClass=l[i].updateClass),3==l[i].subType&&(C.otherSetting.enrollPayUrl=l[i].enrollPayUrl),5==l[i].subType&&(C.otherSetting.checkinSheetName=l[i].checkinSheetName,C.otherSetting.checkinSheetTips=l[i].checkinSheetTips)),l[i].id&&(C.id=l[i].id),f.push(C)}m={list:f,processId:this.listId},""!=n.id&&(m.id=n.id),this.btnLoading=!0,this.$axios.post(o.a.enroll_process_link_save,JSON.stringify(m),{dataType:"stringfy",loading:!1}).then((function(t){200==t.data.code?(e.dialogFlowSetting=!1,Object(r.b)(t.data.desc)):Object(r.a)(t.data.desc),e.btnLoading=!1}))}else Object(r.c)(this.$t("请设置环节数据！"))},cancelDialog:function(){this.dialogSetting=!1},okDialog:function(){var t=this,e=o.a.enroll_process_add;this.$refs.form.validate((function(l){if(l){for(var n=[],i=0;i<t.selDataOk.length;i++)n.push(t.selDataOk[i].user_id);var c={processName:t.form.name,userIds:n.join()};""!=t.form.id&&(c.id=t.form.id,e=o.a.enroll_process_edit),t.btnFlowLoading=!0,c=t.$qs.stringify(c),t.$axios.post(e,c,{loading:!1}).then((function(e){200==e.data.code?(t.dialogSetting=!1,t.init(),Object(r.b)(e.data.desc)):Object(r.a)(e.data.desc),t.btnFlowLoading=!1}))}}))}}},y=(l(1843),l(10)),component=Object(y.a)(w,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"container"},[l("layout-tb",[l("template",{slot:"tag"},[t._v("流程管理")]),t._v(" "),l("div",{attrs:{slot:"tab"},slot:"tab"},[l("el-row",[l("el-col",{attrs:{span:6}},[l("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.addInfo(e)}}},[t._v(t._s(t.$t("创建流程")))])],1),t._v(" "),l("el-col",{staticClass:"text-right",attrs:{span:18}},[l("div",{staticClass:"layout-inline"},[l("my-select",{staticClass:"layout-item width-150",attrs:{size:"small",placeholder:t.$t("状态"),options:t.filterAppManageStatus,clearable:!0},on:{change:function(e){return t.handleSearchChange(e,1)}}}),t._v(" "),l("my-input-button",{ref:"teacher width-150",attrs:{size:"small",plain:"","width-class":"width: 180px",type:"success",clearable:!0,placeholder:t.$t("名称/编号")},on:{click:t.search}})],1)])],1)],1),t._v(" "),l("div",{attrs:{slot:"content"},slot:"content"},[l("el-table",{ref:"refTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-class-name":"custom-table-cell-bg",size:"medium","row-key":"id","max-height":t.tableHeight.height}},[l("el-table-column",{attrs:{align:"center",label:t.$t("创建时间")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",[t._v(t._s(t.$moment(e.row.createTime).format("YYYY-MM-DD HH:mm")))])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("流程名称")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.processName))]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("span",[t._v(t._s(e.row.processName))])])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("环节数量")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.linkSize))]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("span",[t._v(t._s(e.row.linkSize))])])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("学生数量")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.studentSize))]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("span",[t._v(t._s(e.row.studentSize))])])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("状态")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[e.row.enable?l("label",{staticClass:"color-success"},[t._v(t._s(t.$t("已发布")))]):t._e(),t._v(" "),e.row.enable?t._e():l("label",{staticClass:"color-warning"},[t._v(t._s(t.$t("待发布")))])]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("div",{staticClass:"text-center"},[e.row.enable?l("label",{staticClass:"color-success"},[t._v(t._s(t.$t("已发布")))]):t._e(),t._v(" "),e.row.enable?t._e():l("label",{staticClass:"color-warning"},[t._v(t._s(t.$t("待发布")))])])])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.enable?l("i",{staticClass:"fa fa-stop-circle color-warning margin-right-5",on:{click:function(l){return t.statusInfo(e.row,!1)}}}):t._e(),t._v(" "),e.row.enable?t._e():l("i",{staticClass:"fa fa-play-circle color-success margin-right-5",on:{click:function(l){return t.statusInfo(e.row,!0)}}}),t._v(" "),l("i",{staticClass:"fa fa-edit color-grand margin-right-5",on:{click:function(l){return t.editInfo(e.row)}}}),t._v(" "),l("i",{staticClass:"fa fa-trash color-danger",on:{click:function(l){return t.deleteInfo(e.row)}}})]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",fixed:"right",label:"流程设计",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("i",{staticClass:"fa fa-cog color-success",on:{click:function(l){return t.settingInfo(e.row)}}})]}}])})],1),t._v(" "),l("div",{staticClass:"layout-right-footer text-right"},[l("my-pagination",{staticClass:"layout-pagination",attrs:{total:t.total,"current-page":t.page,"page-size":t.num},on:{currentPage:t.currentPage,sizeChange:t.sizeChange,jumpChange:t.jumpPage}})],1)],1)],2),t._v(" "),l("dialog-normal",{attrs:{top:"10vh",visible:t.dialogSetting,title:t.$t("流程设置")},on:{close:t.closeDialog,"right-close":t.cancelDialog}},[l("div",{staticClass:"margin-top-10"},[l("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"140px"}},[l("el-form-item",{attrs:{label:t.$t("流程名称"),prop:"name"}},[l("el-input",{staticClass:"width-260",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),l("el-form-item",{attrs:{label:t.$t("学生范围")}},[l("el-button",{attrs:{size:"mini",type:"warning"},on:{click:t.studentManage}},[t._v(t._s(t.$t("添加学生")))]),t._v(" "),l("span",{staticClass:"color-muted margin-left-10"},[t._v(t._s(t.$t("学生人数")))]),t._v(" "),l("span",{staticClass:"color-muted"},[t._v(t._s(t.selDataOk.length))]),t._v(" "),l("span",{staticClass:"color-muted"},[t._v(t._s(t.$t("人")))])],1)],1)],1),t._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v(t._s(t.$t("取消")))]),t._v(" "),l("el-button",{attrs:{size:"small",type:"primary",loading:t.btnFlowLoading},on:{click:t.okDialog}},[t._v(t._s(t.$t("确定"))+"\n        ")])],1)]),t._v(" "),l("drawer-layout-right",{attrs:{tabindex:"1","append-to-body":!0,visible:t.drawerVisible,size:"850px"},on:{close:t.closeDrawDialog,"right-close":t.cancelDrawDialog}},[l("div",{attrs:{slot:"title"},slot:"title"},[l("div",{staticClass:"header-block padding-lr-10"},[l("el-row",[l("el-col",{attrs:{span:12}},[l("span",{staticClass:"tab-class font-bold"},[l("i",{staticClass:"fa fa-user"}),t._v("\n                "+t._s(t.$t("管理学生"))+"\n              ")])]),t._v(" "),l("el-col",{staticClass:"text-right",attrs:{span:12}},[l("span",{staticClass:"tab-class font-bold"},[l("el-button",{attrs:{size:"small"},on:{click:t.cancelDrawDialog}},[t._v(t._s(t.$t("取消")))]),t._v(" "),l("el-button",{attrs:{size:"small",type:"primary",loading:t.drawerLoading},on:{click:t.okDrawDialog}},[t._v(t._s(t.$t("保存")))])],1)])],1)],1)]),t._v(" "),l("div",{staticClass:"color-muted",attrs:{slot:"content"},slot:"content"},[l("div",{staticClass:"text-left layout-inline"},[l("el-col",{attrs:{span:18}},[l("my-cascader",{ref:"SelectorDept",staticClass:"layout-item",attrs:{size:"small",clearable:!0,"width-style":"140","sel-value":t.searchCommDeptData,type:"1","sub-type":"4"},on:{change:function(e){return t.handleCascaderChange(e)}}}),t._v(" "),l("my-select",{staticClass:"layout-item ",attrs:{size:"small",placeholder:t.$t("选择性别"),clearable:!0,"sel-value":t.searchSex,options:t.g_sex,"width-style":"100"},on:{change:function(e){return t.handleSearchChange(e,3)}}}),t._v(" "),l("my-select",{staticClass:"layout-item ",attrs:{size:"small",placeholder:t.$t("选择批次"),clearable:!0,"sel-value":t.searchStudentPC,options:t.fliterPCs,"width-style":"100"},on:{change:function(e){return t.handleSearchChange(e,5)}}}),t._v(" "),l("el-date-picker",{staticStyle:{width:"215px"},attrs:{size:"small","unlink-panels":"",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.handleChangeTime},model:{value:t.searchStudentTime,callback:function(e){t.searchStudentTime=e},expression:"searchStudentTime"}})],1),t._v(" "),l("el-col",{staticClass:"text-right",attrs:{span:6}},[l("my-input-button",{ref:"studentRef",attrs:{size:"small",plain:"","width-class":"width: 120px",type:"success",clearable:!0,placeholder:t.$t("名称")},on:{click:t.searchStudent}})],1)],1),t._v(" "),l("div",{staticClass:"moon-clearfix"}),t._v(" "),l("div",{staticClass:"padding-tb-10"},[l("el-table",{ref:"tableStudentRef",staticStyle:{width:"100%"},attrs:{"row-key":t.getRowKeys,data:t.tableStudentData,"header-cell-class-name":"custom-table-cell-bg","max-height":t.tableHeight16.height,loading:t.tableStudentLoading},on:{"selection-change":t.handleSelectionChange}},[l("el-table-column",{attrs:{width:"55"},scopedSlots:t._u([{key:"header",fn:function(e){return[l("el-checkbox",{on:{change:t._handleSelectionStudentAllSelect},model:{value:t.commAllCheck,callback:function(e){t.commAllCheck=e},expression:"commAllCheck"}})]}},{key:"default",fn:function(e){return[l("el-checkbox",{on:{change:function(l){return t._handleSelectionStudentSelect(l,e.row)}},model:{value:e.row._checked,callback:function(l){t.$set(e.row,"_checked",l)},expression:"scope.row._checked"}})]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("录取日期")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(t.$moment(e.row.regist_date).format("YYYY-MM-DD")))]),t._v(" "),l("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                    "+t._s(t.$moment(e.row.regist_date).format("YYYY-MM-DD"))+"\n                  ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("录取号")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.enroll_no))]),t._v(" "),l("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                    "+t._s(e.row.enroll_no)+"\n                  ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("姓名")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.real_name))]),t._v(" "),l("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                    "+t._s(e.row.real_name)+"\n                  ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("性别")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("my-sex",{attrs:{sex:e.row.sex,tag:"text"}})],1),t._v(" "),l("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("my-sex",{attrs:{sex:e.row.sex,tag:"text"}})],1)])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("专业")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.major_name))]),t._v(" "),l("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                    "+t._s(e.row.major_name)+"\n                  ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("班级")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.class_name))]),t._v(" "),l("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                    "+t._s(e.row.class_name)+"\n                  ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("招生老师")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[t._v(t._s(e.row.enroll_teacher?e.row.enroll_teacher:"--"))])]),t._v(" "),l("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[t._v(t._s(e.row.enroll_teacher?e.row.enroll_teacher:"--"))])])])]}}])})],1)],1)]),t._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("el-row",[l("el-col",{attrs:{span:24}},[l("div",{staticClass:"text-right padding-lr-10"},[l("el-pagination",{attrs:{background:"","page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",total:t.totalStudent,"current-page":t.pageStudent,"page-size":t.numStudent},on:{"size-change":t.sizeStudentChange,"current-change":t.currentStudentPage}})],1)])],1)],1)]),t._v(" "),l("drawer-layout-right",{attrs:{tabindex:"1","append-to-body":!0,visible:t.dialogFlowSetting,size:"80%"},on:{close:t.closeDialog,changeDrawer:t.closeDialog}},[l("div",{attrs:{slot:"title"},slot:"title"},[l("div",{staticClass:"header-block padding-lr-10"},[l("span",{staticClass:"tab-class font-bold"},[l("i",{staticClass:"fa fa-user"}),t._v("\n            "+t._s(t.$t("流程设计"))+"\n          ")])])]),t._v(" "),l("div",{staticClass:"color-muted",attrs:{slot:"content"},slot:"content"},[l("div",[l("my-new-student-flow",{ref:"flow",attrs:{formId:t.serverDataItem,"flow-data":t.flowListData,form:t.flowFormData}})],1)]),t._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("el-row",[l("el-col",{attrs:{span:24}},[l("div",{staticClass:"text-right padding-lr-10"},[l("el-button",{attrs:{size:"small"},on:{click:t.cancelFlowDrawDialog}},[t._v(t._s(t.$t("取消")))]),t._v(" "),l("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.okFlowDrawDialog}},[t._v(t._s(t.$t("保存")))])],1)])],1)],1)]),t._v(" "),l("my-normal-dialog",{attrs:{visible:t.visibleConfim,loading:t.dialogLoading,title:"提示",detail:t.subTitle,content:"确认需要删除该信息？"},on:{"update:visible":function(e){t.visibleConfim=e},"ok-click":t.handleOkChange,"cancel-click":t.handleCancelChange,close:t.closeDialog}})],1)}),[],!1,null,"f8f4fe14",null);e.default=component.exports;installComponents(component,{MySelect:l(1256).default,MyInputButton:l(1257).default,MyPagination:l(234).default,LayoutTb:l(1261).default,DialogNormal:l(235).default,MyCascader:l(1265).default,MySex:l(1270).default,DrawerLayoutRight:l(236).default,MyNewStudentFlow:l(1555).default,MyNormalDialog:l(1260).default})}}]);