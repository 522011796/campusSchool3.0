(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{1259:function(t,e,l){var content=l(1267);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(31).default)("ca81b0e2",content,!0,{sourceMap:!1})},1262:function(t,e,l){"use strict";l.r(e);l(135),l(105),l(179),l(53);var r=l(9),n=l(6),o={name:"myElTree",mixins:[l(76).a],components:{},props:{selValue:{default:!1,type:[Boolean,Array,Number,String]},size:{defalult:"small",validate:function(t){return Object(n.D)(t,["large","medium","small","mini"])}},defaultCheckedKeys:{default:function(){return[]},type:Array},defaultExpandedKeys:{default:function(){return[]},type:Array},currentNodeKey:{default:"",type:[String,Number]},width:{default:"",type:[String,Number]},iconExtra:{default:"",type:String},iconPrefix:{default:"",type:String},showCheckbox:{default:!1,type:Boolean},opr:{default:!1,type:Boolean},type:{default:"",type:String},subType:{default:"1",type:String},extraType:{default:"",type:String},showCampus:{default:!0,type:Boolean}},computed:{selectModel:function(){this.dataCollege=this.setData(this.data)},setClass:function(){return[]}},data:function(){return{data:[],filterText:"",slotDefault:!1,slotTop:!1,nodeTreeCurrentId:"7",selectCampusAll:!0}},mounted:function(){this.slotDefault=void 0!==this.$slots.middle,this.slotTop=void 0!==this.$slots.top},created:function(){this.initInfo()},methods:{initInfo:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSessionInfo();case 2:if(1!=t.type){e.next=8;break}return e.next=5,t.getCollegeInfo(t.subType);case 5:t.data=t.dataCollege,e.next=60;break;case 8:if(2!=t.type){e.next=14;break}return e.next=11,t.getDormBuildInfo(t.subType);case 11:t.data=t.dataDormBuild,e.next=60;break;case 14:if(3!=t.type){e.next=20;break}return e.next=17,t.getSchoolBuildInfo(t.subType);case 17:t.data=t.dataSchoolBuild,e.next=60;break;case 20:if(4!=t.type){e.next=26;break}return e.next=23,t.getDeptInfo(t.subType);case 23:t.data=t.dataDept,e.next=60;break;case 26:if(100!=t.type){e.next=32;break}return e.next=29,t.getAppletInfo(t.extraType);case 29:t.data=t.dataApplet,e.next=60;break;case 32:if(110!=t.type){e.next=40;break}return e.next=35,t.getAppletServerInfo(t.extraType);case 35:t.data=t.dataAppletServer,t.selectCampusAll=!1,t.$nextTick((function(){t.$refs.tree&&t.$refs.tree.setCurrentKey(t.currentNodeKey)})),e.next=60;break;case 40:if(111!=t.type){e.next=46;break}return e.next=43,t.getAppletServerInfo(t.extraType);case 43:t.data=t.dataAppletServer,e.next=60;break;case 46:if(120!=t.type){e.next=54;break}return e.next=49,t.getLinkProcessInfo();case 49:t.data=t.dataProcessServer,t.selectCampusAll=!1,t.$nextTick((function(){t.$refs.tree&&t.$refs.tree.setCurrentKey(t.currentNodeKey)})),e.next=60;break;case 54:if(121!=t.type){e.next=60;break}return e.next=57,t.getLinkProcessLinkInfo(t.subType);case 57:t.data=t.dataProcessLinkServer,t.selectCampusAll=!1,t.$nextTick((function(){t.$refs.tree&&t.$refs.tree.setCurrentKey(t.currentNodeKey)}));case 60:case"end":return e.stop()}}),e)})))()},filterNode:function(t,data){return!t||-1!==data.label.indexOf(t)},handleNodeClick:function(data){this.selectCampusAll=!1,this.$emit("node-click",data)},handleCheckChange:function(data,t,e){this.$emit("check-change",data,t,e)},nodeClickCampusAll:function(data){this.selectCampusAll=!0,this.$emit("all-click",data)}},watch:{filterText:function(t){this.$refs.tree.filter(t)},type:function(t){this.initInfo()},subType:function(t){this.initInfo()}}},c=(l(1266),l(10)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[t.slotTop?l("div",{staticClass:"padding-tb-5 padding-lr-10"},[t._t("top")],2):t._e(),t._v(" "),l("div",{staticClass:"padding-tb-5 padding-lr-10"},[l("el-input",{attrs:{size:"medium",placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),t._v(" "),t.slotDefault?l("div",{staticClass:"padding-tb-5 padding-lr-10"},[t._t("middle")],2):t._e(),t._v(" "),l("div",{staticClass:"tree-container custom-el-tree margin-top-5"},[t.showCampus?l("el-tooltip",{attrs:{effect:"dark",content:t.campusName,placement:"top"}},[l("div",{staticClass:"moon-content-text-ellipsis-class",class:1==t.selectCampusAll?"tree-el-tree-all":"tree-el-tree-all-no",on:{click:t.nodeClickCampusAll}},[t._v("\n        "+t._s(t.campusName)+"\n      ")])]):t._e(),t._v(" "),l("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:t.data,"show-checkbox":t.showCheckbox,"filter-node-method":t.filterNode,"default-checked-keys":t.defaultCheckedKeys,"default-expanded-keys":t.defaultExpandedKeys,currentNodeKey:t.currentNodeKey,"node-key":"id","highlight-current":1!=t.selectCampusAll},on:{"node-click":t.handleNodeClick,"check-change":t.handleCheckChange}})],1)])}),[],!1,null,"3c5e5d0c",null);e.default=component.exports},1264:function(t,e,l){"use strict";l.r(e);var r={name:"LayoutLr"},n=l(10),component=Object(n.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"layout-left-menu animated fadeInLeft"},[this._t("left")],2),this._v(" "),e("div",{staticClass:"layout-right-menu"},[this._t("right")],2)])}),[],!1,null,"42aaf4c3",null);e.default=component.exports},1266:function(t,e,l){"use strict";var r=l(1259);l.n(r).a},1267:function(t,e,l){(e=l(30)(!1)).push([t.i,".tree-el-tree-all[data-v-3c5e5d0c]{background:#f0f7ff}.tree-el-tree-all[data-v-3c5e5d0c],.tree-el-tree-all-no[data-v-3c5e5d0c]{height:25px;line-height:25px;padding:3px 10px;text-align:left;font-size:14px;color:#606266}",""]),t.exports=e},1279:function(t,e,l){"use strict";l.r(e);l(179);var r={name:"circleChart",props:{chartId:"",chartTitle:"",dataKey:{default:function(){return[]},type:Array},data:{default:function(){return[]},type:Array},legendRight:{default:50,type:[String,Number]},radius:{default:function(){return["50%","80%"]},type:Array},center:{default:function(){return["30%","50%"]},type:Array}},data:function(){return{}},mounted:function(){this.lineChart()},created:function(){},methods:{lineChart:function(){var t=document.getElementById(this.chartId);this.$echarts.init(t).setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)",position:function(t,e,l,rect,r){var n=t[0],o=t[1],c=r.contentSize[0],d=r.contentSize[1];return[c>n?5:n-c,d>o?5:o-d]}},legend:{type:"scroll",orient:"vertical",right:this.legendRight,itemWidth:15,itemHeight:10,textStyle:{fontSize:12,color:"#909399"},data:this.dataKey},series:[{name:this.chartTitle?this.chartTitle:"信息",type:"pie",radius:this.radius,center:this.center,avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"10",fontWeight:"bold"}},labelLine:{show:!1},data:this.data}]})}},watch:{data:function(t,e){this.lineChart()}}},n=l(10),component=Object(n.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticStyle:{height:"100%"},attrs:{id:this.chartId}})}),[],!1,null,"799f23ac",null);e.default=component.exports},1284:function(t,e,l){"use strict";l.r(e);l(179);var r={name:"mySex",props:{status:{default:0,type:[String,Number]},handler:{default:"",type:String,Number:Number}},computed:{selectModel:function(){}},data:function(){return{value:""}},methods:{}},n=l(10),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("span",[[0==t.status?l("span",[l("label",{staticClass:"color-muted"},[t._v(t._s(t.$t("待审批")))])]):t._e(),t._v(" "),3==t.status?l("span",[l("label",{staticClass:"color-success"},[t._v(t._s(t.$t("已通过")))])]):t._e(),t._v(" "),4==t.status?l("span",[l("label",{staticClass:"color-warning"},[t._v(t._s(t.$t("已驳回")))])]):t._e(),t._v(" "),t.handler?l("span",[t._v("\n      /\n      "),l("label",[t._v(t._s(t.handler))])]):t._e()]],2)}),[],!1,null,null,null);e.default=component.exports},1310:function(t,e,l){"use strict";l(86);e.a={data:function(){return{rules:{level:[{required:!0,message:this.$t("请选择级别"),trigger:"change"}],type:[{required:!0,message:this.$t("请选择类型"),trigger:"change"}],userId:[{required:!0,message:this.$t("请选择学生"),trigger:"change"}]}}}}},1499:function(t,e,l){var content=l(1898);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(31).default)("33d0afea",content,!0,{sourceMap:!1})},1897:function(t,e,l){"use strict";var r=l(1499);l.n(r).a},1898:function(t,e,l){(e=l(30)(!1)).push([t.i,".rpStatic-top-item .person-item[data-v-698e9746]{display:inline-block;width:60px}.rpStatic-top-item .title[data-v-698e9746]{font-weight:700}.rp-img[data-v-698e9746]{height:25px;width:25px;border:1px solid #ddd}.rp-fotter-page[data-v-698e9746]{border:1px solid #ebeef5;border-top:0;height:30px;line-height:30px;width:348px}",""]),t.exports=e},2110:function(t,e,l){"use strict";l.r(e);l(360),l(709);var r=l(76),n=l(1264),o=l(1256),c=l(236),d=l(240),h=l(1262),f=l(234),v=l(1284),m=l(1279),_=l(1269),y=l(235),C=l(1257),x=l(238),S=l(239),w=l(7),$=l(6),k=l(1310),T=l(1314),D={mixins:[r.a,k.a],components:{LayoutLr:n.default,MyElTree:h.default,MySelect:o.default,DrawerLayoutRight:c.default,MyAuditDetail:d.default,MyPagination:f.default,MyAuditStatus:v.default,CircleChart:m.default,MyRadio:_.default,DialogNormal:y.default,MyInputButton:C.default,UploadSquare:x.default,AuditButton:S.default,StudentTreeAndList:T.default},data:function(){return{toggleTopShow:!1,pageStudnet:1,numStudent:20,totalStudent:0,dataAudit:{},drawerVisible:!1,modalVisible:!1,dialogLoading:!1,visibleConfim:!1,studentLoading:!1,subTitle:"",tableData:[],studentData:[],searchCollege:"",searchMajor:"",searchGrade:"",searchClass:"",applyTimeBegin:"",applyTimeEnd:"",type:"",level:"",status:"",searchKey:"",searchDate:[],filterLevels:[],filterAddLevels:[],personTotal:0,reTotal:0,puTotal:0,uploadFileAction:w.a.upload_file,typeData:[],typeDataKey:[],levelData:[],levelDataKey:[],searchStudentKey:"",errorStudent:"",auditObjectItem:{},filterLevelsText:"",filterTypesText:"",filterStatusText:"",form:{id:"",type:"",level:"",file:"",files:[],des:"",userId:[]}}},created:function(){this.init(),this.initLevels()},methods:{init:function(){var t=this,e={page:this.page,num:this.num,applyTypeCode:"PunishmentApply",collegeId:this.searchCollege,majorId:this.searchMajor,grade:this.searchGrade,classId:this.searchClass,applyTimeBegin:this.searchDate?this.searchDate[0]:"",applyTimeEnd:this.searchDate?this.searchDate[1]:"",str1:this.type,str2:this.level,status:this.status,searchKey:this.searchKey};this.$axios.get(w.a.audit_page,{params:e}).then((function(e){e.data.data&&(t.tableData=e.data.data.list,t.total=e.data.data.totalCount,t.num=e.data.data.num,t.page=e.data.data.currentPage,t.initStatic())}))},initStatic:function(){var t=this,e={collegeId:this.searchCollege,majorId:this.searchMajor,grade:this.searchGrade,classId:this.searchClass};e=this.$qs.stringify(e),this.$axios.post(w.a.audit_re_static,e).then((function(e){if(e.data.data){t.personTotal=e.data.data.studentCount,t.reTotal=e.data.data["奖励"],t.puTotal=e.data.data["处分"];for(var l=[],r=[],i=0;i<e.data.data.typeCountList.length;i++)l.push(e.data.data.typeCountList[i].ptype),r.push({name:e.data.data.typeCountList[i].ptype,value:e.data.data.typeCountList[i].count,rate:e.data.data.typeCountList[i].rate});for(var n=[],o=[],c=0;c<e.data.data.levelCountList.length;c++)n.push(e.data.data.levelCountList[c].plevel),o.push({name:e.data.data.levelCountList[c].plevel,value:e.data.data.levelCountList[c].count,rate:e.data.data.levelCountList[c].rate});t.typeData=r,t.typeDataKey=l,t.levelData=o,t.levelDataKey=n}}))},initLevels:function(t){var e=this,l={page:this.page,num:99999,levelType:t};l=this.$qs.stringify(l),this.$axios.post(w.a.audit_re_level,l).then((function(l){if(l.data.data){for(var i=0;i<l.data.data.list.length;i++)l.data.data.list[i].text=l.data.data.list[i].level_name,l.data.data.list[i].value=l.data.data.list[i].level_name;t&&(e.filterAddLevels=l.data.data.list),t||(e.filterLevels=l.data.data.list)}}))},initStudent:function(){var t=this,e={page:this.pageStudent,num:this.numStudent,collegeId:this.searchCollege,majorId:this.searchMajor,grade:this.searchGrade,clasz:this.searchClass,deleted:0};e.realName=this.searchStudentKey.input,e=this.$qs.stringify(e),this.studentLoading=!0,this.$axios.post(w.a.student_list,e).then((function(e){e.data.data&&(t.studentData=e.data.data.list,t.totalStudent=e.data.data.totalCount,t.numStudnet=e.data.data.num,t.pageStudnet=e.data.data.currentPage),t.studentLoading=!1}))},nodeClick:function(data){this.searchCollege="",this.searchMajor="",this.searchGrade="",this.searchClass="",1==data.unit?this.searchCollege=data.id:2==data.unit?(this.searchCollege=data.college_id,this.searchMajor=data.id):3==data.unit?(this.searchMajor=data.major_id,this.searchGrade=data.grade):4==data.unit&&(this.searchClass=data.id),this.page=1,this.init()},addInfo:function(){this.initStudent(),this.modalVisible=!0},searchStudent:function(data){this.searchStudentKey=data,this.initStudent()},handleDetail:function(t){var e=this,l={id:t.object_id?t.object_id:t.id};this.auditObjectItem=t,this.$axios.get(w.a.msg_detail_center,{params:l}).then((function(t){200==t.data.code?(e.dataAudit=t.data.data,e.drawerVisible=!0):Object($.c)(t.data.desc)}))},closeDrawerDialog:function(t){this.auditObjectItem={},this.drawerVisible=t},cancelDrawDialog:function(){this.drawerVisible=!1},sizeChange:function(t){this.page=1,this.num=t,this.init()},currentPage:function(t){this.page=t,this.init()},jumpPage:function(data){this.page=data,this.init()},sizeStudentChange:function(t){this.pageStudent=1,this.numStudent=t,this.initStudent()},currentStudentPage:function(t){this.pageStudent=t,this.initStudent()},handleChange:function(data){this.searchDate=data},handleRadioChange:function(data){this.form.userId=data},handleSelect:function(data,t){1==t?(this.form.type=""+data,this.form.level="",this.initLevels(data)):2==t&&(this.form.level=""+data)},search:function(data){this.searchKey=data.input,this.init()},fliterTable:function(t,e,l){for(var r in t)if("type"==r){this.filterTypesText="",this.type=t[r][0];for(var i=0;i<this.filterTypes.length;i++)this.type==this.filterTypes[i].value&&(this.filterTypesText=this.filterTypes[i].text)}else if("level"==r){this.filterLevelsText="",this.level=t[r][0];for(var n=0;n<this.filterLevels.length;n++)this.level==this.filterLevels[n].value&&(this.filterLevelsText=this.filterLevels[n].text)}else if("status"==r){this.filterStatusText="",this.status=t[r][0];for(var o=0;o<this.filterStatus.length;o++)this.status==this.filterStatus[o].value&&(this.filterStatusText=this.filterStatus[o].text)}this.page=1,this.init()},expandInfo:function(){var t=w.a.audit_download,e={page:1,num:99999,applyTypeCode:"PunishmentApply",collegeId:this.searchCollege,majorId:this.searchMajor,grade:this.searchGrade,classId:this.searchClass,applyTimeBegin:this.searchDate?this.searchDate[0]:"",applyTimeEnd:this.searchDate?this.searchDate[1]:"",str1:this.type,str2:this.level,status:this.status,searchKey:this.searchKey};e=this.$qs.stringify(e),window.open(t+"?"+e,"_self")},cancelDialog:function(){this.modalVisible=!1},closeDialog:function(t){this.form={id:"",type:"",level:"",file:"",files:[],des:"",userId:[]},this.filterAddLevels=[],this.subTitle="",this.pageStudent=1,this.numStudent=20,this.searchStudentKey="",this.$refs.studentRef&&(this.$refs.studentRef.inputValue=""),this.$refs.form&&this.$refs.form.resetFields()},okDialog:function(t){var e=this,l="",r=[];this.$refs.form.validate((function(t){if(t){if(e.errorStudent="",e.errorStudent="",e.form.userId.length<=0)return void(e.errorStudent=e.$t("请选择学生"));for(var i=0;i<e.form.userId.length;i++)r.push(e.form.userId[i].user_id);e.dialogLoading=!0;var n={applyFile:e.form.files.join(),applyTypeCode:"PunishmentApply",des:e.form.des,str1:e.form.type,str2:e.form.level,userId:r.join(),userType:"5"};l=w.a.audit_re_add,n=JSON.stringify(n),e.$axios.post(l,n,{dataType:"stringfy",loading:!1}).then((function(t){200==t.data.code?(e.modalVisible=!1,e.init(),Object($.b)(t.data.desc)):Object($.a)(t.data.desc),e.dialogLoading=!1}))}}))},uploadSuccess:function(t,e){console.log(t),200==t.code&&(this.form.files.push(t.data.url),console.log(this.form.files))},uploadError:function(t,e){Object($.a)(t.data.desc)},deleteImg:function(t,e){this.form.files.splice(e,1)},handleOk:function(data,textarea){var t=this,e={applyId:(this.auditObjectItem.id,this.auditObjectItem.id),status:1,des2:textarea};e=this.$qs.stringify(e),this.$axios.post(w.a.msg_handle,e).then((function(e){200==e.data.code?(t.init(),t.drawerVisible=!1,Object($.b)(e.data.desc)):Object($.c)(e.data.desc)}))},handleNo:function(data,textarea){var t=this,e={applyId:(this.auditObjectItem.id,this.auditObjectItem.id),status:2,des2:textarea};e=this.$qs.stringify(e),this.$axios.post(w.a.msg_handle,e).then((function(e){200==e.data.code?(t.handleDetail(t.auditObjectItem),t.init(),Object($.b)(e.data.desc)):Object($.c)(e.data.desc)}))},handleCancel:function(data){var t=this,e={applyId:(this.auditObjectItem.id,this.auditObjectItem.id),status:-1};e=this.$qs.stringify(e),this.$axios.post(w.a.msg_handle,e).then((function(e){200==e.data.code?(t.handleDetail(t.auditObjectItem),t.init(),Object($.b)(e.data.desc)):Object($.c)(e.data.desc)}))},handleShowTeacher:function(t){3==t&&this.$refs.popverPartRef._handleOpen()},handleHideeacher:function(){this.$refs.popverPartRef&&this.$refs.popverPartRef._handleResetChange()},handleSelUser:function(data,t){this.$set(this.form,"userId",data)}}},I=(l(1897),l(10)),component=Object(I.a)(D,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"container"},[l("div",{staticClass:"container"},[l("layout-lr",[l("div",{attrs:{slot:"left"},slot:"left"},[l("div",{staticClass:"color-muted font-size-12 padding-tb-5 margin-top-10"},[l("span",{staticClass:"layout-left-menu-title"},[t._v("奖惩申请")])]),t._v(" "),l("my-el-tree",{attrs:{type:"1","sub-type":"4"},on:{"node-click":t.nodeClick,"all-click":t.nodeClick}})],1),t._v(" "),l("div",{attrs:{slot:"right"},slot:"right"},[l("div",[0==t.toggleTopShow?l("div",{staticStyle:{position:"relative"}},[l("el-card",{attrs:{shadow:"never","body-style":{padding:"5px 10px",height:"60px"}}},[l("div",[l("el-row",[l("el-col",{attrs:{span:8}},[l("div",{staticClass:"rpStatic-top-item-mini color-muted"},[l("i",{staticClass:"fa fa-user"}),t._v("\n                      "+t._s(t.$t("学生人数"))+":\n                      "),l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("同一人奖励多次算一次，处罚多次算1次，既有奖励和处罚，分别各算一次"),placement:"top-start"}},[l("i",{staticClass:"fa fa-info-circle"})])],1),t._v(" "),l("div",{staticClass:"color-grand margin-top-5 font-size-12 margin-left-15",staticStyle:{"font-weight":"bold"}},[l("span",{staticClass:"person-item text-right"},[t._v(t._s(t.$t("总人数")))]),t._v(" "),l("span",[t._v(t._s(t.personTotal))])])]),t._v(" "),l("el-col",{attrs:{span:8}},[l("div",{staticClass:"rpStatic-top-item-mini color-muted"},[l("i",{staticClass:"fa fa-cubes"}),t._v(" "),l("label",[t._v(t._s(t.$t("类型占比率"))+":")])]),t._v(" "),t.typeData.length<=0?l("div",{staticClass:"font-size-12 color-disabeld margin-left-20",staticStyle:{position:"relative",top:"20%"}},[t._v(t._s(t.$t("暂无数据")))]):t._l(t.typeData,(function(e,r){return l("div",{key:r,staticClass:"font-size-12 color-muted margin-left-20"},[l("label",[t._v(t._s(e.name)+":")]),t._v(" "),l("label",[t._v(t._s(e.rate)+"%")])])}))],2),t._v(" "),l("el-col",{attrs:{span:8}},[l("div",{staticClass:"rpStatic-top-item-mini color-muted"},[l("i",{staticClass:"fa fa-cube"}),t._v(" "),l("label",[t._v(t._s(t.$t("类型人数"))+":")])]),t._v(" "),l("div",{staticClass:"font-size-12 color-muted margin-left-18"},[l("div",[l("span",{staticClass:"person-item"},[t._v(t._s(t.$t("奖励")))]),t._v(" "),l("span",[t._v(t._s(t.reTotal))])]),t._v(" "),l("div",[l("span",{staticClass:"person-item"},[t._v(t._s(t.$t("处分")))]),t._v(" "),l("span",[t._v(t._s(t.puTotal))])])])])],1)],1)]),t._v(" "),l("div",{staticClass:"text-center toggle-show-icon",on:{click:function(e){t.toggleTopShow=!t.toggleTopShow}}},[l("div",{staticClass:"font-size-12 toggle-show-icon-block"},[l("i",{staticClass:"fa fa-angle-double-down"}),t._v(" "),l("label",[t._v(t._s(t.$t("展开")))])])])],1):t._e(),t._v(" "),1==t.toggleTopShow?l("div",{staticStyle:{position:"relative"}},[l("el-card",{attrs:{shadow:"never","body-style":{padding:"5px 10px",height:"120px"}}},[l("el-row",{attrs:{gutter:8}},[l("el-col",{attrs:{span:8}},[l("div",{staticClass:"rpStatic-top-item color-muted"},[l("div",{staticClass:"title"},[t._v("\n                      "+t._s(t.$t("学生人数"))+":\n                      "),l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("同一人奖励多次算一次，处罚多次算1次，既有奖励和处罚，分别各算一次"),placement:"top-start"}},[l("i",{staticClass:"fa fa-info-circle"})])],1),t._v(" "),l("div",[l("div",{staticClass:"margin-top-5 color-grand"},[l("span",{staticClass:"person-item text-right"},[t._v(t._s(t.$t("总人数")))]),t._v(" "),l("span",[t._v(t._s(t.personTotal))])]),t._v(" "),l("div",{staticClass:"margin-top-5 color-success"},[l("span",{staticClass:"person-item text-right"},[t._v(t._s(t.$t("奖励")))]),t._v(" "),l("span",[t._v(t._s(t.reTotal))])]),t._v(" "),l("div",{staticClass:"margin-top-5 color-warning"},[l("span",{staticClass:"person-item text-right"},[t._v(t._s(t.$t("处分")))]),t._v(" "),l("span",[t._v(t._s(t.puTotal))])])])])]),t._v(" "),l("el-col",{attrs:{span:8}},[l("div",{staticClass:"rpStatic-top-item color-muted"},[l("div",{staticClass:"title"},[t._v(t._s(t.$t("类型占比"))+": ")]),t._v(" "),l("div",{staticStyle:{height:"100px"}},[t.typeData.length<=0?l("div",{staticClass:"color-disabeld text-center",staticStyle:{position:"relative",top:"20%"}},[t._v(t._s(t.$t("暂无数据")))]):l("circle-chart",{attrs:{"chart-id":"typeId","chart-title":t.$t("类型占比"),"data-key":t.typeDataKey,data:t.typeData}})],1)])]),t._v(" "),l("el-col",{attrs:{span:8}},[l("div",{staticClass:"rpStatic-top-item color-muted"},[l("div",{staticClass:"title"},[t._v(t._s(t.$t("级别占比"))+": ")]),t._v(" "),l("div",[l("div",{staticStyle:{height:"100px"}},[t.levelData.length<=0?l("div",{staticClass:"color-disabeld text-center",staticStyle:{position:"relative",top:"20%"}},[t._v(t._s(t.$t("暂无数据")))]):l("circle-chart",{attrs:{"chart-id":"levelId","chart-title":t.$t("级别占比"),"data-key":t.levelDataKey,data:t.levelData}})],1)])])])],1)],1),t._v(" "),l("div",{staticClass:"text-center toggle-show-icon",on:{click:function(e){t.toggleTopShow=!t.toggleTopShow}}},[l("div",{staticClass:"font-size-12 toggle-show-icon-block"},[l("i",{staticClass:"fa fa-angle-double-up"}),t._v(" "),l("label",[t._v(t._s(t.$t("收起")))])])])],1):t._e()]),t._v(" "),l("div",{staticClass:"layout-right-tab margin-top-10"},[l("el-row",{staticClass:"layout-inline"},[l("el-col",{attrs:{span:8}},[l("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.addInfo()}}},[t._v(t._s(t.$t("奖惩申请")))]),t._v(" "),l("el-button",{attrs:{size:"small",type:"warning",icon:"el-icon-download"},on:{click:function(e){return t.expandInfo()}}},[t._v(t._s(t.$t("导出")))])],1),t._v(" "),l("el-col",{staticClass:"text-right",attrs:{span:16}},[l("my-date-picker",{staticStyle:{position:"relative",top:"1px"},attrs:{"sel-value":t.searchDate,clearable:!0,type:"daterange",size:"small","width-style":"240"},on:{change:t.handleChange}}),t._v(" "),l("my-input-button",{attrs:{size:"small",plain:"","width-class":"width: 150px",type:"success",clearable:!0,placeholder:t.$t("姓名/学号")},on:{click:t.search}})],1)],1)],1),t._v(" "),l("div",[l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-class-name":"custom-table-cell-bg",size:"medium","max-height":0==t.toggleTopShow?t.tableHeight9.height:t.tableMiddleHeight.height},on:{"filter-change":t.fliterTable}},[l("el-table-column",{attrs:{align:"center",label:t.$t("日期")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(t.$moment(e.row.apply_time).format("YYYY-MM-DD")))]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                    "+t._s(t.$moment(e.row.apply_time).format("YYYY-MM-DD"))+"\n                  ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("姓名")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.real_name))]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                    "+t._s(e.row.real_name)+"\n                  ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("学号")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.student_id))]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                    "+t._s(e.row.student_id)+"\n                  ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("班级")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.class_name))]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                    "+t._s(e.row.class_name)+"\n                  ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center","filter-multiple":!1,"column-key":"type",filters:t.filterTypes},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.str1))]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                    "+t._s(e.row.str1)+"\n                  ")])])]}}])},[l("template",{slot:"header"},[l("span",[t._v(t._s(t.$t("类型")))]),t._v(" "),""!=t.filterTypesText?l("span",{staticClass:"font-size-12 color-disabeld"},[t._v(t._s(t.filterTypesText))]):t._e()])],2),t._v(" "),l("el-table-column",{attrs:{align:"center","filter-multiple":!1,"column-key":"level",filters:t.filterLevels},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.str2))]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                    "+t._s(e.row.str2)+"\n                  ")])])]}}])},[l("template",{slot:"header"},[l("span",[t._v(t._s(t.$t("级别")))]),t._v(" "),""!=t.filterLevelsText?l("span",{staticClass:"font-size-12 color-disabeld"},[t._v(t._s(t.filterLevelsText))]):t._e()])],2),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("说明")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(e.row.des))]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                    "+t._s(e.row.des)+"\n                  ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center","filter-multiple":!1,"column-key":"status",filters:t.filterStatus},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("my-audit-status",{attrs:{status:e.row.status,handler:e.row.handler_name}})],1),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("my-audit-status",{attrs:{status:e.row.status,handler:e.row.handler_name}})],1)])]}}])},[l("template",{slot:"header"},[l("span",[t._v(t._s(t.$t("状态/审核人")))]),t._v(" "),""!=t.filterStatusText?l("span",{staticClass:"font-size-12 color-disabeld moon-content-text-ellipsis-class"},[t._v(t._s(t.filterStatusText))]):t._e()])],2),t._v(" "),l("el-table-column",{attrs:{align:"center",fixed:"right",label:t.$t("操作"),width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("i",{staticClass:"fa fa-list-alt margin-right-5 color-grand",on:{click:function(l){return t.handleDetail(e.row)}}})]}}])})],1)],1),t._v(" "),l("div",{staticClass:"layout-right-footer text-right"},[l("my-pagination",{staticClass:"layout-pagination",attrs:{total:t.total,"current-page":t.page,"page-size":t.num},on:{currentPage:t.currentPage,sizeChange:t.sizeChange,jumpChange:t.jumpPage}})],1)])])],1),t._v(" "),l("dialog-normal",{attrs:{"width-style":"600px",top:"10vh",visible:t.modalVisible,title:t.$t("奖惩申请")},on:{close:t.closeDialog,"right-close":t.cancelDialog}},[l("div",{staticClass:"margin-top-10"},[l("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"140px"}},[l("el-form-item",{attrs:{label:t.$t("类型"),prop:"type"}},[l("my-select",{attrs:{"sel-value":t.form.type,options:t.filterTypes,"width-style":"350"},on:{change:function(e){return t.handleSelect(e,1)}}})],1),t._v(" "),l("el-form-item",{attrs:{label:t.$t("级别"),prop:"level"}},[l("my-select",{attrs:{"sel-value":t.form.level,options:t.filterAddLevels,"width-style":"350"},on:{change:function(e){return t.handleSelect(e,2)}}})],1),t._v(" "),l("el-form-item",{attrs:{label:t.$t("学生")}},[l("div",[l("el-popover",{attrs:{"popper-class":"custom-popper-class-form",placement:"right",width:"700",trigger:"click"},on:{show:function(e){return t.handleShowTeacher(3)},hide:t.handleHideeacher}},[l("div",[l("student-tree-and-list",{ref:"popverPartRef",attrs:{"sel-arr":t.form.userId,"set-type":"check"},on:{select:t.handleSelUser}})],1),t._v(" "),l("el-button",{attrs:{slot:"reference",type:"success",plain:"",size:"small"},slot:"reference"},[t._v(t._s(t.$t("添加")))])],1),t._v(" "),l("span",{staticClass:"color-warning margin-left-10"},[l("i",{staticClass:"fa fa-user"}),t._v("\n              "+t._s(t.$t("已选择"))+t._s(t.form.userId.length)+t._s(t.$t("个学生"))+"\n            ")])],1),t._v(" "),l("div",[l("span",{staticClass:"color-danger font-size-12"},[t._v(t._s(t.errorStudent))])])]),t._v(" "),l("el-form-item",{attrs:{label:t.$t("附件")}},[t._l(t.form.files,(function(e,r){return t.form.files.length>0?l("div",{key:r,staticClass:"pull-left",staticStyle:{position:"relative","margin-right":"10px",top:"10px"}},[l("i",{staticClass:"fa fa-close",staticStyle:{position:"absolute",right:"-5px",top:"-5px","font-size":"12px"},on:{click:function(e){return t.deleteImg(e,r)}}}),t._v(" "),e.indexOf(".pdf")>-1?l("i",{staticClass:"fa fa-file-pdf-o",staticStyle:{height:"25px",width:"25px","font-size":"25px",position:"relative",top:"-2px"}}):e.indexOf(".doc")>-1||e.indexOf(".docx")>-1?l("i",{staticClass:"fa fa-wordpress",staticStyle:{height:"25px",width:"25px","font-size":"25px",position:"relative",top:"-2px"}}):l("img",{staticClass:"rp-img",attrs:{src:e}})]):t._e()})),t._v(" "),l("upload-square",{staticClass:"pull-left margin-left-10 margin-top-5",attrs:{multiple:!0,limit:9999,action:t.uploadFileAction,"max-size":"20",data:{path:"reFile"},accept:".png,.jpg,.jpeg,.pdf,.doc,.docx"},on:{success:t.uploadSuccess}},[l("el-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.$t("点击上传")))])],1),t._v(" "),l("span",{staticClass:"pull-left color-danger font-size-12 margin-left-10 margin-top-5"},[t._v(t._s(t.$t("文件不超过20M")))]),t._v(" "),l("div",{staticClass:"moon-clearfix"})],2),t._v(" "),l("el-form-item",{attrs:{label:t.$t("说明")}},[l("el-input",{staticClass:"width-350",attrs:{type:"textarea",rows:2},model:{value:t.form.des,callback:function(e){t.$set(t.form,"des",e)},expression:"form.des"}})],1)],1)],1),t._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v(t._s(t.$t("取消")))]),t._v(" "),l("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){0==t.dialogLoading&&t.okDialog()}}},[t.dialogLoading?l("i",{staticClass:"el-icon-loading"}):t._e(),t._v("\n        "+t._s(t.$t("确定"))+"\n      ")])],1)]),t._v(" "),l("drawer-layout-right",{attrs:{"hide-footer":!1,visible:t.drawerVisible,size:"550px",title:t.$t("申请单")},on:{changeDrawer:t.closeDrawerDialog,"right-close":t.cancelDrawDialog}},[l("div",{attrs:{slot:"content"},slot:"content"},[l("my-audit-detail",{attrs:{type:"PunishmentApply","sel-value":t.dataAudit}})],1),t._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("audit-button",{attrs:{"sel-value":t.dataAudit},on:{ok:t.handleOk,no:t.handleNo,cancel:t.handleCancel}})],1)])],1)}),[],!1,null,"698e9746",null);e.default=component.exports;installComponents(component,{MyElTree:l(1262).default,CircleChart:l(1279).default,MyDatePicker:l(1258).default,MyInputButton:l(1257).default,MyAuditStatus:l(1284).default,MyPagination:l(234).default,LayoutLr:l(1264).default,MySelect:l(1256).default,StudentTreeAndList:l(1314).default,UploadSquare:l(238).default,DialogNormal:l(235).default,MyAuditDetail:l(240).default,AuditButton:l(239).default,DrawerLayoutRight:l(236).default})}}]);