(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1471:function(t,e,l){var content=l(1846);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(31).default)("0c90863e",content,!0,{sourceMap:!1})},1845:function(t,e,l){"use strict";var o=l(1471);l.n(o).a},1846:function(t,e,l){(e=l(30)(!1)).push([t.i,".container[data-v-2f3883b0]{padding:10px 15px}.header-block[data-v-2f3883b0]{height:40px;line-height:40px}",""]),t.exports=e},1955:function(t,e,l){"use strict";l.r(e);l(237),l(109),l(360),l(709),l(65),l(106),l(710),l(110);var o=l(234),n=l(76),r=l(7),c=l(6),d=l(1261),m=l(1256),h=l(1273),f=l(1258),_=l(1257),v=l(1536),D=l(238),k=l(235),S=l(236),C={mixins:[n.a,v.a],components:{DrawerLayoutRight:S.default,DialogNormal:k.default,UploadSquare:D.default,MyPagination:o.default,LayoutTb:d.default,MySelect:m.default,MyUserType:h.default,MyDatePicker:f.default,MyInputButton:_.default},props:{pageTitle:"",linkId:"",processId:""},data:function(){return{commAllCheck:!1,commAllCheckCount:0,checkboxCount:0,pageDorm:1,numDorm:20,totalDorm:0,pageStudent:1,numStudent:20,totalStudent:0,tableData:[],searchDate:[],typeList:[],searchCommDeptBedData:[],searchCollegeData:[],tableDormData:[],tableStudnetData:[],tablePackagedata:[],fliterPCs:[],searchKey:"",commSearchBuild:"",commSearchFloor:"",searchDormSex:"",searchDormType:"",commFlag:!1,visible:!1,visibleConfim:!1,dialogVisible:!1,drawerVisible:!1,drawerDorm:!1,drawerStudent:!1,tableDormLoading:!1,dialogLoading:!1,rowSelectFlag:!1,dialogPackage:!1,clearTime:"",action:"",subTitle:"",searchDorm:"",searchStudnetCollege:"",searchStudnetMajor:"",searchStudnetGrade:"",searchStudnetClass:"",selStudentData:[],selStudentDataOk:[],selStudentDataBakOk:[],selDormData:[],selDormDataOk:[],selDormDataBakOk:[],commRow:"",searchStudentPC:"",uploadFileUrl:r.a.upload_file,searchTimeUserData:[],searchUserKey:"",filterType:[{text:this.$t("按宿舍选"),value:0,label:this.$t("按宿舍选")},{text:this.$t("按套餐选"),value:1,label:this.$t("按套餐选")}],filtersDormType:[{text:"男生宿舍",value:"0",label:"男生宿舍"},{text:"女生宿舍",value:"1",label:"女生宿舍"}],filterArea:[{text:"校内宿舍",value:1,label:"校内宿舍"},{text:"校外公寓",value:2,label:"校外公寓"}],form:{id:"",name:"",students:[],dorm:[],type:0,package:[],area:1}}},created:function(){this.init(),this.initBatchList()},methods:{init:function(){var t=this,e={page:this.page,num:this.num,linkId:this.linkId};this.$axios.get(r.a.enroll_link_dorm_rule,{params:e}).then((function(e){e.data.data&&(t.tableData=e.data.data.list,t.total=e.data.data.totalCount,t.num=e.data.data.num,t.page=e.data.data.currentPage)}))},initDorm:function(){var t=this,e={page:this.pageDorm,num:this.numDorm,buildId:this.searchBuildId,floorNum:this.searchFloorNum,type:this.searchDormType};this.checkboxCount=0,this.tableDormLoading=!0,this.$axios.get(r.a.dormroom_page,{params:e}).then((function(e){if(e.data.data){var l=[];0==t.selDormData.length?(l=t.selDormDataOk,t.selDormData=t.selDormDataOk):t.selDormDataOk.forEach((function(e){t.selDormData.forEach((function(t){e.id==t.id&&l.push(e)}))}));for(var i=0;i<e.data.data.list.length;i++){Object(c.u)(e.data.data.list[i],l,"id")>-1?(t.commFlag=!0,e.data.data.list[i]._checked=!0,t.checkboxCount++):e.data.data.list[i]._checked=!1}0!=t.checkboxCount&&t.checkboxCount==t.tableDormData.length?t.commAllCheck=!0:t.commAllCheck=!1,t.commFlag=!1,t.tableDormData=e.data.data.list,t.totalDorm=e.data.data.totalCount,t.numDorm=e.data.data.num,t.pageDorm=e.data.data.currentPage,t.tableDormLoading=!1}}))},initStudent:function(){var t=this,e={page:this.pageStudent,num:this.numStudent,collegeId:this.searchStudnetCollege,majorId:this.searchStudnetMajor,grade:this.searchStudnetGrade,classId:this.searchStudnetClass,sex:this.searchDormSex,enrollBatch:this.searchStudentPC,beginTime:this.searchTimeUserData&&this.searchTimeUserData.length>0?this.$moment(this.searchTimeUserData[0]).format("YYYY-MM-DD"):"",endTime:this.searchTimeUserData&&this.searchTimeUserData.length>0?this.$moment(this.searchTimeUserData[1]).format("YYYY-MM-DD"):"",searchKey:this.searchUserKey,processId:this.processId};this.checkboxCount=0,this.tableDormLoading=!0,this.$axios.get(r.a.enroll_student_page,{params:e}).then((function(e){if(e.data.data){var l=[];0==t.selStudentData.length?(l=t.selStudentDataOk,t.selStudentData=t.selStudentDataOk):t.selStudentDataOk.forEach((function(e){t.selStudentData.forEach((function(t){e.user_id==t.user_id&&l.push(e)}))}));for(var i=0;i<e.data.data.list.length;i++){Object(c.u)(e.data.data.list[i],l,"user_id")>-1?(t.commFlag=!0,e.data.data.list[i]._checked=!0,t.checkboxCount++):e.data.data.list[i]._checked=!1}0!=t.checkboxCount&&t.checkboxCount==t.tableStudnetData.length?t.commAllCheck=!0:t.commAllCheck=!1,t.commFlag=!1,t.tableStudnetData=e.data.data.list,t.totalStudent=e.data.data.totalCount,t.numStudent=e.data.data.num,t.pageStudent=e.data.data.currentPage,t.tableDormLoading=!1}}))},initPackage:function(t){var e=this,l={id:t.id};this.tableDormLoading=!0,this.$axios.get(r.a.enroll_link_dorm_info,{params:l,loading:!1}).then((function(t){t.data.data&&(e.tablePackagedata=t.data.data.listPackage,e.tableDormLoading=!1)}))},initBatchList:function(){var t=this;this.$axios.get(r.a.enroll_batch_list,{params:{},loading:!1}).then((function(e){if(e.data.data){for(var l=[],i=0;i<e.data.data.length;i++)l.push({label:e.data.data[i].enroll_batch,value:e.data.data[i].enroll_batch,text:e.data.data[i].enroll_batch});t.fliterPCs=l}}))},getStudentRowKeys:function(t){return t.user_id},getDormRowKeys:function(t){return t.id},handleSelectionChange:function(data){},handleDormSelectionChange:function(data){},_handleSelectionSelect:function(t,e){if(t)this.selDormData.push(e),e._checked=!0,this.checkboxCount++;else{var l=Object(c.u)(e,this.selDormData,"id");this.selDormData.splice(l,1),e._checked=!1,this.checkboxCount--}0!=this.checkboxCount&&this.checkboxCount==this.tableDormData.length?this.commAllCheck=!0:this.commAllCheck=!1},_handleSelectionAllSelect:function(t){this.commAllCheck=t;for(var i=0;i<this.tableDormData.length;i++)if(1==t){this.tableDormData[i]._checked=!0,-1==Object(c.u)(this.tableDormData[i],this.selDormData,"id")&&this.selDormData.push(this.tableDormData[i]),this.checkboxCount++}else{this.tableDormData[i]._checked=!1;var e=Object(c.u)(this.tableDormData[i],this.selDormData,"id");e>-1&&(this.selDormData.splice(e,1),i-=1),this.checkboxCount--}},_handleSelectionStudentSelect:function(t,e){if(t)this.selStudentData.push(e),e._checked=!0,this.checkboxCount++;else{var l=Object(c.u)(e,this.selStudentData,"user_id");this.selStudentData.splice(l,1),e._checked=!1,this.checkboxCount--}0!=this.checkboxCount&&this.checkboxCount==this.tableStudnetData.length?this.commAllCheck=!0:this.commAllCheck=!1},_handleSelectionStudentAllSelect:function(t){this.commAllCheck=t;for(var i=0;i<this.tableStudnetData.length;i++)if(1==t){this.tableStudnetData[i]._checked=!0,-1==Object(c.u)(this.tableStudnetData[i],this.selStudentData,"user_id")&&this.selStudentData.push(this.tableStudnetData[i]),this.checkboxCount++}else{this.tableStudnetData[i]._checked=!1;var e=Object(c.u)(this.tableStudnetData[i],this.selStudentData,"user_id");e>-1&&(this.selStudentData.splice(e,1),i-=1),this.checkboxCount--}},removeDuplicateObj:function(t){for(var e=[],l={},i=0;i<t.length;i++)l[t[i].id]||(e.push(t[i]),l[t[i].id]=!0);return e},dormTypeInfo:function(t){return Object(c.n)(t)},sizeChange:function(t){this.page=1,this.num=t,this.init()},currentPage:function(t){this.page=t,this.init()},jumpPage:function(data){this.page=data,this.init()},sizeDormChange:function(t){this.pageDorm=1,this.numDorm=t,this.initDorm()},currentDormPage:function(t){this.pageDorm=t,this.initDorm()},jumpDormPage:function(data){this.pageDorm=data,this.initDorm()},sizeStudentChange:function(t){this.pageStudent=1,this.numStudent=t,this.initStudent()},currentStudentPage:function(t){this.pageStudent=t,this.initStudent()},jumpStudentPage:function(data){this.pageStudent=data,this.initStudent()},returnMain:function(){this.$emit("returnClick")},addInfo:function(){this.dialogVisible=!0},detailInfo:function(t){this.initPackage(t),this.dialogPackage=!0},editInfo:function(t){var e=this;this.form={id:t.id,name:t.rule_name,type:t.rule_type};var l={id:t.id};this.$axios.get(r.a.enroll_link_dorm_info,{params:l,loading:!1}).then((function(t){if(t.data.data){for(var l=[],o=[],n=[],i=0;i<t.data.data.userList.length;i++)l.push({user_id:t.data.data.userList[i].userId});for(var r=0;r<t.data.data.roomList.length;r++)o.push({id:t.data.data.roomList[r].roomId});for(var c=0;c<t.data.data.listPackage.length;c++)n.push({id:t.data.data.listPackage[c].id,packageArea:t.data.data.listPackage[c].pacRegion,packageName:t.data.data.listPackage[c].pacName,packagePrice:t.data.data.listPackage[c].pacPrice,packageNum:t.data.data.listPackage[c].pacNum,packageImg:t.data.data.listPackage[c].pacLogo?t.data.data.listPackage[c].pacLogo.split(","):[]});e.selStudentData=[].concat(l),e.selStudentDataOk=[].concat(l),e.selStudentDataBakOk=[].concat(l),e.selDormData=[].concat(o),e.selDormDataOk=[].concat(o),e.selDormDataBakOk=[].concat(o),e.form.package=n}})),this.dialogVisible=!0},setInfo:function(t){},deleteInfo:function(t){this.form.id=t.id,this.visibleConfim=!0},dormManage:function(){this.$refs.tableDormRef&&this.$refs.tableDormRef.clearSelection(),this.pageDorm=1,this.initDorm(),this.drawerDorm=!0},studentManage:function(){this.$refs.tableStudentRef&&this.$refs.tableStudentRef.clearSelection(),this.pageStudent=1,this.initStudent(),this.drawerStudent=!0},handleCancelChange:function(data){this.visibleConfim=!1},handleSearchChange:function(t,e){1==e?(this.searchDormType=t,this.pageDorm=1,this.initDorm()):2==e?(this.pageStudent=1,this.searchDormSex=t):3==e?this.form.type=t:4==e?this.form.area=t:5==e&&(this.searchStudentPC=t)},handleCascaderBedChange:function(data){this.commSearchBuild="",this.commSearchFloor="",1==data.length?this.commSearchBuild=data[0]:2==data.length&&(this.commSearchBuild=data[0],this.commSearchFloor=data[1]),this.pageDorm=1,this.initDorm()},handleCascaderStudentChange:function(data){this.searchStudnetCollege="",this.searchStudnetMajor="",this.searchStudnetGrade="",this.searchStudnetClass="",1==data.length?this.searchStudnetCollege=data[0]:2==data.length?(this.searchStudnetCollege=data[0],this.searchStudnetMajor=data[1]):3==data.length?(this.searchStudnetCollege=data[0],this.searchStudnetMajor=data[1],this.searchStudnetGrade=data[2]):4==data.length&&(this.searchStudnetCollege=data[0],this.searchStudnetMajor=data[1],this.searchStudnetGrade=data[2],this.searchStudnetClass=data[3]),this.pageStudent=1},handleChangeTime:function(t,e){1==e&&(this.searchTimeUserData=t||[])},searchUser:function(data){this.pageStudent=1,this.searchUserKey=data.input,this.initStudent()},handleOkChange:function(data){var t=this;this.dialogLoading=!0;var e,l={id:this.form.id};e=r.a.enroll_link_dorm_del,l=this.$qs.stringify(l),this.$axios.post(e,l,{loading:!1}).then((function(e){200==e.data.code?(t.init(),Object(c.b)(e.data.desc)):Object(c.a)(e.data.desc),t.visibleConfim=!1}))},closeDialog:function(t){this.form={id:"",name:"",students:[],dorm:[],type:0,package:[],area:1},this.$refs.form&&this.$refs.form.resetFields(),this.selStudentDataOk=[],this.selStudentDataBakOk=[],this.selStudentData=[],this.selDormDataOk=[],this.selDormDataBakOk=[],this.selDormData=[],this.drawerVisible=!1},closeDrawDialog:function(t){this.pageDorm=1,this.numDorm=20,this.totalDorm=0,this.pageStudent=1,this.numStudent=20,this.totalStudent=0,this.searchStudnetMajor="",this.searchStudnetCollege="",this.searchStudnetClass="",this.searchStudnetGrade="",this.commSearchBuild="",this.commSearchFloor="",this.searchStudentPC="",this.searchDormSex="",this.searchCollegeData=[],this.searchCommDeptBedData=[],this.resetCasadeSelector("SelectorDormDept"),this.resetCasadeSelector("SelectorCollege"),this.selStudentDataOk=this.selStudentDataBakOk,this.selStudentData=[],this.selDormDataOk=this.selDormDataBakOk,this.selDormData=[],this.$refs.tableStudentRef&&this.$refs.tableStudentRef.clearSelection(),this.$refs.tableDormRef&&this.$refs.tableDormRef.clearSelection(),this.searchUserKey="",this.$refs.teacher&&(this.$refs.teacher.inputValue=""),this.$refs.userRef&&(this.$refs.userRef.inputValue=""),this.searchTimeUserData=[],this.commAllCheck=!1,this.drawerDorm=!1,this.drawerStudent=!1,this.dialogPackage=!1},cancelDrawDialog:function(t){this.closeDrawDialog(),this.drawerDorm=!1,this.drawerStudent=!1},cancelDialog:function(){this.$refs.form&&this.$refs.form.resetFields(),this.dialogVisible=!1},okDialog:function(){var t=this,e="";this.$refs.form.validate((function(l){if(l){var o=[],n=[],d={};if(0===t.form.type){if(0==t.selDormDataOk.length)return void Object(c.c)(t.$t("请选择宿舍！"));for(var i=0;i<t.selStudentDataOk.length;i++)o.push(t.selStudentDataOk[i].user_id);for(var m=0;m<t.selDormDataOk.length;m++)n.push(t.selDormDataOk[m].id);d={linkId:t.linkId,ruleName:t.form.name,ruleType:t.form.type,roomIds:n.join(),userIds:o.join()}}else if(1===t.form.type){if(0==t.form.package.length)return void Object(c.c)(t.$t("请设置套餐！"));for(var h=[],f=0;f<t.form.package.length;f++)h.push({pacRegion:t.form.package[f].packageArea,pacName:t.form.package[f].packageName,pacPrice:t.form.package[f].packagePrice,pacNum:t.form.package[f].packageNum,pacLogo:t.form.package[f].packageImg.join()}),t.form.package[f].id&&(h[f].id=t.form.package[f].id);for(var _=0;_<t.selStudentDataOk.length;_++)o.push(t.selStudentDataOk[_].user_id);d={linkId:t.linkId,ruleName:t.form.name,ruleType:t.form.type,packages:JSON.stringify(h),userIds:o.join()}}if(0==t.selStudentDataOk.length)return void Object(c.c)(t.$t("请选择学生！"));t.dialogLoading=!0,""!=t.form.id&&(d.id=t.form.id),e=r.a.enroll_link_dorm_save,d=t.$qs.stringify(d),t.$axios.post(e,d,{loading:!1}).then((function(e){200==e.data.code?(t.dialogVisible=!1,t.init(),Object(c.b)(e.data.desc)):Object(c.a)(e.data.desc),t.dialogLoading=!1}))}}))},okDrawDialog:function(t,e){1==e?(this.selDormDataOk=JSON.parse(JSON.stringify(this.selDormData)),this.selDormDataBakOk=JSON.parse(JSON.stringify(this.selDormData))):2==e&&(this.selStudentDataOk=JSON.parse(JSON.stringify(this.selStudentData)),this.selStudentDataBakOk=JSON.parse(JSON.stringify(this.selStudentData))),this.drawerStudent=!1,this.drawerDorm=!1},addObj:function(t,e){var l={packageArea:"",packageName:"",packagePrice:0,packageNum:0,packageImg:[]};-1==e?this.form.package.push(l):this.form.package.splice(e+1,0,l)},deleteObj:function(t,e){this.form.package.splice(e,1)},uploadFileSuccess:function(t,e,l){if(200==t.code){var o=this.form.package[l].packageImg;o.push(t.data.url),this.$set(this.form.package[l],"packageImg",o),console.log(this.form.package,l)}}}},w=(l(1845),l(10)),component=Object(w.a)(C,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"container"},[l("layout-tb",[l("template",{slot:"tag"}),t._v(" "),l("div",{attrs:{slot:"tab"},slot:"tab"},[l("el-row",[l("el-col",{attrs:{span:24}},[l("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.returnMain(e)}}},[l("i",{staticClass:"fa fa-arrow-left"}),t._v("\n              "+t._s(t.$t("返回"))+"\n            ")]),t._v(" "),l("span",{staticClass:"margin-left-5"},[t._v(t._s(t.pageTitle))]),t._v(" "),l("el-button",{staticClass:"margin-left-5",attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.addInfo(e)}}},[t._v(t._s(t.$t("创建规则")))])],1)],1)],1),t._v(" "),l("div",{attrs:{slot:"content"},slot:"content"},[l("el-table",{ref:"refTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-class-name":"custom-table-cell-bg",size:"medium","row-key":"id","max-height":t.tableHeight.height}},[l("el-table-column",{attrs:{align:"center",prop:"department_name",label:t.$t("创建时间")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v(t._s(t.$moment(e.row.time).format("YYYY-MM-DD HH:mm:ss")))]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                  "+t._s(t.$moment(e.row.time).format("YYYY-MM-DD HH:mm:ss"))+"\n                ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",prop:"action_name",label:t.$t("规则名称")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v("\n                  "+t._s(e.row.rule_name)+"\n                ")]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                  "+t._s(e.row.rule_name)+"\n                ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",prop:"user_name",label:t.$t("总人数")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v("\n                  "+t._s(e.row.user_size)+"\n                ")]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                  "+t._s(e.row.user_size)+"\n                ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",width:"120",label:t.$t("操作")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("i",{staticClass:"fa fa-edit margin-right-5 color-success",on:{click:function(l){return t.editInfo(e.row)}}}),t._v(" "),1==e.row.rule_type?l("i",{staticClass:"fa fa-eye margin-right-5 color-success",on:{click:function(l){return t.detailInfo(e.row)}}}):t._e(),t._v(" "),l("i",{staticClass:"fa fa-trash color-danger",on:{click:function(l){return t.deleteInfo(e.row)}}})]}}])})],1),t._v(" "),l("div",{staticClass:"layout-right-footer text-right"},[l("my-pagination",{staticClass:"layout-pagination",attrs:{total:t.total,"current-page":t.page,"page-size":t.num},on:{currentPage:t.currentPage,sizeChange:t.sizeChange,jumpChange:t.jumpPage}})],1)],1)],2),t._v(" "),l("dialog-normal",{attrs:{top:"10vh","width-style":"650px",visible:t.dialogVisible,title:t.$t("规则设置")},on:{close:t.closeDialog,"right-close":t.cancelDialog}},[l("div",{staticClass:"margin-top-10"},[l("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"200px"}},[l("el-form-item",{attrs:{label:t.$t("规则名称"),prop:"name"}},[l("el-input",{staticClass:"width-260",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),l("el-form-item",{attrs:{label:t.$t("选寝类型"),prop:"type"}},[l("my-select",{staticClass:"layout-item",attrs:{"width-style":"260","sel-value":t.form.type,options:t.filterType,clearable:!0},on:{change:function(e){return t.handleSearchChange(e,3)}}})],1),t._v(" "),0==t.form.type?[l("el-form-item",{attrs:{label:t.$t("宿舍范围"),prop:"dorm"}},[l("el-button",{attrs:{size:"mini",type:"warning"},on:{click:t.dormManage}},[t._v(t._s(t.$t("添加宿舍")))]),t._v(" "),l("span",{staticClass:"color-muted margin-left-10"},[t._v(t._s(t.$t("宿舍数量")))]),t._v(" "),l("span",{staticClass:"color-muted"},[t._v(t._s(t.selDormDataOk.length))])],1)]:t._e(),t._v(" "),l("el-form-item",{attrs:{label:t.$t("学生范围"),prop:"student"}},[l("el-button",{attrs:{size:"mini",type:"warning"},on:{click:t.studentManage}},[t._v(t._s(t.$t("添加学生")))]),t._v(" "),l("span",{staticClass:"color-muted margin-left-10"},[t._v(t._s(t.$t("学生人数")))]),t._v(" "),l("span",{staticClass:"color-muted"},[t._v(t._s(t.selStudentDataOk.length))]),t._v(" "),l("span",{staticClass:"color-muted"},[t._v(t._s(t.$t("人")))])],1),t._v(" "),1==t.form.type?[l("div",[l("el-button",{attrs:{size:"mini",icon:"el-icon-plus",type:"success",plain:""},on:{click:function(e){return t.addObj(e,-1)}}},[t._v(t._s(t.$t("添加套餐")))])],1),t._v(" "),l("div",{staticClass:"margin-top-5"},[l("el-table",{ref:"refTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.form.package,"header-cell-class-name":"custom-table-cell-bg",size:"medium"}},[l("el-table-column",{attrs:{align:"center",label:t.$t("区域范围")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-input",{staticStyle:{width:"80px"},attrs:{size:"mini"},model:{value:e.row.packageArea,callback:function(l){t.$set(e.row,"packageArea",l)},expression:"scope.row.packageArea"}})]}}],null,!1,4001970123)}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("套餐名称")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-input",{staticStyle:{width:"80px"},attrs:{size:"mini"},model:{value:e.row.packageName,callback:function(l){t.$set(e.row,"packageName",l)},expression:"scope.row.packageName"}})]}}],null,!1,4252843323)}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("套餐价格")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-input",{staticStyle:{width:"80px"},attrs:{size:"mini"},model:{value:e.row.packagePrice,callback:function(l){t.$set(e.row,"packagePrice",l)},expression:"scope.row.packagePrice"}})]}}],null,!1,496791473)}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("套餐数量")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-input",{staticStyle:{width:"80px"},attrs:{size:"mini"},model:{value:e.row.packageNum,callback:function(l){t.$set(e.row,"packageNum",l)},expression:"scope.row.packageNum"}})]}}],null,!1,2739685354)}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:t.$t("示意图")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"layout-inline"},[e.row.packageImg.length>0?l("span",{staticClass:"custom-avatar layout-item",staticStyle:{position:"relative",top:"2px"}},t._l(e.row.packageImg,(function(t,e){return l("el-image",{key:e,staticStyle:{width:"15px",height:"15px","margin-right":"5px"},attrs:{src:t,fit:"fill"}})})),1):t._e(),t._v(" "),l("span",[l("upload-square",{staticClass:"layout-item",attrs:{action:t.uploadFileUrl,"max-size":"8",limit:3,data:{path:"package"},accept:".png,.jpg,.jpeg"},on:{success:function(l,o){return t.uploadFileSuccess(l,o,e.$index)}}},[l("div",{staticClass:"upload-block-class"},[l("span",{staticClass:"fa fa-plus-circle color-success"})])])],1)])]}}],null,!1,1196457e3)}),t._v(" "),l("el-table-column",{attrs:{align:"center",width:"80",label:t.$t("操作")},scopedSlots:t._u([{key:"default",fn:function(e){return[l("i",{staticClass:"fa fa-plus color-success margin-right-5",on:{click:function(l){return t.addObj(l,e.$index)}}}),t._v(" "),l("i",{staticClass:"fa fa-times color-danger",on:{click:function(l){return t.deleteObj(l,e.$index)}}})]}}],null,!1,2046561127)})],1)],1)]:t._e()],2)],1),t._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v(t._s(t.$t("取消")))]),t._v(" "),l("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){0==t.dialogLoading&&t.okDialog()}}},[t.dialogLoading?l("i",{staticClass:"el-icon-loading"}):t._e(),t._v("\n          "+t._s(t.$t("确定"))+"\n        ")])],1)]),t._v(" "),l("drawer-layout-right",{attrs:{tabindex:"0",visible:t.drawerDorm,size:"700px",title:t.$t("宿舍设置")},on:{changeDrawer:t.closeDrawDialog,"right-close":t.cancelDrawDialog}},[l("div",{attrs:{slot:"title"},slot:"title"},[l("div",{staticClass:"header-block padding-lr-10"},[l("el-row",[l("el-col",{attrs:{span:12}},[l("span",{staticClass:"tab-class font-bold"},[l("i",{staticClass:"fa fa-user"}),t._v("\n                "+t._s(t.$t("宿舍设置"))+"\n              ")])]),t._v(" "),l("el-col",{staticClass:"text-right",attrs:{span:12}},[l("span",{staticClass:"tab-class font-bold"},[l("el-button",{attrs:{size:"small"},on:{click:t.cancelDrawDialog}},[t._v(t._s(t.$t("取消")))]),t._v(" "),l("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.okDrawDialog(e,1)}}},[t._v(t._s(t.$t("保存")))])],1)])],1)],1)]),t._v(" "),l("div",{staticClass:"color-muted",attrs:{slot:"content"},slot:"content"},[l("div",[l("div",{staticClass:"layout-inline"},[l("my-cascader",{ref:"SelectorDormDept",staticClass:"layout-item",attrs:{clearable:!0,size:"small","width-style":"160","sel-value":t.searchCommDeptBedData,type:"2","sub-type":"2"},on:{change:function(e){return t.handleCascaderBedChange(e)}}}),t._v(" "),l("my-select",{staticClass:"layout-item",attrs:{size:"small",clearable:!0,options:t.filtersDormType},on:{change:function(e){return t.handleSearchChange(e,1)}}})],1),t._v(" "),l("div",[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableDormLoading,expression:"tableDormLoading"}],ref:"tableDormRef",staticClass:"margin-top-10",attrs:{data:t.tableDormData,size:"mini","row-key":t.getDormRowKeys},on:{"selection-change":t.handleDormSelectionChange}},[l("el-table-column",{attrs:{width:"55"},scopedSlots:t._u([{key:"header",fn:function(e){return[l("el-checkbox",{on:{change:t._handleSelectionAllSelect},model:{value:t.commAllCheck,callback:function(e){t.commAllCheck=e},expression:"commAllCheck"}})]}},{key:"default",fn:function(e){return[l("el-checkbox",{on:{change:function(l){return t._handleSelectionSelect(l,e.row)}},model:{value:e.row._checked,callback:function(l){t.$set(e.row,"_checked",l)},expression:"scope.row._checked"}})]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"楼栋",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[t._v(t._s(e.row.build_name))])]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[t._v(t._s(e.row.build_name))])])])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"floor_num",label:t.$t("楼层"),align:"center"}}),t._v(" "),l("el-table-column",{attrs:{label:t.$t("类型"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",[t._v(t._s(t.dormTypeInfo(e.row.type)))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:t.$t("管理员"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[t._v(t._s(e.row.teacher_name?e.row.teacher_name:"--"))])]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[t._v(t._s(e.row.teacher_name?e.row.teacher_name:"--"))])])])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:t.$t("床位总数"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",[t._v(t._s(e.row.people_num))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:t.$t("可用床位"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",[t._v(t._s(e.row.people_num-e.row.has_people_num))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:t.$t("朝向"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",[t._v(t._s(e.row.room_orient))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:t.$t("单价"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",[t._v(t._s(e.row.room_price))])]}}])})],1)],1)])]),t._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("div",{staticClass:"text-right padding-lr-10"},[l("my-pagination",{staticClass:"layout-pagination",attrs:{total:t.totalDorm,"current-page":t.pageDorm,"page-size":t.numDorm},on:{currentPage:t.currentDormPage,sizeChange:t.sizeDormChange,jumpChange:t.jumpDormPage}})],1)])]),t._v(" "),l("drawer-layout-right",{attrs:{tabindex:"0",visible:t.drawerStudent,size:"850px",title:t.$t("学生设置")},on:{changeDrawer:t.closeDrawDialog,"right-close":t.cancelDrawDialog}},[l("div",{attrs:{slot:"title"},slot:"title"},[l("div",{staticClass:"header-block padding-lr-10"},[l("el-row",[l("el-col",{attrs:{span:12}},[l("span",{staticClass:"tab-class font-bold"},[l("i",{staticClass:"fa fa-user"}),t._v("\n                "+t._s(t.$t("学生设置"))+"\n              ")])]),t._v(" "),l("el-col",{staticClass:"text-right",attrs:{span:12}},[l("span",{staticClass:"tab-class font-bold"},[l("el-button",{attrs:{size:"small"},on:{click:t.cancelDrawDialog}},[t._v(t._s(t.$t("取消")))]),t._v(" "),l("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.okDrawDialog(e,2)}}},[t._v(t._s(t.$t("保存")))])],1)])],1)],1)]),t._v(" "),l("div",{staticClass:"color-muted",attrs:{slot:"content"},slot:"content"},[l("div",[l("div",{staticClass:"layout-inline"},[l("my-cascader",{ref:"SelectorCollege",staticClass:"layout-item",attrs:{props:{checkStrictly:!0},size:"small","width-style":"150",clearable:!0,"sel-value":t.searchCollegeData,type:"1","sub-type":"4"},on:{change:function(e){return t.handleCascaderStudentChange(e)}}}),t._v(" "),l("my-select",{staticClass:"layout-item",attrs:{"width-style":"140",size:"small",clearable:!0,"sel-value":t.searchDormSex,options:t.g_sex},on:{change:function(e){return t.handleSearchChange(e,2)}}}),t._v(" "),l("my-select",{staticClass:"layout-item ",attrs:{size:"small",placeholder:t.$t("选择批次"),clearable:!0,"sel-value":t.searchStudentPC,options:t.fliterPCs,"width-style":"100"},on:{change:function(e){return t.handleSearchChange(e,5)}}}),t._v(" "),l("el-date-picker",{staticStyle:{width:"220px"},attrs:{size:"small","unlink-panels":"",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(e){return t.handleChangeTime(e,1)}},model:{value:t.searchTimeUserData,callback:function(e){t.searchTimeUserData=e},expression:"searchTimeUserData"}}),t._v(" "),l("my-input-button",{ref:"userRef",attrs:{size:"small",plain:"","width-class":"width: 130px",type:"success",clearable:!0,placeholder:t.$t("名称")},on:{click:t.searchUser}})],1),t._v(" "),l("div",[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableDormLoading,expression:"tableDormLoading"}],ref:"tableStudentRef",staticClass:"margin-top-10",attrs:{data:t.tableStudnetData,size:"mini","row-key":t.getStudentRowKeys},on:{"selection-change":t.handleSelectionChange}},[l("el-table-column",{attrs:{width:"55"},scopedSlots:t._u([{key:"header",fn:function(e){return[l("el-checkbox",{on:{change:t._handleSelectionStudentAllSelect},model:{value:t.commAllCheck,callback:function(e){t.commAllCheck=e},expression:"commAllCheck"}})]}},{key:"default",fn:function(e){return[l("el-checkbox",{on:{change:function(l){return t._handleSelectionStudentSelect(l,e.row)}},model:{value:e.row._checked,callback:function(l){t.$set(e.row,"_checked",l)},expression:"scope.row._checked"}})]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"录入时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[t._v(t._s(t.$moment(e.row.regist_date).format("YYYY-MM-DD HH:mm:ss")))])]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[t._v(t._s(t.$moment(e.row.regist_date).format("YYYY-MM-DD HH:mm:ss")))])])])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"floor_num",label:t.$t("姓名"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v("\n                      "+t._s(e.row.real_name)+"\n                    ")]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                      "+t._s(e.row.real_name)+"\n                    ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"floor_num",label:t.$t("录取号"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t._v("\n                      "+t._s(e.row.enroll_no)+"\n                    ")]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                      "+t._s(e.row.enroll_no)+"\n                    ")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:t.$t("性别"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("my-sex",{attrs:{sex:e.row.sex}})],1),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("my-sex",{attrs:{sex:e.row.sex}})],1)])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:t.$t("院系"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[e.row.college_name?l("label",[t._v(t._s(e.row.college_name))]):l("label",[t._v("--")])]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[e.row.college_name?l("label",[t._v(t._s(e.row.college_name))]):l("label",[t._v("--")])])])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:t.$t("专业"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[e.row.major_name?l("label",[t._v(t._s(e.row.major_name))]):l("label",[t._v("--")])]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[e.row.major_name?l("label",[t._v(t._s(e.row.major_name))]):l("label",[t._v("--")])])])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:t.$t("宿舍"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[e.row.room_no?l("label",[t._v("\n                        "+t._s(e.row.build_name)+t._s(e.row.floor_num)+t._s(t.$t("层"))+t._s(e.row.room_no)+"\n                      ")]):l("label",[t._v("--")])]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[e.row.room_no?l("label",[t._v("\n                        "+t._s(e.row.build_name)+t._s(e.row.floor_num)+t._s(t.$t("层"))+t._s(e.row.room_no)+"\n                      ")]):l("label",[t._v("--")])])])]}}])})],1)],1)])]),t._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("div",{staticClass:"text-right padding-lr-10"},[l("my-pagination",{staticClass:"layout-pagination",attrs:{total:t.totalStudent,"current-page":t.pageStudent,"page-size":t.numStudent},on:{currentPage:t.currentStudentPage,sizeChange:t.sizeStudentChange,jumpChange:t.jumpStudentPage}})],1)])]),t._v(" "),l("drawer-layout-right",{attrs:{tabindex:"0",visible:t.dialogPackage,size:"700px",title:t.$t("套餐详细")},on:{changeDrawer:t.closeDrawDialog,"right-close":t.cancelDrawDialog}},[l("div",{attrs:{slot:"title"},slot:"title"},[l("div",{staticClass:"header-block padding-lr-10"},[l("el-row",[l("el-col",{attrs:{span:24}},[l("span",{staticClass:"tab-class font-bold"},[l("i",{staticClass:"fa fa-file"}),t._v("\n                "+t._s(t.$t("套餐详细"))+"\n              ")])])],1)],1)]),t._v(" "),l("div",{staticClass:"color-muted",attrs:{slot:"content"},slot:"content"},[l("div",[l("div",[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableDormLoading,expression:"tableDormLoading"}],ref:"tableDormRef",staticClass:"margin-top-10",attrs:{data:t.tablePackagedata,size:"mini"}},[l("el-table-column",{attrs:{prop:"floor_num",label:t.$t("套餐名称"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[t._v(t._s(e.row.pacName))])]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[t._v(t._s(e.row.pacName))])])])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:t.$t("套餐价格"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[t._v(t._s(e.row.pacPrice))])]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[t._v(t._s(e.row.pacPrice))])])])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:t.$t("套餐总量"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[t._v(t._s(e.row.pacNum))])]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[t._v(t._s(e.row.pacNum))])])])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:t.$t("剩余总数"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[t._v(t._s(e.row.pacNum-e.row.pacNumChose))])]),t._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[t._v(t._s(e.row.pacNum-e.row.pacNumChose))])])])]}}])})],1)],1)])])]),t._v(" "),l("my-normal-dialog",{attrs:{visible:t.visibleConfim,loading:t.dialogLoading,title:"提示",detail:t.subTitle,content:"确认需要删除该信息？"},on:{"update:visible":function(e){t.visibleConfim=e},"ok-click":t.handleOkChange,"cancel-click":t.handleCancelChange,close:t.closeDialog}})],1)}),[],!1,null,"2f3883b0",null);e.default=component.exports;installComponents(component,{MyPagination:l(234).default,LayoutTb:l(1261).default,MySelect:l(1256).default,UploadSquare:l(238).default,DialogNormal:l(235).default,MyCascader:l(1265).default,DrawerLayoutRight:l(236).default,MyInputButton:l(1257).default,MySex:l(1270).default,MyNormalDialog:l(1260).default})}}]);