(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{1431:function(t,e,n){var content=n(1770);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(31).default)("8835c5b0",content,!0,{sourceMap:!1})},1769:function(t,e,n){"use strict";var l=n(1431);n.n(l).a},1770:function(t,e,n){(e=n(30)(!1)).push([t.i,".container[data-v-a5c0ee42]{padding:10px 15px}",""]),t.exports=e},2063:function(t,e,n){"use strict";n.r(e);var l=n(234),r=n(76),o=n(7),c=n(6),d=n(1261),_=n(1256),v=n(1273),h=n(1258),m=n(1257),f=n(1300),y=n(235),w=n(236),$=n(1294),C=n(239),T={mixins:[r.a,f.a],components:{MyPagination:l.default,LayoutTb:d.default,MySelect:_.default,MyUserType:v.default,MyDatePicker:h.default,MyInputButton:m.default,DialogNormal:y.default,DrawerLayoutRight:w.default,AuditStatusButton:$.default,AuditButton:C.default},data:function(){return{tableData:[],searchDate:[],typeList:[],searchKey:"",visible:!1,modalVisible:!1,dialogLoading:!1,visibleConfim:!1,drawerVisible:!1,clearTime:"",action:"",subTitle:"",dataAudit:{},status:"",auditObjectItem:{},msgType:"",form:{id:"",name:"",type:""}}},created:function(){this.init()},methods:{init:function(){var t=this,e={page:this.page,num:this.num,applyTypeCode:"TeacherLeaveApply",applyTimeBegin:this.searchDate?this.searchDate[0]:"",applyTimeEnd:this.searchDate?this.searchDate[1]:"",status:this.status,searchKey:this.searchKey};this.$axios.get(o.a.audit_page,{params:e}).then((function(e){e.data.data&&(t.tableData=e.data.data.list,t.total=e.data.data.totalCount,t.num=e.data.data.num,t.page=e.data.data.currentPage)}))},addInfo:function(){this.modalVisible=!0},detailInfo:function(t){var e=this,n={id:(t.id,t.id)};this.auditObjectItem=t,this.$axios.get(o.a.msg_detail_center,{params:n}).then((function(t){200==t.data.code?(e.dataAudit=t.data.data,e.drawerVisible=!0):Object(c.c)(t.data.desc)}))},search:function(data){this.searchKey=data.input,this.page=1,this.init()},sizeChange:function(t){this.page=1,this.num=t,this.init()},currentPage:function(t){this.page=t,this.init()},jumpPage:function(data){this.page=data,this.init()},closeDrawerDialog:function(t){this.auditObjectItem={},this.drawerVisible=t},cancelDrawDialog:function(){this.drawerVisible=!1},handleClick:function(data){this.page=1,this.status=data,this.init()},handleChange:function(data){this.searchDate=data},handleOk:function(data,textarea){var t=this,e={applyId:(this.auditObjectItem.id,this.auditObjectItem.id),status:1,des2:textarea};e=this.$qs.stringify(e),this.$axios.post(o.a.msg_handle,e).then((function(e){200==e.data.code?(t.detailInfo(t.auditObjectItem),t.init(),Object(c.b)(e.data.desc)):Object(c.c)(e.data.desc)}))},handleNo:function(data,textarea){var t=this,e={applyId:(this.auditObjectItem.id,this.auditObjectItem.id),status:2,des2:textarea};e=this.$qs.stringify(e),this.$axios.post(o.a.msg_handle,e).then((function(e){200==e.data.code?(t.detailInfo(t.auditObjectItem),t.init(),Object(c.b)(e.data.desc)):Object(c.c)(e.data.desc)}))},handleCancel:function(data){var t=this,e={applyId:(this.auditObjectItem.id,this.auditObjectItem.id),status:-1};e=this.$qs.stringify(e),this.$axios.post(o.a.msg_handle,e).then((function(e){200==e.data.code?(t.detailInfo(t.auditObjectItem),t.init(),Object(c.b)(e.data.desc)):Object(c.c)(e.data.desc)}))}}},A=(n(1769),n(10)),component=Object(A.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("layout-tb",[n("template",{slot:"tag"},[t._v("请假审批")]),t._v(" "),n("div",{attrs:{slot:"tab"},slot:"tab"},[n("el-row",[n("el-col",{attrs:{span:12}},[n("audit-status-button",{attrs:{size:"small"},on:{click:t.handleClick}})],1),t._v(" "),n("el-col",{staticClass:"text-right",attrs:{span:12}},[n("my-date-picker",{staticStyle:{position:"relative",top:"1px"},attrs:{"sel-value":t.searchDate,clearable:!0,type:"daterange",size:"small","width-style":"240"},on:{change:t.handleChange}}),t._v(" "),n("my-input-button",{attrs:{size:"small",clearable:!0,type:"success",plain:""},on:{click:t.search}})],1)],1)],1),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("el-table",{ref:"refTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-class-name":"custom-table-cell-bg",size:"medium","row-key":"id","max-height":t.tableHeight.height}},[n("el-table-column",{attrs:{align:"center",label:t.$t("时间")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[n("div",{staticClass:"text-center"},[t._v(t._s(t.$moment(e.row.apply_time).format("YYYY-MM-DD")))]),t._v(" "),n("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                "+t._s(t.$moment(e.row.apply_time).format("YYYY-MM-DD"))+"\n              ")])])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("申请人")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[n("div",{staticClass:"text-center"},[t._v(t._s(e.row.real_name))]),t._v(" "),n("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                "+t._s(e.row.real_name)+"\n              ")])])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("部门")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[n("div",{staticClass:"text-center"},[t._v(t._s(e.row.department_name))]),t._v(" "),n("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                "+t._s(e.row.department_name)+"\n              ")])])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("考勤类型")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[n("div",{staticClass:"text-center"},[t._v(t._s(t.$t("行政考勤")))]),t._v(" "),n("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                "+t._s(t.$t("行政考勤"))+"\n              ")])])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("申请类型")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[n("div",{staticClass:"text-center"},["TeacherLeaveApply"==e.row.apply_type_code?n("span",[t._v(t._s(t.$t("请假")))]):t._e(),t._v(" "),"TeacherBusiTripApply"==e.row.apply_type_code?n("span",[t._v(t._s(t.$t("出差")))]):t._e(),t._v(" "),"TeacherAmendSignApply"==e.row.apply_type_code?n("span",[t._v(t._s(t.$t("补卡")))]):t._e()]),t._v(" "),n("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},["TeacherLeaveApply"==e.row.apply_type_code?n("span",[t._v(t._s(t.$t("请假")))]):t._e(),t._v(" "),"TeacherBusiTripApply"==e.row.apply_type_code?n("span",[t._v(t._s(t.$t("出差")))]):t._e(),t._v(" "),"TeacherAmendSignApply"==e.row.apply_type_code?n("span",[t._v(t._s(t.$t("补卡")))]):t._e()])])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("时长")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[n("div",{staticClass:"text-center"},["TeacherLeaveApply"==e.row.apply_type_code?n("div",["TeacherLeaveApplyClass"==e.row.apply_type_sub_code?n("div",t._l(JSON.parse(e.row.str3),(function(e,l){return n("div",{key:l},[n("span",[t._v(t._s(t.$t("第")))]),t._v(" "),n("span",[t._v(t._s(e.section))]),t._v(" "),n("span",[t._v(t._s(t.$t("节课")))])])})),0):t._e(),t._v(" "),"TeacherLeaveApplyTime"==e.row.apply_type_sub_code?n("div",[n("div",[n("span",[t._v(t._s(t.$t("开始时间"))+":"+t._s(t.$moment(e.row.date1).format("YYYY-MM-DD")))])]),t._v(" "),n("div",[n("span",[t._v(t._s(t.$t("结束时间"))+":"+t._s(t.$moment(e.row.date2).format("YYYY-MM-DD")))])])]):t._e()]):t._e()]),t._v(" "),n("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},["TeacherBusiTripApply"==e.row.apply_type_code?n("span",[t._v(t._s(e.row.double1)+t._s(t.$t("天")))]):t._e(),t._v(" "),"TeacherLeaveApply"==e.row.apply_type_code?n("div",["TeacherLeaveApplyClass"==e.row.apply_type_sub_code?n("span",[null!=e.row.str3?n("label",[t._v("\n                      "+t._s(e.row.num1)+"\n                      "+t._s(t.$t("节课"))+"\n                    ")]):t._e(),t._v(" "),null==e.row.str3?n("label",[t._v("\n                      "+t._s(e.row.num1)+"\n                      "+t._s(t.$t("节课"))+"\n                    ")]):t._e()]):t._e(),t._v(" "),"TeacherLeaveApplyTime"==e.row.apply_type_sub_code?n("span",[t._v("\n                    "+t._s(e.row.double1)+"\n                    "+t._s(t.$t("天"))+"\n                  ")]):t._e(),t._v(" "),n("span",[n("i",{staticClass:"fa fa-info-circle"})])]):t._e()])])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("累计")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[n("div",{staticClass:"text-center"},["TeacherLeaveApply"==e.row.apply_type_code?n("span",[t._v(t._s(e.row.time_length)+t._s(t.$t("天")))]):t._e(),t._v(" "),"TeacherBusiTripApply"==e.row.apply_type_code?n("span",[t._v(t._s(e.row.time_length)+t._s(t.$t("天")))]):t._e(),t._v(" "),"TeacherAmendSignApply"==e.row.apply_type_code?n("span",[e.row.amend_sign_times?n("label",[t._v(t._s(e.row.amend_sign_times))]):n("label",[t._v("0")]),t._v("\n                  "+t._s(t.$t("次"))+"\n                ")]):t._e()]),t._v(" "),n("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},["TeacherLeaveApply"==e.row.apply_type_code?n("span",[t._v(t._s(e.row.time_length)+t._s(t.$t("天")))]):t._e(),t._v(" "),"TeacherBusiTripApply"==e.row.apply_type_code?n("span",[t._v(t._s(e.row.time_length)+t._s(t.$t("天")))]):t._e(),t._v(" "),"TeacherAmendSignApply"==e.row.apply_type_code?n("span",[e.row.amend_sign_times?n("label",[t._v(t._s(e.row.amend_sign_times))]):n("label",[t._v("0")]),t._v("\n                  "+t._s(t.$t("次"))+"\n                ")]):t._e()])])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"level_name",label:t.$t("状态/审核人")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[n("div",{staticClass:"text-center"},[n("my-audit-status",{attrs:{status:e.row.status,handler:e.row.handler_name}})],1),t._v(" "),n("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[n("my-audit-status",{attrs:{status:e.row.status,handler:e.row.handler_name}})],1)])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"fa fa-cog color-danger",on:{click:function(n){return t.detailInfo(e.row)}}})]}}])})],1),t._v(" "),n("div",{staticClass:"layout-right-footer text-right"},[n("my-pagination",{staticClass:"layout-pagination",attrs:{total:t.total,"current-page":t.page,"page-size":t.num},on:{currentPage:t.currentPage,sizeChange:t.sizeChange,jumpChange:t.jumpPage}})],1)],1)],2),t._v(" "),n("drawer-layout-right",{attrs:{"hide-footer":!1,visible:t.drawerVisible,size:"550px",title:t.$t("申请单")},on:{changeDrawer:t.closeDrawerDialog,"right-close":t.cancelDrawDialog}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("my-audit-detail",{attrs:{type:"TeacherLeaveApply","sel-value":t.dataAudit}})],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("audit-button",{attrs:{"sel-value":t.dataAudit},on:{ok:t.handleOk,no:t.handleNo,cancel:t.handleCancel}})],1)])],1)}),[],!1,null,"a5c0ee42",null);e.default=component.exports;installComponents(component,{AuditStatusButton:n(1294).default,MyDatePicker:n(1258).default,MyInputButton:n(1257).default,MyAuditStatus:n(1284).default,MyPagination:n(234).default,LayoutTb:n(1261).default,MyAuditDetail:n(240).default,AuditButton:n(239).default,DrawerLayoutRight:n(236).default})}}]);