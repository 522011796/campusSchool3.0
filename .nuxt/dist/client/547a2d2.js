(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1256:function(t,e,o){"use strict";o.r(e);o(179);var n=o(6),r={name:"mySelect",props:{placeholder:{default:"",type:String},selValue:{default:"",type:[String,Number,Boolean]},options:{default:function(){return[]},type:Array},size:{defalult:"medium",validate:function(t){return Object(n.D)(t,["large","medium","small","mini"])}},clearable:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean},filterable:{default:!1,type:Boolean},remote:{default:!1,type:Boolean},loading:{default:!1,type:Boolean},group:{default:!1,type:Boolean},remoteMethod:{default:function(data){return data},type:Function},widthStyle:{default:"",type:[String,Number]}},computed:{selectModel:function(){this.value=this.selValue},setPlaceholder:function(){this.selectPlaceholder=this.placeholder?this.placeholder:this.$t("请选择")},setWidth:function(){this.widthStyle&&(this.width={width:this.widthStyle+"px"})}},data:function(){return{selectPlaceholder:"",value:"",width:""}},methods:{handleChange:function(data){this.$emit("change",data)}}},l=o(10),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-select",t._b({style:t.width,attrs:{setPlaceholder:t.setPlaceholder,placeholder:t.selectPlaceholder,size:t.size,clearable:t.clearable,disabled:t.disabled,filterable:t.filterable,loading:t.loading,remote:t.remote,"remote-method":t.remoteMethod,setWidth:t.setWidth},on:{change:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},"el-select",t.selectModel,!1),[0==t.group?t._l(t.options,(function(t,e){return o("el-option",{key:e,attrs:{label:t.label,value:t.value,disabled:t.disabled}})})):t._e(),t._v(" "),1==t.group?t._l(t.options,(function(e){return o("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})):t._e()],2)],1)}),[],!1,null,null,null);e.default=component.exports},1259:function(t,e,o){var content=o(1267);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(31).default)("ca81b0e2",content,!0,{sourceMap:!1})},1262:function(t,e,o){"use strict";o.r(e);o(135),o(105),o(179),o(53);var n=o(9),r=o(6),l={name:"myElTree",mixins:[o(76).a],components:{},props:{selValue:{default:!1,type:[Boolean,Array,Number,String]},size:{defalult:"small",validate:function(t){return Object(r.D)(t,["large","medium","small","mini"])}},defaultCheckedKeys:{default:function(){return[]},type:Array},defaultExpandedKeys:{default:function(){return[]},type:Array},currentNodeKey:{default:"",type:[String,Number]},width:{default:"",type:[String,Number]},iconExtra:{default:"",type:String},iconPrefix:{default:"",type:String},showCheckbox:{default:!1,type:Boolean},opr:{default:!1,type:Boolean},type:{default:"",type:String},subType:{default:"1",type:String},extraType:{default:"",type:String},showCampus:{default:!0,type:Boolean}},computed:{selectModel:function(){this.dataCollege=this.setData(this.data)},setClass:function(){return[]}},data:function(){return{data:[],filterText:"",slotDefault:!1,slotTop:!1,nodeTreeCurrentId:"7",selectCampusAll:!0}},mounted:function(){this.slotDefault=void 0!==this.$slots.middle,this.slotTop=void 0!==this.$slots.top},created:function(){this.initInfo()},methods:{initInfo:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSessionInfo();case 2:if(1!=t.type){e.next=8;break}return e.next=5,t.getCollegeInfo(t.subType);case 5:t.data=t.dataCollege,e.next=60;break;case 8:if(2!=t.type){e.next=14;break}return e.next=11,t.getDormBuildInfo(t.subType);case 11:t.data=t.dataDormBuild,e.next=60;break;case 14:if(3!=t.type){e.next=20;break}return e.next=17,t.getSchoolBuildInfo(t.subType);case 17:t.data=t.dataSchoolBuild,e.next=60;break;case 20:if(4!=t.type){e.next=26;break}return e.next=23,t.getDeptInfo(t.subType);case 23:t.data=t.dataDept,e.next=60;break;case 26:if(100!=t.type){e.next=32;break}return e.next=29,t.getAppletInfo(t.extraType);case 29:t.data=t.dataApplet,e.next=60;break;case 32:if(110!=t.type){e.next=40;break}return e.next=35,t.getAppletServerInfo(t.extraType);case 35:t.data=t.dataAppletServer,t.selectCampusAll=!1,t.$nextTick((function(){t.$refs.tree&&t.$refs.tree.setCurrentKey(t.currentNodeKey)})),e.next=60;break;case 40:if(111!=t.type){e.next=46;break}return e.next=43,t.getAppletServerInfo(t.extraType);case 43:t.data=t.dataAppletServer,e.next=60;break;case 46:if(120!=t.type){e.next=54;break}return e.next=49,t.getLinkProcessInfo();case 49:t.data=t.dataProcessServer,t.selectCampusAll=!1,t.$nextTick((function(){t.$refs.tree&&t.$refs.tree.setCurrentKey(t.currentNodeKey)})),e.next=60;break;case 54:if(121!=t.type){e.next=60;break}return e.next=57,t.getLinkProcessLinkInfo(t.subType);case 57:t.data=t.dataProcessLinkServer,t.selectCampusAll=!1,t.$nextTick((function(){t.$refs.tree&&t.$refs.tree.setCurrentKey(t.currentNodeKey)}));case 60:case"end":return e.stop()}}),e)})))()},filterNode:function(t,data){return!t||-1!==data.label.indexOf(t)},handleNodeClick:function(data){this.selectCampusAll=!1,this.$emit("node-click",data)},handleCheckChange:function(data,t,e){this.$emit("check-change",data,t,e)},nodeClickCampusAll:function(data){this.selectCampusAll=!0,this.$emit("all-click",data)}},watch:{filterText:function(t){this.$refs.tree.filter(t)},type:function(t){this.initInfo()},subType:function(t){this.initInfo()}}},c=(o(1266),o(10)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.slotTop?o("div",{staticClass:"padding-tb-5 padding-lr-10"},[t._t("top")],2):t._e(),t._v(" "),o("div",{staticClass:"padding-tb-5 padding-lr-10"},[o("el-input",{attrs:{size:"medium",placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),t._v(" "),t.slotDefault?o("div",{staticClass:"padding-tb-5 padding-lr-10"},[t._t("middle")],2):t._e(),t._v(" "),o("div",{staticClass:"tree-container custom-el-tree margin-top-5"},[t.showCampus?o("el-tooltip",{attrs:{effect:"dark",content:t.campusName,placement:"top"}},[o("div",{staticClass:"moon-content-text-ellipsis-class",class:1==t.selectCampusAll?"tree-el-tree-all":"tree-el-tree-all-no",on:{click:t.nodeClickCampusAll}},[t._v("\n        "+t._s(t.campusName)+"\n      ")])]):t._e(),t._v(" "),o("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:t.data,"show-checkbox":t.showCheckbox,"filter-node-method":t.filterNode,"default-checked-keys":t.defaultCheckedKeys,"default-expanded-keys":t.defaultExpandedKeys,currentNodeKey:t.currentNodeKey,"node-key":"id","highlight-current":1!=t.selectCampusAll},on:{"node-click":t.handleNodeClick,"check-change":t.handleCheckChange}})],1)])}),[],!1,null,"3c5e5d0c",null);e.default=component.exports},1264:function(t,e,o){"use strict";o.r(e);var n={name:"LayoutLr"},r=o(10),component=Object(r.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"layout-left-menu animated fadeInLeft"},[this._t("left")],2),this._v(" "),e("div",{staticClass:"layout-right-menu"},[this._t("right")],2)])}),[],!1,null,"42aaf4c3",null);e.default=component.exports},1266:function(t,e,o){"use strict";var n=o(1259);o.n(n).a},1267:function(t,e,o){(e=o(30)(!1)).push([t.i,".tree-el-tree-all[data-v-3c5e5d0c]{background:#f0f7ff}.tree-el-tree-all[data-v-3c5e5d0c],.tree-el-tree-all-no[data-v-3c5e5d0c]{height:25px;line-height:25px;padding:3px 10px;text-align:left;font-size:14px;color:#606266}",""]),t.exports=e},1292:function(t,e,o){var n=o(180),r=o(35),l=o(36),c=o(37).f,d=o(241),m=o(1302),f=d("meta"),h=0,v=Object.isExtensible||function(){return!0},_=function(t){c(t,f,{value:{objectID:"O"+ ++h,weakData:{}}})},meta=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!l(t,f)){if(!v(t))return"F";if(!e)return"E";_(t)}return t[f].objectID},getWeakData:function(t,e){if(!l(t,f)){if(!v(t))return!0;if(!e)return!1;_(t)}return t[f].weakData},onFreeze:function(t){return m&&meta.REQUIRED&&v(t)&&!l(t,f)&&_(t),t}};n[f]=!0},1299:function(t,e,o){var content=o(1323);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(31).default)("6c30d5b0",content,!0,{sourceMap:!1})},1301:function(t,e,o){"use strict";var n=o(15),r=o(21),l=o(181),c=o(49),d=o(1292),m=o(712),f=o(711),h=o(35),v=o(20),_=o(361),C=o(183),w=o(364);t.exports=function(t,e,o){var y=-1!==t.indexOf("Map"),x=-1!==t.indexOf("Weak"),k=y?"set":"add",$=r[t],S=$&&$.prototype,D=$,T={},I=function(t){var e=S[t];c(S,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(x&&!h(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return x&&!h(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(x&&!h(t))&&e.call(this,0===t?0:t)}:function(t,o){return e.call(this,0===t?0:t,o),this})};if(l(t,"function"!=typeof $||!(x||S.forEach&&!v((function(){(new $).entries().next()})))))D=o.getConstructor(e,t,y,k),d.REQUIRED=!0;else if(l(t,!0)){var L=new D,z=L[k](x?{}:-0,1)!=L,O=v((function(){L.has(1)})),R=_((function(t){new $(t)})),A=!x&&v((function(){for(var t=new $,e=5;e--;)t[k](e,e);return!t.has(-0)}));R||((D=e((function(e,o){f(e,D,t);var n=w(new $,e,D);return null!=o&&m(o,n[k],n,y),n}))).prototype=S,S.constructor=D),(O||A)&&(I("delete"),I("has"),y&&I("get")),(A||z)&&I(k),x&&S.clear&&delete S.clear}return T[t]=D,n({global:!0,forced:D!=$},T),C(D,t),x||o.setStrong(D,t,y),D}},1302:function(t,e,o){var n=o(20);t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},1303:function(t,e,o){"use strict";var n=o(37).f,r=o(182),l=o(713),c=o(184),d=o(711),m=o(712),f=o(362),h=o(363),v=o(32),_=o(1292).fastKey,C=o(111),w=C.set,y=C.getterFor;t.exports={getConstructor:function(t,e,o,f){var h=t((function(t,n){d(t,h,e),w(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),v||(t.size=0),null!=n&&m(n,t[f],t,o)})),C=y(e),x=function(t,e,o){var n,r,l=C(t),c=k(t,e);return c?c.value=o:(l.last=c={index:r=_(e,!0),key:e,value:o,previous:n=l.last,next:void 0,removed:!1},l.first||(l.first=c),n&&(n.next=c),v?l.size++:t.size++,"F"!==r&&(l.index[r]=c)),t},k=function(t,e){var o,n=C(t),r=_(e);if("F"!==r)return n.index[r];for(o=n.first;o;o=o.next)if(o.key==e)return o};return l(h.prototype,{clear:function(){for(var t=C(this),data=t.index,e=t.first;e;)e.removed=!0,e.previous&&(e.previous=e.previous.next=void 0),delete data[e.index],e=e.next;t.first=t.last=void 0,v?t.size=0:this.size=0},delete:function(t){var e=C(this),o=k(this,t);if(o){var n=o.next,r=o.previous;delete e.index[o.index],o.removed=!0,r&&(r.next=n),n&&(n.previous=r),e.first==o&&(e.first=n),e.last==o&&(e.last=r),v?e.size--:this.size--}return!!o},forEach:function(t){for(var e,o=C(this),n=c(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:o.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!k(this,t)}}),l(h.prototype,o?{get:function(t){var e=k(this,t);return e&&e.value},set:function(t,e){return x(this,0===t?0:t,e)}}:{add:function(t){return x(this,t=0===t?0:t,t)}}),v&&n(h.prototype,"size",{get:function(){return C(this).size}}),h},setStrong:function(t,e,o){var n=e+" Iterator",r=y(e),l=y(n);f(t,e,(function(t,e){w(this,{type:n,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=l(this),e=t.kind,o=t.last;o&&o.removed;)o=o.previous;return t.target&&(t.last=o=o?o.next:t.state.first)?"keys"==e?{value:o.key,done:!1}:"values"==e?{value:o.value,done:!1}:{value:[o.key,o.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),o?"entries":"values",!o,!0),h(e)}}},1304:function(t,e,o){"use strict";o.r(e);o(179);var n={name:"myEnable",props:{status:{default:"",type:[String,Number,Boolean]}},computed:{},data:function(){return{value:""}},methods:{}},r=o(10),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",[1==t.status?o("label",{staticClass:"color-success"},[t._v(t._s(t.$t("启用")))]):t._e(),t._v(" "),0==t.status?o("label",{staticClass:"color-danger"},[t._v(t._s(t.$t("禁用")))]):t._e()])}),[],!1,null,null,null);e.default=component.exports},1308:function(t,e,o){"use strict";var n=o(1301),r=o(1303);t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},1309:function(t,e,o){"use strict";o(86);e.a={data:function(){return{rules:{name:[{required:!0,message:this.$t("请输入名称"),trigger:"blur"}]}}}}},1311:function(t,e,o){"use strict";o.r(e);o(237),o(709),o(179);var n,r=o(104),l=o(1265),c=o(7),d=o(1269),m=o(1257),f=o(6),h={name:"studentTreeAndListNoPage",components:(n={MyRadio:d.default,MyCascader:l.default},Object(r.a)(n,"MyRadio",d.default),Object(r.a)(n,"MyInputButton",m.default),n),props:{selValue:{default:"",type:[String,Array]},selArr:{default:function(){return[]},type:Array},setType:{default:"radio",type:[String,Number]},userType:{default:"",type:String},groupId:{default:"",type:[String,Number]},maxHeight:{default:"300",type:[String,Number]}},computed:{_selValue:function(){this.commSelUserVal=this.selValue},_selArr:function(){}},data:function(){return{commAllCheck:!1,commAllCheckCount:0,value:"",commPage:1,commNum:20,commTotalTotal:0,tableTeacherCommData:[],searchCommDeptData:[],commSex:"",commSearchKey:"",commSearchDept:"",commSearchCollege:"",commSearchMajor:"",commSearchGrade:"",commSearchClass:"",commSelUserVal:"",commSelUserArr:[],commSelUserNameArr:[],commSelUserTempArr:[],commSelUserValObj:{},commSelUserValArr:[],commLoading:!1,commFlag:!1,commMultipleSelection:[],commRow:"",commGetRowKeys:function(t){return t.user_id}}},created:function(){},methods:{_initTeacher:function(){var t=this;this.checkboxCount=0;var e={page:this.commPage,num:this.commNum,deleted:0,sex:this.commSex.sex,collegeId:this.commSearchCollege,majorId:this.commSearchMajor,grade:this.commSearchGrade,clasz:this.commSearchClass,groupId:this.groupId};this.commLoading=!0,e.realName=this.commSearchKey.input,this.$axios.get(c.a.dormaccess_student_select_status_page,{params:e}).then((function(e){if(e.data.data){for(var i=0;i<e.data.data.list.length;i++){Object(f.u)(e.data.data.list[i],t.commSelUserArr,"user_id")>-1?(t.commFlag=!0,e.data.data.list[i]._checked=!0,t.checkboxCount++):e.data.data.list[i]._checked=!1}0!=t.checkboxCount&&t.checkboxCount==t.tableTeacherCommData.length?t.commAllCheck=!0:t.commAllCheck=!1,t.commFlag=!1,t.tableTeacherCommData=e.data.data.list,t.commTotalTotal=e.data.data.totalCount,t.commNum=e.data.data.num,t.commPage=e.data.data.currentPage}t.commLoading=!1}))},_handleOpen:function(t){this.commPage=1,this.commNum=20,this.commSex=t||"",this.commSelUserArr=this.selArr,this._initTeacher()},_handleChange:function(data,t){this.commSelUserVal=data.user_id,this.commSelUserValObj=data,this.$emit("change",data)},_handleCascaderChange:function(data){this.commSearchCollege="",this.commSearchMajor="",this.commSearchGrade="",this.commSearchClass="",1==data.length?this.commSearchCollege=data[0]:2==data.length?(this.commSearchCollege=data[0],this.commSearchMajor=data[1]):3==data.length?(this.commSearchCollege=data[0],this.commSearchMajor=data[1],this.commSearchGrade=data[2]):4==data.length&&(this.commSearchCollege=data[0],this.commSearchMajor=data[1],this.commSearchGrade=data[2],this.commSearchClass=data[3]),this.commPage=1,this._initTeacher()},_handleSelectionSelect:function(t,e){if(t)this.commSelUserArr.push(e),e._checked=!0,this.checkboxCount++;else{var o=Object(f.u)(e,this.commSelUserArr,"user_id");this.commSelUserArr.splice(o,1),e._checked=!1,this.checkboxCount--}0!=this.checkboxCount&&this.checkboxCount==this.tableTeacherCommData.length?this.commAllCheck=!0:this.commAllCheck=!1,this.$emit("select",this.commSelUserArr)},_handleSelectionAllSelect:function(t){this.commAllCheck=t;for(var i=0;i<this.tableTeacherCommData.length;i++)if(1==t){this.tableTeacherCommData[i]._checked=!0,-1==Object(f.u)(this.tableTeacherCommData[i],this.commSelUserArr,"user_id")&&this.commSelUserArr.push(this.tableTeacherCommData[i]),this.checkboxCount++}else{var e=Object(f.u)(this.tableTeacherCommData[i],this.commSelUserArr,"user_id");this.commSelUserArr.splice(e,1),this.tableTeacherCommData[i]._checked=!1,this.checkboxCount--}this.$emit("select",this.commSelUserArr)},_handleSelectionChange:function(data){},_handleSizeChange:function(data){this.commPage=1,this.commNum=data,this._initTeacher()},_handleCurrentChange:function(data){this.commPage=data,this._initTeacher()},_handleResetChange:function(){this.value="",this.commNum=20,this.commPage=1,this.searchCommDeptData=[],this.commSearchKey="",this.commSearchDept="",this.commSelUserVal="",this.commSelUserValObj={},this.commSelUserValArr=[],this.commSelUserArr=[],this.$refs.SelectorDept&&this.$refs.SelectorDept.$refs.cascaderSelector&&this.$refs.SelectorDept.$refs.cascaderSelector.$refs.panel.calculateCheckedNodePaths(),this.$refs.SelectorDept&&this.$refs.SelectorDept.$refs.cascaderSelector&&this.$refs.SelectorDept.$refs.cascaderSelector.$refs.panel.calculateCheckedNodePaths()},_handleSelect:function(){this.commFlag=!0;for(var t=[],e=[].concat(this.tableTeacherCommData),o=[].concat(this.selArr),i=0;i<e.length;i++){Object(f.u)(e[i],o,"user_id")>-1&&(t.push(e[i]),this.$refs.commTableRef.toggleRowSelection(e[i],!0))}this.commSelUserTempArr=t,this.commFlag=!1},_handleSearch:function(data){this.commSearchKey=data,this.commPage=1,this._initTeacher()},_getSelectData:function(){this.$emit("select",this.commSelUserArr)},_selectBedno:function(t){var e=this,o={bedNo:this.commSex.bedNo,dromId:this.commSex.dormId,studentId:t.user_id,majorClassId:t.clasz};o=this.$qs.stringify(o),this.$axios.post(c.a.dorm_user_class_bed_distribute,o).then((function(t){t.data.data?(e._initTeacher(),Object(f.b)(t.data.desc),e.$emit("distribute",t.data.data)):Object(f.c)(t.data.desc)}))}}},v=o(10),component=Object(v.a)(h,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"commTeacherList"},[o("div",{staticClass:"layout-inline"},[o("my-cascader",{ref:"SelectorDept",staticClass:"layout-item",attrs:{size:"small","width-style":"160","sel-value":t.searchCommDeptData,type:"1","sub-type":"4"},on:{change:function(e){return t._handleCascaderChange(e)}}}),t._v(" "),o("my-input-button",{staticClass:"layout-item",attrs:{size:"small",clearable:!0,type:"success",plain:""},on:{click:t._handleSearch}})],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.commLoading,expression:"commLoading"}],ref:"commTableRef",attrs:{data:t.tableTeacherCommData,"max-height":t.maxHeight,size:"mini"}},["select"==t.setType?o("el-table-column",{attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.bed_no?o("a",{staticClass:"color-grand",attrs:{href:"javascript:;"},on:{click:function(o){return t._selectBedno(e.row)}}},[t._v(t._s(t.$t("分配")))]):o("label",{staticClass:"color-warning"},[t._v(t._s(t.$t("已分配")))])]}}],null,!1,3111910370)}):t._e(),t._v(" "),"check"==t.setType?o("el-table-column",{attrs:{align:"center",width:"55"},scopedSlots:t._u([{key:"header",fn:function(e){return[o("el-checkbox",{on:{change:t._handleSelectionAllSelect},model:{value:t.commAllCheck,callback:function(e){t.commAllCheck=e},expression:"commAllCheck"}})]}},{key:"default",fn:function(e){return[o("el-checkbox",{on:{change:function(o){return t._handleSelectionSelect(o,e.row)}},model:{value:e.row._checked,callback:function(o){t.$set(e.row,"_checked",o)},expression:"scope.row._checked"}})]}}],null,!1,1304403255)}):t._e(),t._v(" "),"radio"==t.setType?o("el-table-column",{attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("my-radio",t._b({attrs:{"sel-value":t.commSelUserVal,label:e.row.user_id},on:{change:function(o){return t._handleChange(e.row)}}},"my-radio",t._selValue,!1),[o("span")])]}}],null,!1,4043958644)}):t._e(),t._v(" "),o("el-table-column",{attrs:{property:"real_name",align:"center",label:"姓名"}}),t._v(" "),o("el-table-column",{attrs:{property:"student_id",align:"center",label:"学号"}}),t._v(" "),o("el-table-column",{attrs:{property:"",align:"center",label:"班级"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[t._v(t._s(e.row.class_name?e.row.class_name:"--"))]),t._v(" "),o("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n            "+t._s(e.row.class_name?e.row.class_name:"--")+"\n          ")])])]}}])})],1),t._v(" "),o("div",{staticClass:"text-right margin-top-10"},[o("el-pagination",{attrs:{"current-page":t.commPage,"page-sizes":[10,20,30,50,100],"page-size":t.commNum,layout:"total, sizes, prev, pager, next",total:t.commTotalTotal},on:{"size-change":t._handleSizeChange,"current-change":t._handleCurrentChange}})],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{MyCascader:o(1265).default,MyInputButton:o(1257).default,MyRadio:o(1269).default})},1316:function(t,e,o){"use strict";o.r(e);o(179);var n={name:"myFormAuditType",props:{itemIndex:{type:[Number,String],default:0},customUserStatus:{type:Boolean,default:!1}},computed:{},data:function(){return{popVisible:!1,value:""}},methods:{addPop:function(){this.popVisible=!0},selAuditType:function(t,e,o){this.popVisible=!1,this.$emit("click",e,o,parseInt(this.itemIndex))},showPop:function(){this.$emit("showPop")}}},r=(o(1322),o(10)),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-popover",{attrs:{placement:"right",width:"100",trigger:"hover"},on:{show:t.showPop},model:{value:t.popVisible,callback:function(e){t.popVisible=e},expression:"popVisible"}},[o("div",{staticClass:"font-size-12"},[o("div",{},[o("div",{staticClass:"color-muted"},[o("span",[t._v(t._s(t.$t("审批节点")))])]),t._v(" "),o("div",{staticClass:"margin-left-5"},[o("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,1,"audit")}}},[o("i",{staticClass:"fa fa-user"}),t._v(" "),o("span",[t._v(t._s(t.$t("固定人审批")))])]),t._v(" "),o("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,2,"audit")}}},[o("i",{staticClass:"fa fa-cog"}),t._v(" "),o("span",[t._v(t._s(t.$t("系统角色审批")))])]),t._v(" "),0==t.customUserStatus?o("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,3,"audit")}}},[o("i",{staticClass:"fa fa-flag"}),t._v(" "),o("span",[t._v(t._s(t.$t("发起人自选审批")))])]):t._e()])]),t._v(" "),o("div",{staticClass:"margin-top-5"},[o("div",{staticClass:"color-muted"},[o("span",[t._v(t._s(t.$t("抄送节点")))])]),t._v(" "),o("div",{staticClass:"margin-left-5"},[o("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,4,"send")}}},[o("i",{staticClass:"fa fa-user"}),t._v(" "),o("span",[t._v(t._s(t.$t("抄送给固定人")))])]),t._v(" "),o("div",{staticClass:"flow-item-child-block padding-tb-5",on:{click:function(e){return t.selAuditType(e,5,"send")}}},[o("i",{staticClass:"fa fa-cog"}),t._v(" "),o("span",[t._v(t._s(t.$t("抄送给系统角色")))])])])])]),t._v(" "),o("span",{staticClass:"flow-item-line-block",attrs:{slot:"reference"},slot:"reference"},[o("i",{staticClass:"fa fa-plus-circle color-muted",staticStyle:{"font-size":"25px"},on:{click:t.addPop}})])])],1)}),[],!1,null,"129ebc32",null);e.default=component.exports},1317:function(t,e,o){"use strict";o.d(e,"a",(function(){return l}));var n=o(242);var r=o(366);function l(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(r.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1322:function(t,e,o){"use strict";var n=o(1299);o.n(n).a},1323:function(t,e,o){(e=o(30)(!1)).push([t.i,'.flow-item-line-block[data-v-129ebc32]{position:relative}.flow-item-line-block[data-v-129ebc32]:after{top:-24px}.flow-item-line-block[data-v-129ebc32]:after,.flow-item-line-block[data-v-129ebc32]:before{content:"";width:1px;height:15px;position:absolute;left:10px;background:#dcdfe6}.flow-item-line-block[data-v-129ebc32]:before{top:19px}.flow-item-child-block[data-v-129ebc32]:hover{background:#eee}',""]),t.exports=e},1383:function(t,e,o){var content=o(1674);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(31).default)("58235c35",content,!0,{sourceMap:!1})},1384:function(t,e,o){var content=o(1676);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(31).default)("9c60826e",content,!0,{sourceMap:!1})},1385:function(t,e,o){var content=o(1678);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(31).default)("2d7aa22d",content,!0,{sourceMap:!1})},1386:function(t,e,o){var content=o(1680);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(31).default)("e8d85618",content,!0,{sourceMap:!1})},1387:function(t,e,o){var content=o(1682);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(31).default)("277ef63d",content,!0,{sourceMap:!1})},1540:function(t,e,o){"use strict";o.r(e);o(105),o(360),o(709),o(65),o(106),o(710);var n=o(76),r=o(1559),l=o(7),c=(o(86),o(6)),d=o(1560),m=o(1256),f={name:"myFormSet",components:{DialogNormal:o(235).default,MySelect:m.default,MyFormSetNotice:d.default,MyFormSetRole:r.default},mixins:[n.a,{data:function(){return{rules:{name:[{required:!0,message:this.$t("请输入名称"),trigger:"blur"}]}}}},{data:function(){return{rulesRule:{name:[{required:!0,message:this.$t("请输入名称"),trigger:"blur"}],result:[{required:!0,message:this.$t("请选择信息"),trigger:"change"}]}}}}],props:{formId:Object},computed:{},data:function(){return{activeSetMenu:1,roleTableData:[],noticeTableData:[],ruleList:[],conditionalList:[{label:this.$t("所有"),value:!0,text:this.$t("所有")},{label:this.$t("任一"),value:!1,text:this.$t("任一")}],conditionalItemList1:[],conditionalItemList2:[],conditionalItemList3:[],resultList:[],conditionalChildList:[],flowList:[],roleList:[],btnLoading:!1,btnDialogLoading:!1,dialogRule:!1,formContent:"",formBasic:{name:"",title:!0,subRule:!1,subBtn:!0,subBtnText:"提交",rules:[],flow:"",role:[]},formRule:{id:"",name:"",conditional:!0,conditional1:"",conditional2:"",conditional3:"",conditionalList:[],result:""}}},created:function(){this.initBasicInfo(),this.initFlow(),this.initRole()},methods:{initBasicInfo:function(){this.formBasic={name:this.formId.form_name,title:!0,subRule:this.formId.submit_only,subBtn:this.formId.submit_button,subBtnText:this.formId.button_name,rules:[],flow:this.formId.form_process_id?this.formId.form_process_id+"":"",role:null!=this.formId.form_permission_id&&""!=this.formId.form_permission_id?this.formId.form_permission_id.split(","):[]},this.initRuleList()},initNoticeGroup:function(){var t=this,e={page:this.page,num:9999,searchKey:this.searchKey,formId:this.formId.id};this.$axios.get(l.a.server_form_template_notice_page,{params:e}).then((function(e){e.data.data&&(t.noticeTableData=e.data.data.list,t.total=e.data.data.totalCount,t.num=e.data.data.num,t.page=e.data.data.currentPage)}))},initRoleGroup:function(){var t=this,e={page:this.page,num:9999,formId:this.formId.id,searchKey:this.searchKey};this.$axios.get(l.a.server_form_template_permission_list,{params:e}).then((function(e){e.data.data&&(t.roleTableData=e.data.data.list,t.total=e.data.data.totalCount,t.num=e.data.data.num,t.page=e.data.data.currentPage)}))},initRuleList:function(){var t=this,e={formId:this.formId.id};e=this.$qs.stringify(e),this.$axios.post(l.a.server_form_template_form_rule_search,e).then((function(e){e.data.data&&(t.ruleList=e.data.data)}))},initFlow:function(){var t=this;this.$axios.get(l.a.server_form_template_form_process_list,{params:{}}).then((function(e){if(e.data.data){for(var o=[],i=0;i<e.data.data.length;i++)o.push({label:e.data.data[i].processName,value:e.data.data[i].id+""});t.flowList=o}}))},initRole:function(){var t=this;this.$axios.get(l.a.server_form_template_permission_list_list,{params:{}}).then((function(e){if(e.data.data){for(var o=[],i=0;i<e.data.data.length;i++)o.push({label:e.data.data[i].permissionName,value:e.data.data[i].id+""});t.roleList=o}}))},selSetMenu:function(t){this.activeSetMenu=t,1==t?this.initBasicInfo():2==t?this.initNoticeGroup():4==t&&this.initRoleGroup()},initParent:function(){this.$emit("init")},delRuleList:function(t){var e=this,o={id:t.id};o=this.$qs.stringify(o),this.$axios.post(l.a.server_form_template_form_rule_del,o,{loading:!1}).then((function(t){200==t.data.code?(Object(c.b)(t.data.desc),e.initRuleList()):Object(c.a)(t.data.desc)}))},onSubmitBasic:function(){var t=this;this.$refs.formBasic.validate((function(e){if(e){var o={formId:t.formId.id,formName:t.formBasic.name,submitOnly:t.formBasic.subRule,submitButton:t.formBasic.subBtn,buttonName:t.formBasic.subBtnText,hideIds:t.formBasic.rules.join()};t.formBasic.role.length>0&&(o.formPermissionId=t.formBasic.role.join()),""!=t.formBasic.flow&&(o.formProcessId=t.formBasic.flow),o=t.$qs.stringify(o),t.btnLoading=!0,t.$axios.post(l.a.server_form_template_basic_set,o,{loading:!1}).then((function(e){200==e.data.code?(Object(c.b)(e.data.desc),t.initParent(),t.formId.form_name=t.formBasic.name,t.formId.submit_only=t.formBasic.subRule,t.formId.submit_button=t.formBasic.subBtn,t.formId.button_name=t.formBasic.subBtnText,t.formId.hideIds=t.formBasic.rules.join(),t.formId.form_permission_id=t.formBasic.role.length>0?t.formBasic.role.join():"",t.formId.form_process_id=t.formBasic.flow+""):Object(c.a)(e.data.desc),t.btnLoading=!1}))}}))},editRuleList:function(t){this.addRule(),this.initRuleList();var e=JSON.parse(t.conditions),o=[];this.formRule={id:t.id,name:t.hideName,conditional:t.andor,conditional1:"",conditional2:"",conditional3:"",conditionalList:[],result:JSON.parse(t.hideKey)[0]};for(var i=0;i<e.length;i++)o.push({id:i+1,conditional1:e[i].k,conditional1Type:e[i].t1,conditional1Props:"",conditional2:e[i].c,conditional3:"",conditional4:""}),""!=e[i].t2&&(o[i].conditional1Props=e[i].t2),e[i].v.indexOf("~")>-1?(o[i].conditional3=e[i].v.split("~")[0],o[i].conditional4=e[i].v.split("~")[1]):o[i].conditional3=e[i].v;this.conditionalChildList=o},addRule:function(){this.formContent="";var t="";""!=this.formId.form_content&&(t=JSON.parse(this.formId.form_content),this.conditionalItemList1=[],this.resultList=[],this.resultList=this.setRuleChild(t.rule,[]),this.conditionalItemList1=this.setRuleChild(t.rule,[])),this.formContent=t,this.dialogRule=!0},addRuleItem:function(){this.conditionalChildList.push({id:this.conditionalChildList.length+1,conditional1:"",conditional1Type:"",conditional1Props:"",conditional2:"",conditional3:"",conditional4:""})},insertRuleItem:function(t,e){this.conditionalChildList.splice(e+1,0,{conditional1:"",conditional1Type:"",conditional1Props:"",conditional2:"",conditional3:"",conditional4:""}),this.conditionalChildList[e+1].id=this.conditionalChildList.length+1},minxRuleItem:function(t,e){this.conditionalChildList.splice(e,1)},closeDialog:function(){this.formRule={id:"",name:"",conditional:!0,conditional1:"",conditional2:"",conditional3:"",conditionalList:[],result:""},this.$refs.form&&this.$refs.form.resetFields(),this.$refs.formRule&&this.$refs.formRule.resetFields(),this.conditionalChildList=[],this.dialogRule=!1},cancelDialog:function(){this.dialogRule=!1},okDialog:function(){var t=this;this.$refs.formRule.validate((function(e){if(e){if(0==t.conditionalChildList.length)return void Object(c.c)(t.$t("请设置规则！"));var o={formId:t.formId.id,hideName:t.formRule.name,andor:t.formRule.conditional,hideKeys:t.formRule.result};""!=t.formRule.id&&(o.id=t.formRule.id);for(var n=[],i=0;i<t.conditionalChildList.length;i++)n.push({k:t.conditionalChildList[i].conditional1,c:t.conditionalChildList[i].conditional2,v:t.conditionalChildList[i].conditional3,t1:t.conditionalChildList[i].conditional1Type,t2:""}),"between"==t.conditionalChildList[i].conditional2&&(n[i].v=t.conditionalChildList[i].conditional3+"~"+t.conditionalChildList[i].conditional4),t.conditionalChildList[i].conditional1Props&&(n[i].t2=t.conditionalChildList[i].conditional1Props);o.conditions=JSON.stringify(n),o=t.$qs.stringify(o),t.btnLoading=!0,t.$axios.post(l.a.server_form_template_form_set_rule_save,o,{loading:!1}).then((function(e){200==e.data.code?(Object(c.b)(e.data.desc),t.initRuleList(),t.dialogRule=!1):Object(c.a)(e.data.desc),t.btnLoading=!1}))}}))},handleConditionChange:function(data){this.formRule.conditional=data},handleCondition1Change:function(t,e,o,n){this.conditionalChildList[n].conditional1=e.value,this.conditionalChildList[n].conditional1Type=e.type,e.props&&(this.conditionalChildList[n].conditional1Props=e.props),this.conditionalChildList[n].conditional3="",this.conditionalChildList[n].conditional4=""},handleCondition2Change:function(t,e,o,n){this.conditionalChildList[n].conditional2=e.value},handleCondition3Change:function(t,e){this.conditionalChildList[e.index-1].conditional3=e.field},handleResultChange:function(data){this.formRule.result=data},handleFlowChange:function(data){this.formBasic.flow=data},handleRoleChange:function(data){this.formBasic.role=data},setRuleChild:function(t,e){for(var o={},i=0;i<t.length;i++)t[i].children&&t[i].children.length>0?this.setRuleChild(t[i].children,e):t[i].field&&(o={label:t[i].title,field:t[i].field,title:t[i].title,type:t[i].type,value:t[i].field,text:t[i].title,props:t[i].props},e.push(o));return e}}},h=(o(1677),o(10)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"form-set-main",style:t.drawHeight3},[o("div",{staticClass:"pull-left form-set-left"},[o("div",{staticClass:"form-set-menu-item",class:1==t.activeSetMenu?"form-set-menu-item-active":"",on:{click:function(e){return t.selSetMenu(1)}}},[o("span",[t._v(t._s(t.$t("基础设置")))])]),t._v(" "),o("div",{staticClass:"form-set-menu-item",class:2==t.activeSetMenu?"form-set-menu-item-active":"",on:{click:function(e){return t.selSetMenu(2)}}},[o("span",[t._v(t._s(t.$t("消息推送")))])])]),t._v(" "),o("div",{staticClass:"form-set-right"},[1==t.activeSetMenu?o("div",[o("div",{staticClass:"padding-lr-10 padding-tb-10"},[o("div",{staticClass:"color-muted"},[o("span",[o("label",{staticClass:"title-block-tag"}),t._v(" "),o("label",{staticClass:"title-block-text color-warning"},[t._v(t._s(t.$t("基础设置")))])])]),t._v(" "),o("div",{staticClass:"font-size-12",staticStyle:{position:"relative"}},[o("el-form",{ref:"formBasic",staticStyle:{display:"inline-block"},attrs:{model:t.formBasic,rules:t.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:t.$t("表单名称"),prop:"name"}},[o("el-input",{staticClass:"width-300",attrs:{size:"small"},model:{value:t.formBasic.name,callback:function(e){t.$set(t.formBasic,"name",e)},expression:"formBasic.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("数据标题"),prop:"title"}},[o("el-checkbox",{attrs:{disabled:""},model:{value:t.formBasic.title,callback:function(e){t.$set(t.formBasic,"title",e)},expression:"formBasic.title"}},[o("span",{staticClass:"color-muted font-size-12"},[t._v("["+t._s(t.$t("发起人"))+"]")]),t._v(" "),o("span",{staticClass:"color-muted font-size-12"},[t._v(t._s(t.$t("提交的")))]),t._v(" "),o("span",{staticClass:"color-muted font-size-12"},[t._v("["+t._s(t.$t("表单名称"))+"]")])])],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("提交规则"),prop:"subRule"}},[o("el-checkbox",{model:{value:t.formBasic.subRule,callback:function(e){t.$set(t.formBasic,"subRule",e)},expression:"formBasic.subRule"}},[o("span",{staticClass:"color-muted font-size-12"},[t._v("["+t._s(t.$t("同账号只允许提交一次"))+"]")])])],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("提交按钮"),prop:"subBtn"}},[o("el-radio-group",{model:{value:t.formBasic.subBtn,callback:function(e){t.$set(t.formBasic,"subBtn",e)},expression:"formBasic.subBtn"}},[o("el-radio",{attrs:{label:!0}},[t._v(t._s(t.$t("开启")))]),t._v(" "),o("el-radio",{attrs:{label:!1}},[t._v(t._s(t.$t("关闭")))])],1)],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("按钮文字"),prop:"subBtnText"}},[o("el-input",{staticClass:"width-300",attrs:{size:"small"},model:{value:t.formBasic.subBtnText,callback:function(e){t.$set(t.formBasic,"subBtnText",e)},expression:"formBasic.subBtnText"}})],1),t._v(" "),0!=t.formId.form_type&&2!=t.formId.form_type?o("el-form-item",{attrs:{label:t.$t("选择流程"),prop:"flow"}},[o("my-select",{attrs:{size:"small","width-style":300,clearable:!0,"sel-value":t.formBasic.flow,options:t.flowList},on:{change:t.handleFlowChange}})],1):t._e(),t._v(" "),o("el-form-item",{attrs:{label:t.$t("选择权限"),prop:"role"}},[o("el-select",{staticClass:"width-300",attrs:{multiple:"",size:"small",placeholder:"请选择"},on:{change:t.handleRoleChange},model:{value:t.formBasic.role,callback:function(e){t.$set(t.formBasic,"role",e)},expression:"formBasic.role"}},t._l(t.roleList,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),o("el-form-item",{staticClass:"text-center"},[o("el-button",{attrs:{type:"primary",size:"mini",loading:t.btnLoading},on:{click:t.onSubmitBasic}},[t._v(t._s(t.$t("保存")))])],1)],1)],1)])]):t._e(),t._v(" "),2==t.activeSetMenu?o("div",[o("my-form-set-notice",{attrs:{formId:t.formId,data:t.noticeTableData},on:{init:t.initNoticeGroup}})],1):t._e(),t._v(" "),4==t.activeSetMenu?o("div",[o("my-form-set-role",{attrs:{formId:t.formId,data:t.roleTableData},on:{init:t.initRoleGroup}})],1):t._e()]),t._v(" "),o("div",{staticClass:"moon-clearfix"})]),t._v(" "),o("dialog-normal",{attrs:{top:"10vh","width-style":"800px","append-to-body":!0,visible:t.dialogRule,title:t.$t("规则设置")},on:{close:t.closeDialog,"right-close":t.cancelDialog}},[o("div",[o("el-form",{ref:"formRule",staticStyle:{display:"inline-block"},attrs:{model:t.formRule,rules:t.rulesRule,"label-width":"100px"}},[o("el-form-item",{attrs:{label:t.$t("名称"),prop:"name"}},[o("el-input",{staticClass:"width-300",attrs:{size:"small"},model:{value:t.formRule.name,callback:function(e){t.$set(t.formRule,"name",e)},expression:"formRule.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("满足")}},[o("div",{staticClass:"layout-inline"},[o("my-select",{staticClass:"width-100 layout-item margin-left-5 margin-right-5",attrs:{size:"mini","sel-value":t.formRule.conditional,options:t.conditionalList},on:{change:t.handleConditionChange}}),t._v(" "),o("span",{staticClass:"layout-item"},[t._v(t._s(t.$t("条件时")))]),t._v(" "),o("span",{staticClass:"fa fa-plus-circle color-success",on:{click:t.addRuleItem}})],1),t._v(" "),o("div",t._l(t.conditionalChildList,(function(e,n){return o("div",{key:e.id,staticClass:"layout-inline"},[o("el-select",{staticClass:"width-150 layout-item",attrs:{size:"mini",placeholder:t.$t("本表单字段")},model:{value:t.conditionalChildList[n].conditional1,callback:function(e){t.$set(t.conditionalChildList[n],"conditional1",e)},expression:"conditionalChildList[index].conditional1"}},t._l(t.conditionalItemList1,(function(e,r){return o("el-option",{key:r,attrs:{label:e.label,value:e.value},nativeOn:{click:function(o){return t.handleCondition1Change(o,e,r,n)}}})})),1),t._v(" "),o("el-select",{staticClass:"width-100 layout-item",attrs:{size:"mini"},model:{value:t.conditionalChildList[n].conditional2,callback:function(e){t.$set(t.conditionalChildList[n],"conditional2",e)},expression:"conditionalChildList[index].conditional2"}},t._l(t.filterAppServerConditionnalAllType,(function(e,r){return o("el-option",{key:r,attrs:{label:e.label,value:e.value},nativeOn:{click:function(o){return t.handleCondition2Change(o,e,r,n)}}})})),1),t._v(" "),"between"==t.conditionalChildList[n].conditional2?["datePicker"==t.conditionalChildList[n].conditional1Type?o("div",{staticClass:"layout-item"},[o("el-date-picker",{staticStyle:{width:"140px"},attrs:{size:"mini",type:t.conditionalChildList[n].conditional1Props.type,"value-format":t.conditionalChildList[n].conditional1Props.format,placeholder:"选择日期"},model:{value:t.conditionalChildList[n].conditional3,callback:function(e){t.$set(t.conditionalChildList[n],"conditional3",e)},expression:"conditionalChildList[index].conditional3"}}),t._v("\n                    -\n                    "),o("el-date-picker",{staticStyle:{width:"140px"},attrs:{size:"mini",type:t.conditionalChildList[n].conditional1Props.type,"value-format":t.conditionalChildList[n].conditional1Props.format,placeholder:"选择日期"},model:{value:t.conditionalChildList[n].conditional4,callback:function(e){t.$set(t.conditionalChildList[n],"conditional4",e)},expression:"conditionalChildList[index].conditional4"}})],1):"timePicker"==t.conditionalChildList[n].conditional1Type?o("div",{staticClass:"layout-item"},[o("el-time-picker",{staticStyle:{width:"140px"},attrs:{size:"mini","picker-options":{format:"HH:mm"},"value-format":"HH:mm:ss",placeholder:"选择时间"},model:{value:t.conditionalChildList[n].conditional3,callback:function(e){t.$set(t.conditionalChildList[n],"conditional3",e)},expression:"conditionalChildList[index].conditional3"}}),t._v("\n                    -\n                    "),o("el-time-picker",{staticStyle:{width:"140px"},attrs:{size:"mini","picker-options":{format:"HH:mm"},"value-format":"HH:mm:ss",placeholder:"选择时间"},model:{value:t.conditionalChildList[n].conditional4,callback:function(e){t.$set(t.conditionalChildList[n],"conditional4",e)},expression:"conditionalChildList[index].conditional4"}})],1):o("div",{staticClass:"layout-item"},[o("el-input",{staticStyle:{width:"50px"},attrs:{size:"mini"},model:{value:t.conditionalChildList[n].conditional3,callback:function(e){t.$set(t.conditionalChildList[n],"conditional3",e)},expression:"conditionalChildList[index].conditional3"}}),t._v("\n                    -\n                    "),o("el-input",{staticStyle:{width:"50px"},attrs:{size:"mini"},model:{value:t.conditionalChildList[n].conditional4,callback:function(e){t.$set(t.conditionalChildList[n],"conditional4",e)},expression:"conditionalChildList[index].conditional4"}})],1)]:["datePicker"==t.conditionalChildList[n].conditional1Type?[o("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:"mini",type:t.conditionalChildList[n].conditional1Props.type,"value-format":t.conditionalChildList[n].conditional1Props.format,placeholder:"选择日期"},model:{value:t.conditionalChildList[n].conditional3,callback:function(e){t.$set(t.conditionalChildList[n],"conditional3",e)},expression:"conditionalChildList[index].conditional3"}})]:"timePicker"==t.conditionalChildList[n].conditional1Type?[o("el-time-picker",{staticStyle:{width:"150px"},attrs:{size:"mini","picker-options":{format:"HH:mm"},"value-format":"HH:mm:ss",placeholder:"选择时间"},model:{value:t.conditionalChildList[n].conditional3,callback:function(e){t.$set(t.conditionalChildList[n],"conditional3",e)},expression:"conditionalChildList[index].conditional3"}})]:[o("el-input",{staticClass:"width-150",attrs:{size:"mini"},model:{value:t.conditionalChildList[n].conditional3,callback:function(e){t.$set(t.conditionalChildList[n],"conditional3",e)},expression:"conditionalChildList[index].conditional3"}})]],t._v(" "),o("span",{staticClass:"fa fa-plus-circle color-success",on:{click:function(e){return t.insertRuleItem(e,n)}}}),t._v(" "),o("span",{staticClass:"fa fa-minus-circle color-danger",on:{click:function(e){return t.minxRuleItem(e,n)}}})],2)})),0)]),t._v(" "),o("el-form-item",{attrs:{label:t.$t("显示字段"),prop:"result"}},[o("my-select",{staticClass:"width-150 layout-item",attrs:{size:"mini","sel-value":t.formRule.result,options:t.resultList},on:{change:t.handleResultChange}})],1)],1)],1),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v(t._s(t.$t("取消")))]),t._v(" "),o("el-button",{attrs:{size:"small",type:"primary",loading:t.btnDialogLoading},on:{click:function(e){return t.okDialog()}}},[t._v("\n          "+t._s(t.$t("确定"))+"\n        ")])],1)])],1)}),[],!1,null,"9973bee0",null);e.default=component.exports;installComponents(component,{MySelect:o(1256).default,MyFormSetNotice:o(1560).default,MyFormSetRole:o(1559).default,DialogNormal:o(235).default})},1544:function(t,e,o){"use strict";o.r(e);o(709),o(107);var n=o(76),r=(o(7),o(6)),l=o(1256),c={name:"myFormFlow",components:{MyFormAuditType:o(1316).default,MySelect:l.default},mixins:[n.a],props:{formId:Object,flowData:{default:function(){return[]},type:Array},form:{default:function(){return{auditType:"",name:"",allowBack:!1,urge:!1,autoAudit:!1,merge:!1}},type:Object}},computed:{},data:function(){return{checkRight1All:!1,checkRight2All:!1,popVisible:!1,refreshTeacherStatus:!1,activeName:"only",flowCustonUserStatus:!1,flowDetailIndex:"",flowDetailData:"",approverUsers:[],formFieldList:[],auditFlowType:[{label:this.$t("固定人审批"),text:this.$t("固定人审批"),value:1},{label:this.$t("系统角色审批"),text:this.$t("系统角色审批"),value:2},{label:this.$t("发起人自选审批"),text:this.$t("发起人自选审批"),value:3},{label:this.$t("抄送给固定人"),text:this.$t("抄送给固定人"),value:4},{label:this.$t("抄送给系统角色"),text:this.$t("抄送给系统角色"),value:5},{label:this.$t("自选抄送人"),text:this.$t("自选抄送人"),value:6}]}},created:function(){},methods:{selAuditType:function(t,e,o){var n={type:t,extra:e,name:this.auditFlowTypeItemInfo(t,"set"),users:[],hType:"",hName:"",andor:"or",waitName:!1,allowShow:!1,allowMuti:!1,rejectShow:!1,rejectMuti:!1,transferShow:!1,transferMuti:!1,allShow:!1,allEdit:!1,applicantShow:!1,applicantEdit:!1,right1:[],right2:[]};this.flowData.splice(o,0,n),this.selFlowItemBlock(null,n,o)},delAuditType:function(t,data,e){this.flowData.splice(e,1)},handleClick:function(t){this.activeName=t},handleAuditTypeChange:function(data){this.form.auditType=data},handleUserType:function(data){this.flowDetailData.htype=data,this.flowDetailData.hType=data},auditFlowTypeItemInfo:function(t,e){return Object(r.q)(t,e)},selFlowItemBlock:function(t,data,e){this.flowDetailData=data,this.approverUsers=data.users,this.flowDetailIndex=e;if(this.formId.form_content){var o=JSON.parse(this.formId.form_content);this.formFieldList=this.setRuleChild(o.rule,[]),this.formFieldList.length==this.flowDetailData.right1.length?this.checkRight1All=!0:this.checkRight1All=!1,this.formFieldList.length==this.flowDetailData.right2.length?this.checkRight2All=!0:this.checkRight2All=!1}},setRuleChild:function(t,e){for(var o={},i=0;i<t.length;i++)t[i].children&&t[i].children.length>0?this.setRuleChild(t[i].children,e):t[i].field&&(o={field:t[i].field,title:t[i].title,type:t[i].type,value:t[i].value},e.push(o));return e},loadingShow:function(t){var e=this,o=null;switch(clearTimeout(o),t){case 1:this.refreshTeacherStatus=!0,o=setTimeout((function(){e.refreshTeacherStatus=!1,clearTimeout(o)}),1e3)}},handleShowTeacher:function(t){var e=this;setTimeout((function(){1==t&&e.$refs.popverTeacherRef._handleOpen()}),800)},handleSelUser:function(data,t){if(1==t){this.flowDetailData.users=data,this.flowDetailData.hName=[];for(var i=0;i<data.length;i++)this.flowDetailData.hName.push(data[i].real_name)}this.approverUsers=this.flowDetailData.users},versionList:function(){this.$emit("versionClick")},handleCheckedRight1Change:function(data){this.flowDetailData.right1=data,this.formFieldList.length==this.flowDetailData.right1.length?this.checkRight1All=!0:this.checkRight1All=!1},handleCheckedRight2Change:function(data){this.flowDetailData.right2=data,this.formFieldList.length==this.flowDetailData.right2.length?this.checkRight2All=!0:this.checkRight2All=!1},handleCheckAllChangeRight1:function(data){if(1==data){if(this.formId.form_content){for(var t=[],i=0;i<this.formFieldList.length;i++)t.push(this.formFieldList[i].field);this.flowDetailData.right1=t}}else this.flowDetailData.right1=[]},handleCheckAllChangeRight2:function(data){if(1==data){if(this.formId.form_content){for(var t=[],i=0;i<this.formFieldList.length;i++)t.push(this.formFieldList[i].field);this.flowDetailData.right2=t}}else this.flowDetailData.right2=[]},showPop:function(){this.flowCustonUserStatus=!1;for(var i=0;i<this.flowData.length;i++)if("CustomUser"==this.flowData[i].hType){this.flowCustonUserStatus=!0;break}}}},d=(o(1679),o(10)),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"form-set-main",style:t.drawHeight3},[o("div",{staticClass:"pull-right form-set-right",staticStyle:{"overflow-y":"auto"}},[o("div",{staticClass:"header-block padding-lr-10 border-bottom-1"},[o("el-row",[o("el-col",{staticClass:"text-center",attrs:{span:12}},[o("span",{staticClass:"tab-class font-bold",class:"only"==t.activeName?"color-warning":"",on:{click:function(e){return t.handleClick("only")}}},[o("i",{staticClass:"fa fa-file"}),t._v("\n                "+t._s(t.$t("节点属性"))+"\n              ")])]),t._v(" "),o("el-col",{staticClass:"text-center",attrs:{span:12}},[o("span",{staticClass:"tab-class font-bold margin-left-5",class:"flow"==t.activeName?"color-warning":"",on:{click:function(e){return t.handleClick("flow")}}},[o("i",{staticClass:"fa fa-line-chart"}),t._v("\n                "+t._s(t.$t("流程属性"))+"\n              ")])])],1)],1),t._v(" "),o("div",{staticClass:"margin-top-10 padding-lr-10 font-size-12"},["only"==t.activeName?[o("div",[o("div",{staticClass:"font-bold"},[t._v(t._s(t.$t("节点类型")))]),t._v(" "),"audit"==t.flowDetailData.extra?o("div",{staticClass:"margin-top-10"},[t._v(t._s(t.$t("审批节点")))]):t._e(),t._v(" "),"send"==t.flowDetailData.extra?o("div",{staticClass:"margin-top-10"},[t._v(t._s(t.$t("抄送节点")))]):t._e()]),t._v(" "),o("div",{staticClass:"margin-top-10"},[o("div",{staticClass:"font-bold"},[t._v(t._s(t.$t("节点名称")))]),t._v(" "),o("div",{staticClass:"margin-top-5"},[o("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini"},model:{value:t.flowDetailData.name,callback:function(e){t.$set(t.flowDetailData,"name",e)},expression:"flowDetailData.name"}})],1)]),t._v(" "),o("div",{staticClass:"margin-top-10"},["send"==t.flowDetailData.extra?[o("div",{staticClass:"font-bold"},[t._v(t._s(t.$t("抄送人")))]),t._v(" "),o("div",{staticClass:"margin-top-5"},[4==t.flowDetailData.type||6==t.flowDetailData.type?o("el-popover",{attrs:{"popper-class":"custom-popper-class-form",placement:"left",width:"700",trigger:"click"},on:{show:function(e){return t.handleShowTeacher(1)}}},[o("div",[o("teacher-tree-and-list-no-page",{ref:"popverTeacherRef",attrs:{"user-type":"user","sel-arr":t.flowDetailData.users,"set-type":"check"},on:{select:function(e){return t.handleSelUser(e,1)}}})],1),t._v(" "),o("el-button",{attrs:{slot:"reference",type:"success",plain:"",size:"small"},on:{click:function(e){return t.loadingShow(1)}},slot:"reference"},[1==t.refreshTeacherStatus?o("i",{staticClass:"fa fa-refresh fa-spin"}):t._e(),t._v("\n                      "+t._s(t.$t("抄送人"))+"("+t._s(t.$t("人数"))+":"+t._s(t.approverUsers.length)+")\n                    ")])],1):t._e(),t._v(" "),5==t.flowDetailData.type?o("my-select",{attrs:{size:"mini","sel-value":t.flowDetailData.hType,options:t.fiterTeacherRoleType},on:{change:t.handleUserType}}):t._e()],1)]:t._e(),t._v(" "),"audit"==t.flowDetailData.extra?[o("div",{staticClass:"font-bold"},[t._v(t._s(t.$t("审批人")))]),t._v(" "),o("div",{staticClass:"margin-top-5"},[1==t.flowDetailData.type||3==t.flowDetailData.type?o("el-popover",{attrs:{"popper-class":"custom-popper-class-form",placement:"left",width:"700",trigger:"click"},on:{show:function(e){return t.handleShowTeacher(1)}}},[o("div",[o("teacher-tree-and-list-no-page",{ref:"popverTeacherRef",attrs:{"user-type":"user","sel-arr":t.flowDetailData.users,"set-type":"check"},on:{select:function(e){return t.handleSelUser(e,1)}}})],1),t._v(" "),o("el-button",{attrs:{slot:"reference",type:"success",plain:"",size:"small"},on:{click:function(e){return t.loadingShow(1)}},slot:"reference"},[1==t.refreshTeacherStatus?o("i",{staticClass:"fa fa-refresh fa-spin"}):t._e(),t._v("\n                      "+t._s(t.$t("审批人"))+"("+t._s(t.$t("人数"))+":"+t._s(t.approverUsers.length)+")\n                    ")])],1):t._e(),t._v(" "),2==t.flowDetailData.type?o("my-select",{attrs:{size:"mini","sel-value":t.flowDetailData.hType,options:t.fiterTeacherRoleType},on:{change:t.handleUserType}}):t._e()],1)]:t._e()],2),t._v(" "),"send"!=t.flowDetailData.extra?[o("div",{staticClass:"margin-top-10 border-bottom-1 padding-bottom-5"},[o("div",{staticClass:"font-bold"},[t._v(t._s(t.$t("多人审批规则")))]),t._v(" "),o("div",{staticClass:"margin-top-10"},[o("el-row",[o("el-col",{attrs:{span:20}},[o("span",[t._v(t._s(t.$t("会签")))]),t._v(" "),o("span",{staticClass:"color-muted"},[t._v("("+t._s(t.$t("所有审批人同意"))+")")])]),t._v(" "),o("el-col",{staticClass:"text-right",attrs:{span:4}},[o("el-radio",{attrs:{label:"and"},model:{value:t.flowDetailData.andor,callback:function(e){t.$set(t.flowDetailData,"andor",e)},expression:"flowDetailData.andor"}},[t._v(" ")])],1)],1)],1),t._v(" "),o("div",{staticClass:"margin-top-10"},[o("el-row",[o("el-col",{attrs:{span:20}},[o("span",[t._v(t._s(t.$t("或签")))]),t._v(" "),o("span",{staticClass:"color-muted"},[t._v("("+t._s(t.$t("其中一人审批同意"))+")")])]),t._v(" "),o("el-col",{staticClass:"text-right",attrs:{span:4}},[o("el-radio",{attrs:{label:"or"},model:{value:t.flowDetailData.andor,callback:function(e){t.$set(t.flowDetailData,"andor",e)},expression:"flowDetailData.andor"}},[t._v(" ")])],1)],1)],1)]),t._v(" "),o("div",{staticClass:"margin-top-10 border-bottom-1 padding-bottom-5"},[o("div",{staticClass:"font-bold"},[t._v(t._s(t.$t("按钮权限")))]),t._v(" "),o("div",{staticClass:"margin-top-10"},[o("el-row",[o("el-col",{attrs:{span:16}},[t._v("\n                       \n                    ")]),t._v(" "),o("el-col",{staticClass:"text-center",attrs:{span:8}},[o("el-row",[o("el-col",{staticClass:"text-center",attrs:{span:12}},[t._v("\n                           \n                        ")]),t._v(" "),o("el-col",{staticClass:"text-center",attrs:{span:12}},[o("span",[t._v(t._s(t.$t("显示")))])])],1)],1)],1),t._v(" "),o("el-row",{staticClass:"margin-top-5"},[o("el-col",{attrs:{span:16}},[o("span",[t._v(t._s(t.$t("同意")))])]),t._v(" "),o("el-col",{staticClass:"text-center",attrs:{span:8}},[o("el-row",[o("el-col",{staticClass:"text-center",attrs:{span:12}},[t._v("\n                           \n                        ")]),t._v(" "),o("el-col",{staticClass:"text-center",attrs:{span:12}},[o("el-checkbox",{model:{value:t.flowDetailData.allowShow,callback:function(e){t.$set(t.flowDetailData,"allowShow",e)},expression:"flowDetailData.allowShow"}})],1)],1)],1)],1),t._v(" "),o("el-row",{staticClass:"margin-top-5"},[o("el-col",{attrs:{span:16}},[o("span",[t._v(t._s(t.$t("驳回")))])]),t._v(" "),o("el-col",{staticClass:"text-center",attrs:{span:8}},[o("el-row",[o("el-col",{staticClass:"text-center",attrs:{span:12}},[t._v("\n                           \n                        ")]),t._v(" "),o("el-col",{staticClass:"text-center",attrs:{span:12}},[o("el-checkbox",{model:{value:t.flowDetailData.rejectShow,callback:function(e){t.$set(t.flowDetailData,"rejectShow",e)},expression:"flowDetailData.rejectShow"}})],1)],1)],1)],1)],1)])]:t._e()]:t._e(),t._v(" "),"flow"==t.activeName?[o("div",{staticClass:"margin-top-10"},[o("div",[o("div",[o("span",[t._v(t._s(t.$t("流程名称")))])]),t._v(" "),o("el-row",{staticClass:"margin-top-10"},[o("el-col",{attrs:{span:24}},[o("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1)],1),t._v(" "),o("div",{staticClass:"margin-top-10"},[o("el-row",[o("el-col",{attrs:{span:20}},[o("span",[t._v(t._s(t.$t("流程发起后允许撤回")))])]),t._v(" "),o("el-col",{staticClass:"text-center",attrs:{span:4}},[o("el-checkbox",{model:{value:t.form.allowBack,callback:function(e){t.$set(t.form,"allowBack",e)},expression:"form.allowBack"}})],1)],1)],1),t._v(" "),o("div",{staticClass:"margin-top-10"},[o("el-row",[o("el-col",{attrs:{span:20}},[o("span",[t._v(t._s(t.$t("审批人为发起人时自动审批")))])]),t._v(" "),o("el-col",{staticClass:"text-center",attrs:{span:4}},[o("el-checkbox",{model:{value:t.form.autoAudit,callback:function(e){t.$set(t.form,"autoAudit",e)},expression:"form.autoAudit"}})],1)],1)],1),t._v(" "),o("div",{staticClass:"margin-top-10"},[o("el-row",[o("el-col",{attrs:{span:20}},[o("span",[t._v(t._s(t.$t("相邻节点审批人合并审批")))])]),t._v(" "),o("el-col",{staticClass:"text-center",attrs:{span:4}},[o("el-checkbox",{model:{value:t.form.merge,callback:function(e){t.$set(t.form,"merge",e)},expression:"form.merge"}})],1)],1)],1)])]:t._e()],2)]),t._v(" "),o("div",{staticClass:"form-set-left"},[o("div",{staticClass:"padding-lr-10 padding-tb-10 text-right border-bottom-1"},[""!=t.form.name?o("span",{staticClass:"color-muted margin-right-10 font-size-12"},[t._v("\n            "+t._s(t.$t("当前版本"))+": "+t._s(t.form.name)+"\n          ")]):t._e(),t._v(" "),o("el-button",{attrs:{size:"mini"},on:{click:t.versionList}},[t._v(t._s(t.$t("版本管理")))])],1),t._v(" "),o("div",{staticClass:"text-center flow-main-block",staticStyle:{"overflow-y":"auto",position:"relative"},style:t.drawHeight5},[o("div",{staticClass:"flow-fixed-block font-size-12 font-bold margin-bottom-20 bg-success"},[o("span",[t._v(t._s(t.$t("开始")))])]),t._v(" "),o("div",{staticClass:"margin-bottom-20 margin-top-20"},[o("my-form-audit-type",{attrs:{"item-index":"0","custom-user-status":t.flowCustonUserStatus},on:{click:t.selAuditType,showPop:t.showPop}})],1),t._v(" "),t._l(t.flowData,(function(e,n){return t.flowData.length>0?o("div",{key:n},[o("div",{staticClass:"flow-item-block",on:{click:function(o){return t.selFlowItemBlock(o,e,n)}}},[o("div",{staticClass:"flow-item-title-block",class:"audit"==e.extra?"bg-warning":"bg-success"},[o("i",{staticClass:"fa fa-times-circle flow-item-close-block color-danger",on:{click:function(o){return o.stopPropagation(),t.delAuditType(o,e,n)}}}),t._v(" "),o("span",{staticClass:"font-bold font-size-12"},[o("el-row",[o("el-col",{attrs:{span:20}},[o("i",{staticClass:"fa fa-tag"}),t._v(" "),o("label",[t._v(t._s(e.name))])]),t._v(" "),o("el-col",{staticClass:"text-right",attrs:{span:4}},[o("i",{staticClass:"fa fa-cog"})])],1)],1)]),t._v(" "),o("div",{staticClass:"padding-lr-10 padding-tb-10 text-left font-size-12"},[o("div",[o("div",[o("span",{staticStyle:{position:"relative",top:"-5px"}},[o("i",{staticClass:"fa fa-users"}),t._v(" "),o("label",[t._v(t._s(t.$t("人员"))+": ")])]),t._v(" "),o("span",[1==e.type||3==e.type||4==e.type||6==e.type?[t._l(e.hName,(function(e,n){return n<4?o("el-tag",{key:n,staticClass:"margin-left-5 moon-content-text-ellipsis-class",staticStyle:{width:"50px"},attrs:{size:"mini"}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e,placement:"top-start"}},[o("span",[t._v(t._s(e))])])],1):t._e()})),t._v(" "),e.users.length>=4?o("label",{staticClass:"flow-user-count-tag margin-left-5"},[t._v("4+")]):t._e()]:t._e(),t._v(" "),2==e.type||5==e.type?[o("el-tag",{staticClass:"margin-left-5 moon-content-text-ellipsis-class",staticStyle:{width:"50px"},attrs:{size:"mini"}},["MasterTeacher"==e.hType?o("label",[t._v(t._s(t.$t("班主任")))]):t._e(),t._v(" "),"CoachTeacher"==e.hType?o("label",[t._v(t._s(t.$t("辅导员")))]):t._e(),t._v(" "),"DirectorTeacher"==e.hType?o("label",[t._v(t._s(t.$t("系主任")))]):t._e(),t._v(" "),"DormitorTeacher"==e.hType?o("label",[t._v(t._s(t.$t("宿管员")))]):t._e(),t._v(" "),"DeputyDirectorTeacher"==e.hType?o("label",[t._v(t._s(t.$t("系副主任")))]):t._e(),t._v(" "),"StudentManageTeacher"==e.hType?o("label",[t._v(t._s(t.$t("学管主任")))]):t._e(),t._v(" "),"SecretaryTeacher"==e.hType?o("label",[t._v(t._s(t.$t("系部主任")))]):t._e()])]:t._e()],2)]),t._v(" "),"send"!=e.extra?o("div",{staticClass:"margin-top-5"},[o("span",{staticStyle:{position:"relative",top:"-5px"}},[o("i",{staticClass:"fa fa-cog"}),t._v(" "),o("label",[t._v(t._s(t.$t("权限"))+": ")])]),t._v(" "),o("span",[e.allowShow||e.allowMuti?o("el-tag",{staticClass:"margin-left-5 moon-content-text-ellipsis-class",staticStyle:{width:"50px"},attrs:{size:"mini",type:"success"}},[t._v("\n                        "+t._s(t.$t("提交"))+"\n                      ")]):t._e(),t._v(" "),e.rejectShow||e.rejectMuti?o("el-tag",{staticClass:"margin-left-5 moon-content-text-ellipsis-class",staticStyle:{width:"50px"},attrs:{size:"mini",type:"success"}},[t._v("\n                        "+t._s(t.$t("驳回"))+"\n                      ")]):t._e()],1)]):t._e()])])]),t._v(" "),o("div",{staticClass:"margin-bottom-20 margin-top-20"},[o("my-form-audit-type",{attrs:{"item-index":n+1,"pop-visible":t.popVisible},on:{click:t.selAuditType}})],1)]):t._e()})),t._v(" "),o("div",{staticClass:"flow-fixed-block font-size-12 font-bold bg-danger"},[o("span",[t._v(t._s(t.$t("结束")))])])],2)]),t._v(" "),o("div",{staticClass:"moon-clearfix"})])])}),[],!1,null,"859dda9e",null);e.default=component.exports;installComponents(component,{TeacherTreeAndListNoPage:o(1305).default,MySelect:o(1256).default,MyFormAuditType:o(1316).default})},1559:function(t,e,o){"use strict";o.r(e);o(237),o(360),o(65),o(43),o(106),o(1308),o(137),o(710),o(136),o(107);var n=o(1317),r=o(76),l=o(236),c=o(1309),d=o(7),m=o(6),f={name:"myFormSetRole",components:{MyEnable:o(1304).default,DrawerLayoutRight:l.default},mixins:[r.a,c.a],props:{data:{type:Array,default:function(){return[]}},formId:Object},computed:{},data:function(){return{drawerRole:!1,subTitle:"",btnLoading:!1,refreshTeacherStatus:!1,refreshStudentStatus:!1,approverUsers:[],form:{id:"",name:"",des:"",roleType:0,roleOprLook:!1,roleOprDel:!1,roleOprSubmit:!1,roleOprImOrEx:!1,roleTeachers:!1,roleStudents:!1,roleUsers:[],roleUserGroup:[],enable:!0,permissionContent:"",permissionContentArray:[],approverTeacherId:[],approverStudentId:[]}}},methods:{addRole:function(){this.drawerRole=!0},changeFormType:function(data){this.approverUsers=[],this.form.permissionContentArray=[],this.form.roleType=data},changeFormOprLook:function(data){this.form.roleOprLook=data},changeFormOprDel:function(data){this.form.roleOprDel=data},changeFormOprSubmit:function(data){this.form.roleOprSubmit=data},changeFormTeacher:function(data){this.form.roleTeachers=data},changeFormStudent:function(data){this.form.roleStudents=data},closeDialog:function(){this.form={id:"",name:"",des:"",roleType:0,roleOprLook:!1,roleOprDel:!1,roleOprSubmit:!1,roleOprImOrEx:!1,roleTeachers:!1,roleStudents:!1,roleUsers:[],roleUserGroup:[],enable:!0,permissionContent:"",permissionContentArray:[],approverTeacherId:[],approverStudentId:[]},this.subTitle="",this.approverUsers=[],this.$refs.formRole&&this.$refs.formRole.resetFields(),this.drawerRole=!1},cancelDrawDialog:function(){this.drawerRole=!1},okFormDrawDialog:function(){var t=this,e="";this.$refs.formRole.validate((function(o){if(o){for(var n={formId:t.formId.id,permissionType:t.form.roleType,permissionCondition1:t.form.roleOprLook,permissionCondition2:t.form.roleOprDel,permissionCondition3:t.form.roleOprImOrEx,permissionStudentSwitch:t.form.roleStudents,permissionTeacherSwitch:t.form.roleTeachers,permissionName:t.form.name,enable:t.form.enable,des:t.form.des},r=[],i=0;i<t.form.permissionContentArray.length;i++)r.push(t.form.permissionContentArray[i].user_id);n.permissionContent=r.join(),""!=t.form.id&&(n.id=t.form.id),e=d.a.server_form_template_permission_save,n=t.$qs.stringify(n),t.btnLoading=!0,t.$axios.post(e,n).then((function(e){200==e.data.code?(t.drawerRole=!1,t.initParent(),Object(m.b)(e.data.desc)):Object(m.a)(e.data.desc),t.btnLoading=!1}))}}))},initParent:function(){this.$emit("init")},editForm:function(t,data){this.form={id:data.id,name:data.permission_name,des:data.des,roleType:data.permission_type,roleOprLook:data.permission_condition1,roleOprDel:data.permission_condition2,roleOprSubmit:!1,roleOprImOrEx:data.permission_condition3,roleTeachers:data.permission_teacher_switch,roleStudents:data.permission_student_switch,roleUsers:[],roleUserGroup:[],enable:!0,permissionContent:data.permission_content};var e=[];if(this.form.permissionContentArray=[],""!=data.permission_content){this.approverUsers=data.permission_content.split(","),e=data.permission_content.split(",");for(var i=0;i<e.length;i++)this.form.permissionContentArray.push({user_id:e[i]})}this.drawerRole=!0},deleteForm:function(t,data){var e=this,o={id:data.id};o=this.$qs.stringify(o),this.btnLoading=!0,this.$axios.post(d.a.server_form_template_permission_del,o).then((function(t){200==t.data.code?(e.drawerRole=!1,e.initParent(),Object(m.b)(t.data.desc)):Object(m.a)(t.data.desc),e.btnLoading=!1}))},copyForm:function(t,data){},enableForm:function(t,data,e){var o=this,n={id:data.id,enable:e};n=this.$qs.stringify(n),this.btnLoading=!0,this.$axios.post(d.a.server_form_template_permission_enable,n).then((function(t){200==t.data.code?(o.drawerRole=!1,o.initParent(),Object(m.b)(t.data.desc)):Object(m.a)(t.data.desc),o.btnLoading=!1}))},loadingShow:function(t){var e=this,o=null;switch(clearTimeout(o),t){case 1:this.refreshTeacherStatus=!0,o=setTimeout((function(){e.refreshTeacherStatus=!1,clearTimeout(o)}),1e3);break;case 2:this.refreshStudentStatus=!0,o=setTimeout((function(){e.refreshStudentStatus=!1,clearTimeout(o)}),1e3)}},handleShowTeacher:function(t){var e=this;setTimeout((function(){1==t?e.$refs.popverTeacherRef._handleOpen():2==t&&e.$refs.popverStudentRef._handleOpen()}),800)},handleSelUser:function(data,t){if(1==t){this.form.approverTeacherId=data;var e=this.form.approverStudentId?this.form.approverStudentId:[];this.form.roleUsers=e.concat(this.form.approverTeacherId)}else if(2==t){this.form.approverStudentId=data;var o=this.form.approverTeacherId?this.form.approverTeacherId:[];this.form.roleUsers=o.concat(this.form.approverStudentId)}this.form.roleUsers=Object(n.a)(new Set(this.form.roleUsers)),this.approverUsers=this.form.roleUsers}}},h=(o(1673),o(10)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"padding-lr-10 padding-tb-10"},[o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.addRole}},[t._v("\n        "+t._s(t.$t("创建权限组"))+"\n      ")])],1),t._v(" "),o("el-table",{ref:"refTable",staticStyle:{width:"100%"},attrs:{data:t.data,"header-cell-class-name":"custom-table-cell-bg",size:"medium","max-height":t.tableHeight15.height}},[o("el-table-column",{attrs:{align:"center",label:t.$t("名称")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[t._v(t._s(e.row.permission_name))]),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n              "+t._s(e.row.permission_name)+"\n            ")])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:t.$t("描述")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[t._v(t._s(e.row.des))]),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n              "+t._s(e.row.des)+"\n            ")])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:t.$t("类型")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[0===e.row.permission_type?o("label",[t._v(t._s(t.$t("表单使用")))]):t._e(),t._v(" "),1===e.row.permission_type?o("label",[t._v(t._s(t.$t("数据统计")))]):t._e()]),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[0===e.row.permission_type?o("label",[t._v(t._s(t.$t("表单使用")))]):t._e(),t._v(" "),1===e.row.permission_type?o("label",[t._v(t._s(t.$t("数据统计")))]):t._e()])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:t.$t("权限")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[0===e.row.permission_type?o("div",[o("el-tag",{attrs:{size:"mini"}},[t._v("\n                  "+t._s(t.$t("查看"))+"\n                ")]),t._v(" "),o("el-tag",{attrs:{size:"mini"}},[t._v("\n                  "+t._s(t.$t("删除"))+"\n                ")])],1):o("div",[e.row.permission_condition1?o("el-tag",{attrs:{size:"mini"}},[t._v("\n                  "+t._s(t.$t("查看"))+"\n                ")]):t._e(),t._v(" "),e.row.permission_condition2?o("el-tag",{attrs:{size:"mini"}},[t._v("\n                  "+t._s(t.$t("删除"))+"\n                ")]):t._e(),t._v(" "),e.row.permission_condition3?o("el-tag",{attrs:{size:"mini"}},[t._v("\n                  "+t._s(t.$t("导入导出"))+"\n                ")]):t._e()],1)]),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[0===e.row.permission_type?o("div",[o("el-tag",{attrs:{size:"mini"}},[t._v("\n                  "+t._s(t.$t("查看"))+"\n                ")]),t._v(" "),o("el-tag",{attrs:{size:"mini"}},[t._v("\n                  "+t._s(t.$t("删除"))+"\n                ")])],1):o("div",[e.row.permission_condition1?o("el-tag",{attrs:{size:"mini"}},[t._v("\n                "+t._s(t.$t("查看"))+"\n                ")]):t._e(),t._v(" "),e.row.permission_condition2?o("el-tag",{attrs:{size:"mini"}},[t._v("\n                  "+t._s(t.$t("删除"))+"\n                ")]):t._e(),t._v(" "),e.row.permission_condition3?o("el-tag",{attrs:{size:"mini"}},[t._v("\n                  "+t._s(t.$t("导入导出"))+"\n                ")]):t._e()],1)])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:t.$t("范围")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[e.row.permission_student_switch?o("el-tag",{attrs:{size:"mini"}},[t._v("\n                "+t._s(t.$t("所有学生"))+"\n              ")]):t._e(),t._v(" "),e.row.permission_teacher_switch?o("el-tag",{attrs:{size:"mini"}},[t._v("\n                "+t._s(t.$t("所有老师"))+"\n              ")]):t._e(),t._v(" "),""!=e.row.permission_content?o("el-tag",{attrs:{size:"mini"}},[o("span",[t._v(t._s(t.$t("人数"))+": "+t._s(e.row.permission_content.split(",").length))])]):t._e(),t._v(" "),e.row.permission_student_switch||e.row.permission_teacher_switch||""!=e.row.permission_content?t._e():o("span",[t._v("--")])],1),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[e.row.permission_student_switch?o("el-tag",{attrs:{size:"mini"}},[t._v("\n                "+t._s(t.$t("所有学生"))+"\n              ")]):t._e(),t._v(" "),e.row.permission_teacher_switch?o("el-tag",{attrs:{size:"mini"}},[t._v("\n                "+t._s(t.$t("所有老师"))+"\n              ")]):t._e(),t._v(" "),""!=e.row.permission_content?o("el-tag",{attrs:{size:"mini"}},[o("span",[t._v(t._s(t.$t("人数"))+": "+t._s(e.row.permission_content.split(",").length))])]):t._e(),t._v(" "),e.row.permission_student_switch||e.row.permission_teacher_switch||""!=e.row.permission_content?t._e():o("span",[t._v("--")])],1)])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:t.$t("状态")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[o("my-enable",{attrs:{status:e.row.enable}})],1),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[o("my-enable",{attrs:{status:e.row.enable}})],1)])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",width:"120",label:t.$t("操作")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("i",{staticClass:"fa fa-edit color-success margin-right-5",on:{click:function(o){return t.editForm(o,e.row)}}}),t._v(" "),e.row.enable?o("i",{staticClass:"fa fa-stop-circle color-grand margin-right-5",on:{click:function(o){return t.enableForm(o,e.row,!1)}}}):t._e(),t._v(" "),e.row.enable?t._e():o("i",{staticClass:"fa fa-play-circle color-success margin-right-5",on:{click:function(o){return t.enableForm(o,e.row,!0)}}}),t._v(" "),o("i",{staticClass:"fa fa-trash color-danger",on:{click:function(o){return t.deleteForm(o,e.row)}}})]}}])})],1),t._v(" "),o("drawer-layout-right",{attrs:{tabindex:"1","append-to-body":!0,visible:t.drawerRole,size:"500px"},on:{changeDrawer:t.closeDialog}},[o("div",{attrs:{slot:"title"},slot:"title"},[o("div",{staticClass:"header-block padding-lr-10"},[o("span",{staticClass:"tab-class font-bold"},[o("i",{staticClass:"fa fa-file"}),t._v("\n            "+t._s(t.$t("创建权限组"))+"\n          ")])])]),t._v(" "),o("div",{staticClass:"color-muted",attrs:{slot:"content"},slot:"content"},[o("div",{staticClass:"color-muted margin-top-5"},[o("span",[o("label",{staticClass:"title-block-tag"}),t._v(" "),o("label",{staticClass:"title-block-text color-warning"},[t._v(t._s(t.$t("基础信息")))])])]),t._v(" "),o("div",{staticClass:"block-item-bg"},[o("el-form",{ref:"formRole",attrs:{model:t.form,rules:t.rules,"label-width":"60px"}},[o("el-form-item",{attrs:{label:t.$t("名称"),prop:"name"}},[o("el-input",{staticClass:"width-300",attrs:{size:"small"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("描述")}},[o("el-input",{staticClass:"width-300",attrs:{type:"textarea",row:"3",size:"small"},model:{value:t.form.des,callback:function(e){t.$set(t.form,"des",e)},expression:"form.des"}})],1)],1)],1),t._v(" "),o("div",{staticClass:"margin-top-20"},[o("div",{staticClass:"color-muted margin-top-5"},[o("span",[o("label",{staticClass:"title-block-tag"}),t._v(" "),o("label",{staticClass:"title-block-text color-warning"},[t._v(t._s(t.$t("权限类型")))])])]),t._v(" "),o("div",{staticClass:"block-item-bg font-size-12",staticStyle:{position:"relative"}},[o("div",[o("el-radio-group",{on:{change:t.changeFormType},model:{value:t.form.roleType,callback:function(e){t.$set(t.form,"roleType",e)},expression:"form.roleType"}},[o("el-radio",{attrs:{label:0}},[t._v(t._s(t.$t("表单使用")))]),t._v(" "),o("el-radio",{attrs:{label:1}},[t._v(t._s(t.$t("数据统计")))])],1)],1)])]),t._v(" "),1===t.form.roleType?o("div",{staticClass:"margin-top-20"},[o("div",{staticClass:"color-muted margin-top-5"},[o("span",[o("label",{staticClass:"title-block-tag"}),t._v(" "),o("label",{staticClass:"title-block-text color-warning"},[t._v(t._s(t.$t("操作权限")))])])]),t._v(" "),o("div",{staticClass:"block-item-bg font-size-12",staticStyle:{position:"relative"}},[o("div",[o("el-checkbox",{on:{change:t.changeFormOprLook},model:{value:t.form.roleOprLook,callback:function(e){t.$set(t.form,"roleOprLook",e)},expression:"form.roleOprLook"}},[o("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("查看")))])]),t._v(" "),o("el-checkbox",{on:{change:t.changeFormOprDel},model:{value:t.form.roleOprDel,callback:function(e){t.$set(t.form,"roleOprDel",e)},expression:"form.roleOprDel"}},[o("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("删除")))])]),t._v(" "),o("el-checkbox",{on:{change:t.changeFormOprSubmit},model:{value:t.form.roleOprImOrEx,callback:function(e){t.$set(t.form,"roleOprImOrEx",e)},expression:"form.roleOprImOrEx"}},[o("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("导入导出")))])])],1)])]):t._e(),t._v(" "),o("div",{staticClass:"margin-top-20"},[o("div",{staticClass:"color-muted margin-top-5"},[o("span",[o("label",{staticClass:"title-block-tag"}),t._v(" "),o("label",{staticClass:"title-block-text color-warning"},[t._v(t._s(t.$t("权限成员")))])])]),t._v(" "),o("div",{staticClass:"block-item-bg font-size-12",staticStyle:{position:"relative"}},[o("div",[o("div",[o("span",[t._v(t._s(t.$t("成员范围"))+": ")])]),t._v(" "),o("div",[o("el-checkbox",{on:{change:t.changeFormStudent},model:{value:t.form.roleStudents,callback:function(e){t.$set(t.form,"roleStudents",e)},expression:"form.roleStudents"}},[o("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("所有学生")))])]),t._v(" "),o("el-checkbox",{on:{change:t.changeFormTeacher},model:{value:t.form.roleTeachers,callback:function(e){t.$set(t.form,"roleTeachers",e)},expression:"form.roleTeachers"}},[o("span",{staticClass:"font-size-12"},[t._v(t._s(t.$t("所有老师")))])])],1)]),t._v(" "),o("div",{staticClass:"margin-top-10"},[o("div",[o("span",[t._v(t._s(t.$t("组织范围"))+": ")])]),t._v(" "),o("div",{staticClass:"margin-top-10"},[o("el-popover",{attrs:{"popper-class":"custom-popper-class-form",placement:"top",width:"700",trigger:"click"},on:{show:function(e){return t.handleShowTeacher(1)}}},[o("div",[o("teacher-tree-and-list-no-page",{ref:"popverTeacherRef",attrs:{"user-type":"user","group-id":t.form.id,"sel-arr":t.form.permissionContentArray,"set-type":"check"},on:{select:function(e){return t.handleSelUser(e,1)}}})],1),t._v(" "),o("el-button",{attrs:{slot:"reference",type:"success",plain:"",size:"small"},on:{click:function(e){return t.loadingShow(1)}},slot:"reference"},[1==t.refreshTeacherStatus?o("i",{staticClass:"fa fa-refresh fa-spin"}):t._e(),t._v("\n                    "+t._s(t.$t("教师"))+"\n                  ")])],1),t._v(" "),o("el-popover",{attrs:{"popper-class":"custom-popper-class-form",placement:"top",width:"700",trigger:"click"},on:{show:function(e){return t.handleShowTeacher(2)}}},[o("div",[o("student-tree-and-list-no-page",{ref:"popverStudentRef",attrs:{"group-id":t.form.id,"sel-arr":t.form.permissionContentArray,"set-type":"check"},on:{select:function(e){return t.handleSelUser(e,2)}}})],1),t._v(" "),o("el-button",{attrs:{slot:"reference",type:"success",plain:"",size:"small"},on:{click:function(e){return t.loadingShow(2)}},slot:"reference"},[1==t.refreshStudentStatus?o("i",{staticClass:"fa fa-refresh fa-spin"}):t._e(),t._v("\n                    "+t._s(t.$t("学生"))+"\n                  ")])],1),t._v(" "),o("span",[t._v(t._s(t.$t("人数"))+": "+t._s(t.approverUsers.length))])],1)])])])]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-row",[o("el-col",{attrs:{span:24}},[o("div",{staticClass:"text-right padding-lr-10"},[o("el-button",{attrs:{size:"mini"},on:{click:t.cancelDrawDialog}},[t._v(t._s(t.$t("取消")))]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"success",loading:t.btnLoading},on:{click:t.okFormDrawDialog}},[t._v(t._s(t.$t("保存")))])],1)])],1)],1)])],1)}),[],!1,null,"313a5c80",null);e.default=component.exports;installComponents(component,{MyEnable:o(1304).default,TeacherTreeAndListNoPage:o(1305).default,StudentTreeAndListNoPage:o(1311).default,DrawerLayoutRight:o(236).default})},1560:function(t,e,o){"use strict";o.r(e);o(360),o(107);var n=o(76),r=o(236),l=o(1309),c=o(7),d=o(6),m={name:"myFormSetNotice",components:{MyEnable:o(1304).default,DrawerLayoutRight:r.default},mixins:[n.a,l.a],props:{data:{type:Array,default:function(){return[]}},formId:Object},computed:{},data:function(){return{drawerRole:!1,subTitle:"",btnLoading:!1,refreshTeacherStatus:!1,refreshStudentStatus:!1,approverUsers:[],form:{id:"",formId:"",noticeCondition1:!1,noticeCondition2:!1,noticeCondition3:!1,noticeUserId:"",noticeUserIdArr:[],noticeTitle:"",noticeContent:""}}},methods:{addRole:function(){this.drawerRole=!0},changeFormType:function(data){this.form.roleType=data},changeFormOprLook:function(data){this.form.roleOprLook=data},changeFormOprDel:function(data){this.form.roleOprDel=data},changeFormOprSubmit:function(data){this.form.roleOprSubmit=data},changeFormTeacher:function(data){this.form.roleTeachers=data},changeFormStudent:function(data){this.form.roleStudents=data},closeDialog:function(){this.form={id:"",formId:"",noticeCondition1:!1,noticeCondition2:!1,noticeCondition3:!1,noticeUserId:"",noticeUserIdArr:[],noticeTitle:"",noticeContent:""},this.subTitle="",this.approverUsers=[],this.drawerRole=!1},cancelDrawDialog:function(){this.drawerRole=!1},okFormDrawDialog:function(){var t,e=this;if(this.form.noticeCondition1||this.form.noticeCondition2||this.form.noticeCondition3)if(""!=this.form.noticeTitle||""!=this.form.noticeContent)if(0!=this.form.noticeUserIdArr.length){for(var o={formId:this.formId.id,noticeCondition1:this.form.noticeCondition1,noticeCondition2:this.form.noticeCondition2,noticeCondition3:this.form.noticeCondition3,noticeTitle:this.form.noticeTitle,noticeContent:this.form.noticeContent},n=[],i=0;i<this.form.noticeUserIdArr.length;i++)n.push(this.form.noticeUserIdArr[i].user_id);o.noticeUserId=n.join(),""!=this.form.id&&(o.id=this.form.id),t=c.a.server_form_template_notice_save,o=this.$qs.stringify(o),this.btnLoading=!0,this.$axios.post(t,o).then((function(t){200==t.data.code?(e.drawerRole=!1,e.initParent(),Object(d.b)(t.data.desc)):Object(d.a)(t.data.desc),e.btnLoading=!1}))}else Object(d.c)(this.$t("请设置推送人"));else Object(d.c)(this.$t("请设置内容信息"));else Object(d.c)(this.$t("请设置触发条件"))},initParent:function(){this.$emit("init")},editForm:function(t,data){this.form={id:data.id,formId:"",noticeCondition1:data.notice_condition1,noticeCondition2:data.notice_condition2,noticeCondition3:data.notice_condition3,noticeTitle:data.notice_title,noticeContent:data.notice_content};var e=[];if(""!=data.notice_user_id){for(var o=JSON.parse(data.notice_user_id),i=0;i<o.length;i++)e.push({user_id:o[i]});this.form.noticeUserIdArr=e,this.approverUsers=e}this.drawerRole=!0},deleteForm:function(t,data){var e=this,o={id:data.id};o=this.$qs.stringify(o),this.btnLoading=!0,this.$axios.post(c.a.server_form_template_notice_del,o).then((function(t){200==t.data.code?(e.drawerRole=!1,e.initParent(),Object(d.b)(t.data.desc)):Object(d.a)(t.data.desc),e.btnLoading=!1}))},copyForm:function(t,data){},enableForm:function(t,data,e){var o=this,n={id:data.id,enable:e};n=this.$qs.stringify(n),this.btnLoading=!0,this.$axios.post(c.a.server_form_template_permission_enable,n).then((function(t){200==t.data.code?(o.drawerRole=!1,o.initParent(),Object(d.b)(t.data.desc)):Object(d.a)(t.data.desc),o.btnLoading=!1}))},loadingShow:function(t){var e=this,o=null;switch(clearTimeout(o),t){case 1:this.refreshTeacherStatus=!0,o=setTimeout((function(){e.refreshTeacherStatus=!1,clearTimeout(o)}),1e3);break;case 2:this.refreshStudentStatus=!0,o=setTimeout((function(){e.refreshStudentStatus=!1,clearTimeout(o)}),1e3)}},handleShowTeacher:function(t){var e=this;setTimeout((function(){1==t&&e.$refs.popverTeacherRef._handleOpen()}),800)},handleSelUser:function(data,t){this.$set(this.form,"noticeUserIdArr",data),this.approverUsers=data}}},f=(o(1675),o(10)),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"padding-lr-10 padding-tb-10"},[o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.addRole}},[t._v("\n      "+t._s(t.$t("创建消息"))+"\n    ")])],1),t._v(" "),o("el-table",{ref:"refTable",staticStyle:{width:"100%"},attrs:{data:t.data,"header-cell-class-name":"custom-table-cell-bg",size:"medium","max-height":t.tableHeight15.height}},[o("el-table-column",{attrs:{align:"center",label:t.$t("创建日期")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[t._v(t._s(t.$moment(e.row.create_time).format("YYYY-MM-DD HH:mm")))]),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n            "+t._s(t.$moment(e.row.create_time).format("YYYY-MM-DD HH:mm"))+"\n          ")])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:t.$t("触发条件")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[e.row.notice_condition1?o("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("提交")))]):t._e(),t._v(" "),e.row.notice_condition2?o("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("通过")))]):t._e(),t._v(" "),e.row.notice_condition3?o("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("驳回")))]):t._e()],1),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[e.row.notice_condition1?o("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("提交")))]):t._e(),t._v(" "),e.row.notice_condition2?o("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("通过")))]):t._e(),t._v(" "),e.row.notice_condition3?o("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("驳回")))]):t._e()],1)])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:t.$t("推送人数")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[""!=e.row.notice_user_id?o("span",[t._v(t._s(e.row.notice_user_id.split(",").length))]):t._e()]),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[""!=e.row.notice_user_id?o("span",[t._v(t._s(e.row.notice_user_id.split(",").length))]):t._e()])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",width:"120",label:t.$t("操作")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("i",{staticClass:"fa fa-edit color-success margin-right-5",on:{click:function(o){return t.editForm(o,e.row)}}}),t._v(" "),o("i",{staticClass:"fa fa-trash color-danger",on:{click:function(o){return t.deleteForm(o,e.row)}}})]}}])})],1),t._v(" "),o("drawer-layout-right",{attrs:{tabindex:"1","append-to-body":!0,visible:t.drawerRole,size:"500px"},on:{close:t.closeDialog,changeDrawer:t.closeDialog}},[o("div",{attrs:{slot:"title"},slot:"title"},[o("div",{staticClass:"header-block padding-lr-10"},[o("span",{staticClass:"tab-class font-bold"},[o("i",{staticClass:"fa fa-file"}),t._v("\n          "+t._s(t.$t("创建推送"))+"\n        ")])])]),t._v(" "),o("div",{staticClass:"color-muted",attrs:{slot:"content"},slot:"content"},[o("div",{staticClass:"color-muted margin-top-5"},[o("span",[o("label",{staticClass:"title-block-tag"}),t._v(" "),o("label",{staticClass:"title-block-text color-warning"},[t._v(t._s(t.$t("触发条件")))])])]),t._v(" "),o("div",{staticClass:"block-item-bg"},[o("div",[o("span",[t._v(t._s(t.$t("表单"))+": ")]),t._v(" "),o("label",{staticClass:"color-muted font-size-12"},[t._v(t._s(t.$t("当前表单")))])]),t._v(" "),o("div",{staticClass:"margin-top-10"},[o("span",[t._v(t._s(t.$t("条件"))+": ")]),t._v(" "),o("span",[o("el-checkbox",{model:{value:t.form.noticeCondition1,callback:function(e){t.$set(t.form,"noticeCondition1",e)},expression:"form.noticeCondition1"}},[o("span",{staticClass:"color-muted font-size-12"},[t._v(t._s(t.$t("提交")))])]),t._v(" "),o("el-checkbox",{model:{value:t.form.noticeCondition2,callback:function(e){t.$set(t.form,"noticeCondition2",e)},expression:"form.noticeCondition2"}},[o("span",{staticClass:"color-muted font-size-12"},[t._v(t._s(t.$t("通过")))])]),t._v(" "),o("el-checkbox",{model:{value:t.form.noticeCondition3,callback:function(e){t.$set(t.form,"noticeCondition3",e)},expression:"form.noticeCondition3"}},[o("span",{staticClass:"color-muted font-size-12"},[t._v(t._s(t.$t("驳回")))])])],1)])]),t._v(" "),o("div",{staticClass:"margin-top-20"},[o("div",{staticClass:"color-muted margin-top-5"},[o("span",[o("label",{staticClass:"title-block-tag"}),t._v(" "),o("label",{staticClass:"title-block-text color-warning"},[t._v(t._s(t.$t("推送人")))])])]),t._v(" "),o("div",{staticClass:"block-item-bg font-size-12",staticStyle:{position:"relative"}},[o("div",[o("span",{staticClass:"color-muted"},[t._v(t._s(t.$t("选择范围"))+": ")]),t._v(" "),o("span",[o("el-popover",{attrs:{"popper-class":"custom-popper-class-form",placement:"left",width:"700",trigger:"click"},on:{show:function(e){return t.handleShowTeacher(1)}}},[o("div",[o("teacher-tree-and-list-no-page",{ref:"popverTeacherRef",attrs:{"user-type":"user","group-id":t.form.id,"sel-arr":t.form.noticeUserIdArr,"set-type":"check"},on:{select:function(e){return t.handleSelUser(e,1)}}})],1),t._v(" "),o("el-button",{attrs:{slot:"reference",type:"success",plain:"",size:"small"},on:{click:function(e){return t.loadingShow(1)}},slot:"reference"},[1==t.refreshTeacherStatus?o("i",{staticClass:"fa fa-refresh fa-spin"}):t._e(),t._v("\n                  "+t._s(t.$t("选择"))+"\n                  "),o("span",{staticClass:"color-muted"},[t._v("("+t._s(t.$t("人数"))+": "+t._s(t.approverUsers.length)+")")])])],1)],1)])])]),t._v(" "),o("div",{staticClass:"margin-top-20"},[o("div",{staticClass:"color-muted margin-top-5"},[o("span",[o("label",{staticClass:"title-block-tag"}),t._v(" "),o("label",{staticClass:"title-block-text color-warning"},[t._v(t._s(t.$t("内容设置")))])])]),t._v(" "),o("div",{staticClass:"block-item-bg font-size-12",staticStyle:{position:"relative"}},[o("div",[o("div",{staticClass:"font-size-12"},[o("div",{staticClass:"color-muted"},[t._v(t._s(t.$t("消息标题")))]),t._v(" "),o("div",{staticClass:"margin-top-5"},[o("el-input",{model:{value:t.form.noticeTitle,callback:function(e){t.$set(t.form,"noticeTitle",e)},expression:"form.noticeTitle"}})],1)]),t._v(" "),o("div",{staticClass:"font-size-12 margin-top-20"},[o("div",{staticClass:"color-muted"},[t._v(t._s(t.$t("消息内容")))]),t._v(" "),o("div",{staticClass:"margin-top-5"},[o("el-input",{attrs:{type:"textarea",rows:10},model:{value:t.form.noticeContent,callback:function(e){t.$set(t.form,"noticeContent",e)},expression:"form.noticeContent"}})],1)])])])])]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-row",[o("el-col",{attrs:{span:24}},[o("div",{staticClass:"text-right padding-lr-10"},[o("el-button",{attrs:{size:"mini"},on:{click:t.cancelDrawDialog}},[t._v(t._s(t.$t("取消")))]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"success",loading:t.btnLoading},on:{click:t.okFormDrawDialog}},[t._v(t._s(t.$t("保存")))])],1)])],1)],1)])],1)}),[],!1,null,"9aa1cd6c",null);e.default=component.exports;installComponents(component,{TeacherTreeAndListNoPage:o(1305).default,DrawerLayoutRight:o(236).default})},1673:function(t,e,o){"use strict";var n=o(1383);o.n(n).a},1674:function(t,e,o){(e=o(30)(!1)).push([t.i,".form-set-main[data-v-313a5c80]{box-shadow:0 0 4px #dcdfe6;padding:0}.form-set-left[data-v-313a5c80],.form-set-main[data-v-313a5c80]{border-right:1px solid #dcdfe6}.form-set-left[data-v-313a5c80]{width:200px;height:100%;background:#f8f8f8}.form-set-right[data-v-313a5c80]{margin-left:200px;height:100%}.form-set-menu-item[data-v-313a5c80]{font-size:12px;text-align:center;height:40px;line-height:40px}.form-set-menu-item-active[data-v-313a5c80]{background:#3e8db8;color:#fff}.header-block[data-v-313a5c80]{height:40px;line-height:40px}.tab-class[data-v-313a5c80]{cursor:default;padding:10px}.title-block-tag[data-v-313a5c80]{display:inline-block;height:20px;width:3px;background:#e6a23c;font-weight:700;border-radius:3px}.title-block-text[data-v-313a5c80]{font-weight:700;position:relative;top:-5px}.block-item-bg[data-v-313a5c80]{border-radius:5px;background:#fff;padding:10px}",""]),t.exports=e},1675:function(t,e,o){"use strict";var n=o(1384);o.n(n).a},1676:function(t,e,o){(e=o(30)(!1)).push([t.i,".form-set-main[data-v-9aa1cd6c]{box-shadow:0 0 4px #dcdfe6;padding:0}.form-set-left[data-v-9aa1cd6c],.form-set-main[data-v-9aa1cd6c]{border-right:1px solid #dcdfe6}.form-set-left[data-v-9aa1cd6c]{width:200px;height:100%;background:#f8f8f8}.form-set-right[data-v-9aa1cd6c]{margin-left:200px;height:100%}.form-set-menu-item[data-v-9aa1cd6c]{font-size:12px;text-align:center;height:40px;line-height:40px}.form-set-menu-item-active[data-v-9aa1cd6c]{background:#3e8db8;color:#fff}.header-block[data-v-9aa1cd6c]{height:40px;line-height:40px}.tab-class[data-v-9aa1cd6c]{cursor:default;padding:10px}.title-block-tag[data-v-9aa1cd6c]{display:inline-block;height:20px;width:3px;background:#e6a23c;font-weight:700;border-radius:3px}.title-block-text[data-v-9aa1cd6c]{font-weight:700;position:relative;top:-5px}.block-item-bg[data-v-9aa1cd6c]{border-radius:5px;background:#fff;padding:10px}",""]),t.exports=e},1677:function(t,e,o){"use strict";var n=o(1385);o.n(n).a},1678:function(t,e,o){(e=o(30)(!1)).push([t.i,".form-set-main[data-v-9973bee0]{box-shadow:0 0 4px #dcdfe6}.form-set-left[data-v-9973bee0],.form-set-main[data-v-9973bee0]{border-right:1px solid #dcdfe6}.form-set-left[data-v-9973bee0]{width:200px;height:100%;background:#f8f8f8}.form-set-right[data-v-9973bee0]{margin-left:201px}.form-set-menu-item[data-v-9973bee0]{font-size:12px;text-align:center;height:40px;line-height:40px}.form-set-menu-item-active[data-v-9973bee0]{background:#3e8db8;color:#fff}.title-block-tag[data-v-9973bee0]{display:inline-block;height:20px;width:3px;background:#e6a23c;font-weight:700;border-radius:3px}.title-block-text[data-v-9973bee0]{font-weight:700;position:relative;top:-5px}.item-tag-block[data-v-9973bee0]{height:25px;line-height:25px;background:#8cc5ff;border-radius:5px;padding:0 10px;color:#909399}",""]),t.exports=e},1679:function(t,e,o){"use strict";var n=o(1386);o.n(n).a},1680:function(t,e,o){(e=o(30)(!1)).push([t.i,".form-set-main[data-v-859dda9e]{box-shadow:0 0 4px #dcdfe6;border-right:1px solid #dcdfe6}.form-set-left[data-v-859dda9e]{margin-right:310px}.form-set-left[data-v-859dda9e],.form-set-right[data-v-859dda9e]{background:#f8f8f8;height:100%;box-shadow:0 0 4px #dcdfe6}.form-set-right[data-v-859dda9e]{width:300px}.form-set-menu-item[data-v-859dda9e]{font-size:12px;text-align:center;height:40px;line-height:40px}.form-set-menu-item-active[data-v-859dda9e]{background:#3e8db8;color:#fff}.title-block-tag[data-v-859dda9e]{display:inline-block;height:20px;width:3px;background:#e6a23c;font-weight:700;border-radius:3px}.title-block-text[data-v-859dda9e]{font-weight:700;position:relative;top:-5px}.item-tag-block[data-v-859dda9e]{height:25px;line-height:25px;background:#8cc5ff;border-radius:5px;padding:0 10px;color:#909399}.flow-fixed-block[data-v-859dda9e]{width:40px;height:40px;line-height:40px;border-radius:100%;margin:20px auto 0;color:#fff}.flow-item-block[data-v-859dda9e]{border-radius:5px;background:#fff;min-height:50px;width:350px;margin:20px auto;box-shadow:0 0 4px #dcdfe6}.flow-item-title-block[data-v-859dda9e]{position:relative;height:30px;line-height:30px;padding:0 10px;color:#fff;text-align:left;border-top-left-radius:5px;border-top-right-radius:5px}.flow-item-close-block[data-v-859dda9e]{position:absolute;right:-10px;top:-10px}.flow-user-count-tag[data-v-859dda9e]{position:relative;display:inline-block;width:20px;height:20px;line-height:20px;border-radius:100%;background:#f56c6c;text-align:center;font-size:12px;color:#fff;top:-5px}.header-block[data-v-859dda9e]{height:40px;line-height:40px}.tab-class[data-v-859dda9e]{cursor:default;padding:10px}",""]),t.exports=e},1681:function(t,e,o){"use strict";var n=o(1387);o.n(n).a},1682:function(t,e,o){(e=o(30)(!1)).push([t.i,".title-block-tag[data-v-07e46af2]{display:inline-block;height:20px;width:3px;background:#e6a23c;font-weight:700;border-radius:3px}.title-block-text[data-v-07e46af2]{font-weight:700;position:relative;top:-5px}.block-item-bg[data-v-07e46af2]{border-radius:5px;background:#fff;padding:10px}.upload-block-class[data-v-07e46af2]{text-align:center;font-size:12px;background:#000;width:100px;padding:5px 0;color:#fff}.item-img-class[data-v-07e46af2]{height:50px;width:50px}.item-img-set-class[data-v-07e46af2]{height:100px;width:100px}.header-block[data-v-07e46af2]{height:40px;line-height:40px}.tab-class[data-v-07e46af2]{cursor:default;padding:10px}",""]),t.exports=e},1959:function(t,e,o){"use strict";o.r(e);o(65),o(107);var n=o(76),r=o(7),l=o(6),c=(o(86),o(1256)),d=o(236),m=o(238),f=o(1262),h=o(1540),v={components:{MyFormFlow:o(1544).default,MyFormSet:h.default,MyElTree:f.default,UploadSquare:m.default,DrawerLayoutRight:d.default,MySelect:c.default},mixins:[n.a,{data:function(){return{rules:{name:[{required:!0,message:this.$t("请输入名称"),trigger:"blur"}],app:[{required:!0,message:this.$t("请选择应用"),trigger:"change"}],type:[{required:!0,message:this.$t("请选择类型"),trigger:"change"}]}}}}],data:function(){return{tableData:[],collegeList:[],flowVersionData:[],apps:[],types:[],flowListData:[],formFieldList:[],flowFormData:{},subTitle:"",collegeData:"",searchAppId:"",searchKey:"",searchType:"",searchStatus:"",detailData:"",serverImg:"",uploadFileUrl:r.a.upload_file,activeName:"form",dialogLoading:!1,formLoading:!1,dialogApp:!1,visibleConfim:!1,drawerVisible:!1,drawerForm:!1,btnLoading:!1,btnNewLoading:!1,showFooter:!0,drawerVersion:!1,versionStatus:"",serverDataItem:"",serverDataIndex:"",form:{id:"",name:"",type:"",app:"",icon:"",remarks:"",scope:!0,evaluate:!0,recommend:!1},formOption:{form:{inline:!1,labelPosition:"right",size:"mini",labelWidth:"125px",hideRequiredAsterisk:!1,showMessage:!0,inlineMessage:!1}}}},created:function(){this.init(),this.initApp()},methods:{init:function(){var t=this,e={page:this.page,num:this.num,appletId:this.$route.query.id?this.$route.query.id:this.searchAppId,formType:this.searchType,enable:this.searchStatus,searchKey:this.searchKey};this.$axios.get(r.a.server_list_page,{params:e}).then((function(e){e.data.data&&(t.tableData=e.data.data.list,t.total=e.data.data.totalCount,t.num=e.data.data.num,t.page=e.data.data.currentPage)}))},initApp:function(){var t=this;this.$axios.get(r.a.server_applet_all_list,{params:{}}).then((function(e){if(e.data.data){for(var o=[],i=0;i<e.data.data.length;i++)o.push({text:e.data.data[i].appletName,value:e.data.data[i].id+"",label:e.data.data[i].appletName,enable:e.data.data[i].enable});t.apps=o}}))},initVersion:function(t){var e=this,o={page:1,num:9999,formId:this.serverDataItem.id};this.$axios.get(r.a.server_form_template_form_process_page,{params:o}).then((function(o){if(o.data.data){if("current"==t)for(var i=0;i<o.data.data.list.length;i++){if(o.data.data.list[i].id==e.serverDataItem.form_process_id){var n=JSON.parse(o.data.data.list[i].form_process),r="";e.flowListData=[];for(var l=0;l<n.length;l++){var c=[];"handle"==n[l].ntype?r="audit":"cc"==n[l].ntype&&(r="send");for(var d={type:n[l].nChildType,extra:r,name:n[l].nname,hType:n[l].htype,hName:n[l].hname,andor:n[l].andor,waitName:n[l].sign,allowShow:n[l].agreed1,allowMuti:n[l].agreed2,rejectShow:n[l].notagreed1,rejectMuti:n[l].notagreed2,transferShow:n[l].trans1,transferMuti:n[l].trans2,right1:n[l].right1?n[l].right1:[],right2:n[l].right2?n[l].right2:[]},m=0;m<n[l].hid.length;m++)c.push({user_id:n[l].hid[m],real_name:n[l].hname[m]});d.users=c,e.flowListData.push(d)}var f={id:o.data.data.list[i].id,auditType:"",name:o.data.data.list[i].version_name,allowBack:o.data.data.list[i].allow_revoke,urge:o.data.data.list[i].allow_urge,autoAudit:o.data.data.list[i].allow_auto,merge:o.data.data.list[i].allow_merge};e.flowFormData=f}}e.flowVersionData=o.data.data.list}}))},sizeChange:function(t){this.page=1,this.num=t,this.init()},currentPage:function(t){this.page=t,this.init()},jumpPage:function(data){this.page=data,this.init()},nodeClick:function(data){this.searchAppId=data.id,this.page=1,this.init()},search:function(data){this.searchKey=data.input,this.page=1,this.init(data)},addInfo:function(){this.activeName="form",this.drawerVisible=!0},handleTypeChange:function(t,e){1==e?this.searchType=t:2==e?this.searchStatus=t:3==e?this.form.type=t:4==e&&(this.form.app=t)},handleClick:function(t){this.activeName=t,"set"==t?this.showFooter=!1:"form"==t?(this.openedForm(),this.showFooter=!0):this.showFooter=!0},deleteInfo:function(t){this.form.id=t.id,this.visibleConfim=!0},setInfo:function(t){this.detailData=t,this.form={id:t.id,name:t.form_name,type:t.form_type+"",app:t.applet_id+"",icon:t.form_logo,remarks:t.des,scope:t.allow_score,evaluate:t.allow_appraise,recommend:t.recommend},this.drawerVisible=!0},statusInfo:function(t,e){var o=this,n={id:t.id,enable:e};n=this.$qs.stringify(n),this.$axios.post(r.a.server_list_enable,n).then((function(t){200==t.data.code?(o.init(),Object(l.b)(t.data.desc)):Object(l.a)(t.data.desc)}))},formInfo:function(t,e){this.serverDataItem=t,this.serverDataIndex=e,this.initVersion("current"),this.drawerForm=!0},openedForm:function(){var t=this;this.formLoading=!0,setTimeout((function(){if(t.serverDataItem.form_content){var e=JSON.parse(t.serverDataItem.form_content);t.$refs.designer.setRule(e.rule),t.$refs.designer.setOption(e.option)}else t.$refs.designer.setRule([]),t.$refs.designer.setOption(t.formOption);t.$refs.designer.removeMenuItem("span"),t.formLoading=!1}),800)},closeVersionDialog:function(t){this.flowVersionData=[],this.drawerVersion=t},closeDialog:function(t){this.form={id:"",name:"",type:"",app:"",icon:"",remarks:"",scope:!0,evaluate:!0,recommend:!1},this.flowListData=[],this.flowFormData={auditType:"",name:"",allowBack:!1,urge:!1,autoAudit:!1,merge:!1},this.subTitle="",this.versionStatus="",this.resetCasadeSelector("SelectorCollege"),this.$refs.form&&this.$refs.form.resetFields(),this.$refs.designer&&(this.$refs.designer.setRule([]),this.$refs.designer.setOption(this.formOption)),this.drawerVisible=t,this.serverDataItem="",this.serverDataIndex="",this.activeName="form",this.showFooter=!0,this.init(),this.btnLoading=!1,this.drawerForm=!1},cancelVersionDrawDialog:function(){this.drawerVersion=!1},cancelDrawDialog:function(){this.detailData="",this.drawerVisible=!1,this.drawerForm=!1},handleCancelChange:function(data){this.visibleConfim=!1},handleOkChange:function(data){var t=this;this.dialogLoading=!0;var e,o={id:this.form.id};e=r.a.server_list_del,o=this.$qs.stringify(o),this.$axios.post(e,o).then((function(e){200==e.data.code?(t.init(),Object(l.b)(e.data.desc)):Object(l.a)(e.data.desc),t.visibleConfim=!1,t.dialogLoading=!1}))},uploadFileSuccess:function(t,e){200==t.code&&(this.form.icon=t.data.url)},versionClick:function(){this.initVersion(),this.drawerVersion=!0},okAppDrawDialog:function(){var t=this,e="";this.$refs.form.validate((function(o){if(o){if(""==t.form.icon)return void Object(l.c)(t.$t("请设置图标"));t.dialogLoading=!0;var n={formName:t.form.name,appletId:t.form.app,formType:t.form.type,formLogo:t.form.icon,allowAppraise:t.form.evaluate,allowScore:t.form.scope,recommend:t.form.recommend,des:t.form.remarks};""!=t.form.id&&(n.id=t.form.id),e=r.a.server_list_save,n=t.$qs.stringify(n),t.$axios.post(e,n).then((function(e){200==e.data.code?(t.drawerVisible=!1,t.init(),Object(l.b)(e.data.desc)):Object(l.a)(e.data.desc),t.dialogLoading=!1}))}}))},sendTempShop:function(){var t,e=this,o={id:this.serverDataItem.id,content:JSON.stringify(this.$refs.designer.getRule())};t=r.a.server_form_template_shop,o=this.$qs.stringify(o),this.btnLoading=!0,this.$axios.post(t,o).then((function(t){200==t.data.code?(e.init(),Object(l.b)(t.data.desc)):Object(l.a)(t.data.desc),e.btnLoading=!1}))},okFormDrawDialog:function(t){var e=this,o="",n={};if("form"==this.activeName){n={rule:this.$refs.designer.getRule(),option:this.$refs.designer.getOption()};var c={id:this.serverDataItem.id,content:JSON.stringify(n)};o=r.a.server_form_template_update,c=this.$qs.stringify(c),this.btnLoading=!0,this.$axios.post(o,c).then((function(t){200==t.data.code?(e.init(),e.$set(e.serverDataItem,"form_content",JSON.stringify(n)),Object(l.b)(t.data.desc)):Object(l.a)(t.data.desc),e.btnLoading=!1}))}else if("flow"==this.activeName){var d=this.$refs.flow.flowData,m=this.$refs.flow.form,f="",h="",v=[],_=[],C=[],w={};if(0==d.length)return void Object(l.c)(this.$t("请设置流程信息！"));if(""==m.name)return void Object(l.c)(this.$t("流程属性中未设置流程名称！"));for(var i=0;i<d.length;i++){if(v=[],_=[],"audit"==d[i].extra?f="handle":"send"==d[i].extra&&(f="cc"),1==d[i].type||4==d[i].type){h="AnyUser";for(var y=d[i].users,x=0;x<y.length;x++)v.push(y[x].user_id),_.push(y[x].real_name)}else if(2==d[i].type||5==d[i].type)h=d[i].hType;else if(3==d[i].type||6==d[i].type){h="CustomUser";for(var k=d[i].users,$=0;$<k.length;$++)v.push(k[$].user_id),_.push(k[$].real_name)}var S={ntype:f,nChildType:d[i].type,nname:d[i].name,horder:i+1,htype:h,hid:v,hname:_,andor:d[i].andor,sign:d[i].waitName,agreed1:d[i].allowShow,agreed2:d[i].allowMuti,notagreed1:d[i].rejectShow,notagreed2:d[i].rejectMuti,trans1:d[i].transferShow,trans2:d[i].transferMuti,right1:d[i].right1,right2:d[i].right2};C.push(S)}w={versionName:m.name,formId:this.serverDataItem.id,formProcess:JSON.stringify(C),allowRevoke:m.allowBack,allowUrge:m.urge,allowAuto:m.autoAudit,allowMerge:m.merge},""!=m.id&&"new"!=t&&(w.id=m.id),"new"==t||"edit"==this.versionStatus?w.current=!1:w.current=!0,w=this.$qs.stringify(w),this.btnLoading=!0,this.$axios.post(r.a.server_form_template_form_process_save,w,{loading:!1}).then((function(t){200==t.data.code?Object(l.b)(t.data.desc):Object(l.a)(t.data.desc),e.btnLoading=!1}))}this.activeName},editFlowInfo:function(data){this.drawerVersion=!1,this.versionStatus="edit",this.serverDataItem.form_process_id=data.id,this.initVersion("current")},delFlowInfo:function(data){var t=this,e={id:data.id};e=this.$qs.stringify(e),this.$axios.post(r.a.server_form_template_form_process_del,e).then((function(e){200==e.data.code?(t.initVersion(),Object(l.b)(e.data.desc)):Object(l.a)(e.data.desc)}))},currentFlowInfo:function(data){var t=this,e={id:this.serverDataItem.id,processId:data.id};this.versionStatus="",e=this.$qs.stringify(e),this.$axios.post(r.a.server_form_template_form_process_current,e).then((function(e){200==e.data.code?(t.tableData[t.serverDataIndex].form_process_id=data.id,t.serverDataItem.form_process_id=data.id,t.initVersion("current"),Object(l.b)(e.data.desc)):Object(l.a)(e.data.desc)}))}},watch:{$route:function(t,e){var o=this;this.$nextTick((function(){o.searchKey="",o.searchAppId="",o.page=1,o.$refs.myElTree.initInfo(),o.init()}))}}},_=(o(1681),o(10)),component=Object(_.a)(v,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",[o("layout-lr",[o("div",{attrs:{slot:"left"},slot:"left"},[o("div",{staticClass:"color-muted font-size-12 padding-tb-5 margin-top-10"},[o("span",{staticClass:"layout-left-menu-title"},[t._v("应用设计")])]),t._v(" "),o("my-el-tree",{ref:"myElTree",attrs:{type:"100","extra-type":t.$route.query.appName},on:{"node-click":t.nodeClick,"all-click":t.nodeClick}})],1),t._v(" "),o("div",{attrs:{slot:"right"},slot:"right"},[o("div",{staticClass:"layout-top-tab margin-top-5"},[o("el-row",[o("el-col",{attrs:{span:8}},[o("div",[o("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.addInfo(e)}}},[t._v(t._s(t.$t("创建服务")))]),t._v(" "),t.$route.query.id?[o("span",[t._v(t._s(t.$route.query.appName))])]:t._e()],2)]),t._v(" "),o("el-col",{staticClass:"text-right",attrs:{span:16}},[o("div",{staticClass:"layout-inline"},[o("my-select",{staticClass:"layout-item width-150",attrs:{size:"small",placeholder:t.$t("类型"),options:t.filterAppServerType,clearable:!0},on:{change:function(e){return t.handleTypeChange(e,1)}}}),t._v(" "),o("my-select",{staticClass:"layout-item width-150",attrs:{size:"small",placeholder:t.$t("状态"),options:t.filterAppManageStatus,clearable:!0},on:{change:function(e){return t.handleTypeChange(e,2)}}}),t._v(" "),o("my-input-button",{ref:"teacher width-150",attrs:{size:"small",plain:"","width-class":"width: 180px",type:"success",clearable:!0,placeholder:t.$t("名称")},on:{click:t.search}})],1)])],1)],1),t._v(" "),o("div",{staticClass:"margin-top-10"},[o("el-table",{ref:"refTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-class-name":"custom-table-cell-bg",size:"medium","max-height":t.tableHeight2.height}},[o("el-table-column",{attrs:{align:"center",label:t.$t("创建日期")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[t._v(t._s(t.$moment(e.row.create_time).format("YYYY-MM-DD")))]),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                      "+t._s(t.$moment(e.row.create_time).format("YYYY-MM-DD"))+"\n                    ")])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:t.$t("所属应用")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[t._v(t._s(e.row.applet_name))]),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                        "+t._s(e.row.applet_name)+"\n                      ")])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",prop:"form_name",label:t.$t("名称")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[t._v(t._s(e.row.form_name))]),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                        "+t._s(e.row.form_name)+"\n                      ")])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",prop:"appName",label:t.$t("类型")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[t._v(t._s(t.serverFormTypeInfo(e.row.form_type,"set")))]),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                        "+t._s(t.serverFormTypeInfo(e.row.form_type,"set"))+"\n                      ")])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",prop:"appName",label:t.$t("图标")},scopedSlots:t._u([{key:"default",fn:function(t){return[o("el-image",{staticClass:"table-cell-image-slot",attrs:{src:t.row.form_logo}},[o("div",{staticClass:"table-cell-image-slot",attrs:{slot:"error"},slot:"error"},[o("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"14px"}})])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",prop:"appName",label:t.$t("状态")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[e.row.enable?o("label",{staticClass:"color-success"},[t._v(t._s(t.$t("已发布")))]):t._e(),t._v(" "),e.row.enable?t._e():o("label",{staticClass:"color-warning"},[t._v(t._s(t.$t("待发布")))])]),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[e.row.enable?o("label",{staticClass:"color-success"},[t._v(t._s(t.$t("已发布")))]):t._e(),t._v(" "),e.row.enable?t._e():o("label",{staticClass:"color-warning"},[t._v(t._s(t.$t("待发布")))])])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",width:"120",label:t.$t("操作")},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.enable?o("i",{staticClass:"fa fa-stop-circle margin-right-5 color-warning",on:{click:function(o){return t.statusInfo(e.row,!1)}}}):t._e(),t._v(" "),0==e.row.enable?o("i",{staticClass:"fa fa-play-circle margin-right-5 color-success",on:{click:function(o){return t.statusInfo(e.row,!0)}}}):t._e(),t._v(" "),o("i",{staticClass:"fa fa-edit margin-right-5 color-grand",on:{click:function(o){return t.setInfo(e.row)}}}),t._v(" "),o("i",{staticClass:"fa fa-trash color-danger",on:{click:function(o){return t.deleteInfo(e.row)}}})]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",width:"60",label:t.$t("表单")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("i",{staticClass:"fa fa-cogs margin-right-5 color-grand",on:{click:function(o){return t.formInfo(e.row,e.$index)}}})]}}])})],1)],1),t._v(" "),o("div",{staticClass:"layout-right-footer text-right"},[o("my-pagination",{staticClass:"layout-pagination",attrs:{total:t.total,"current-page":t.page,"page-size":t.num},on:{currentPage:t.currentPage,sizeChange:t.sizeChange,jumpChange:t.jumpPage}})],1)])])],1),t._v(" "),o("drawer-layout-right",{attrs:{tabindex:"0",visible:t.drawerVisible,size:"600px",title:t.$t("服务设置")},on:{changeDrawer:t.closeDialog,"right-close":t.cancelDrawDialog}},[o("div",{staticClass:"color-muted",attrs:{slot:"content"},slot:"content"},[o("div",[o("div",{staticClass:"color-muted margin-top-5"},[o("span",[o("label",{staticClass:"title-block-tag"}),t._v(" "),o("label",{staticClass:"title-block-text color-warning"},[t._v(t._s(t.$t("服务设置")))])])]),t._v(" "),o("div",{staticClass:"block-item-bg font-size-12"},[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"60px"}},[o("el-form-item",{attrs:{label:t.$t("名称"),prop:"name"}},[o("el-input",{staticClass:"width-300",attrs:{size:"small"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("类型"),prop:"type"}},[o("my-select",{staticClass:"layout-item",attrs:{size:"small",placeholder:t.$t("类型"),"sel-value":t.form.type,options:t.filterAppServerType,"width-style":"300",clearable:!0},on:{change:function(e){return t.handleTypeChange(e,3)}}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("应用"),prop:"app"}},[o("my-select",{staticClass:"layout-item width-300",attrs:{size:"small",placeholder:t.$t("应用"),"sel-value":t.form.app,options:t.apps,"width-style":"300",clearable:!0},on:{change:function(e){return t.handleTypeChange(e,4)}}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("简介"),prop:"dept"}},[o("el-input",{staticClass:"custom-textarea-inner",staticStyle:{width:"500px",resize:"none"},attrs:{type:"textarea",autosize:{minRows:5},maxlength:"150","show-word-limit":""},model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks",e)},expression:"form.remarks"}})],1)],1)],1)]),t._v(" "),o("div",{staticClass:"margin-top-20"},[o("div",{staticClass:"color-muted margin-top-5"},[o("span",[o("label",{staticClass:"title-block-tag"}),t._v(" "),o("label",{staticClass:"title-block-text color-warning"},[t._v(t._s(t.$t("服务图标")))])])]),t._v(" "),o("div",{staticClass:"block-item-bg font-size-12",staticStyle:{position:"relative"}},[o("div",[o("el-image",{staticClass:"item-img-set-class",attrs:{src:t.form.icon}},[o("div",{staticClass:"margin-top-10 text-center",attrs:{slot:"error"},slot:"error"},[o("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"60px"}})])])],1),t._v(" "),o("div",{staticStyle:{position:"absolute",left:"10px",bottom:"12px"}},[o("upload-square",{attrs:{action:t.uploadFileUrl,"max-size":"8",data:{path:"applet"},accept:".png,.jpg,.jpeg"},on:{success:t.uploadFileSuccess}},[o("div",{staticClass:"upload-block-class"},[o("span",[t._v(t._s(t.$t("更换图标")))])])])],1),t._v(" "),o("div",{staticClass:"moon-clearfix"})])]),t._v(" "),o("div",{staticClass:"margin-top-20"},[o("div",{staticClass:"color-muted margin-top-5"},[o("span",[o("label",{staticClass:"title-block-tag"}),t._v(" "),o("label",{staticClass:"title-block-text color-warning"},[t._v(t._s(t.$t("其他操作")))])])]),t._v(" "),o("div",{staticClass:"block-item-bg font-size-12",staticStyle:{position:"relative"}},[o("span",[o("label",[t._v(t._s(t.$t("允许评价"))+":")]),t._v(" "),o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.evaluate,callback:function(e){t.$set(t.form,"evaluate",e)},expression:"form.evaluate"}})],1),t._v(" "),o("span",{staticClass:"margin-left-10"},[o("label",[t._v(t._s(t.$t("允许评分"))+":")]),t._v(" "),o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.scope,callback:function(e){t.$set(t.form,"scope",e)},expression:"form.scope"}})],1),t._v(" "),o("span",{staticClass:"margin-left-10"},[o("label",[t._v(t._s(t.$t("首页推荐"))+":")]),t._v(" "),o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.recommend,callback:function(e){t.$set(t.form,"recommend",e)},expression:"form.recommend"}})],1)])])]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("div",{staticClass:"text-right padding-lr-10"},[o("el-button",{attrs:{size:"mini"},on:{click:t.cancelDrawDialog}},[t._v(t._s(t.$t("取消")))]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.okAppDrawDialog}},[t._v(t._s(t.$t("应用")))])],1)])]),t._v(" "),o("drawer-layout-right",{attrs:{tabindex:"0","show-close":!0,"hide-footer":!t.showFooter,visible:t.drawerForm,size:"85%"},on:{changeDrawer:t.closeDialog,opened:t.openedForm}},[o("div",{attrs:{slot:"title"},slot:"title"},[o("div",{staticClass:"header-block padding-lr-10"},[o("span",{staticClass:"tab-class font-bold",class:"form"==t.activeName?"color-grand":"",on:{click:function(e){return t.handleClick("form")}}},[o("i",{staticClass:"fa fa-file"}),t._v("\n            "+t._s(t.$t("表单设计"))+"\n          ")]),t._v(" "),o("span",{staticClass:"tab-class font-bold margin-left-5",class:"set"==t.activeName?"color-grand":"",on:{click:function(e){return t.handleClick("set")}}},[o("i",{staticClass:"fa fa-cog"}),t._v("\n            "+t._s(t.$t("表单设置"))+"\n          ")])])]),t._v(" "),o("div",{staticClass:"color-muted",attrs:{slot:"content"},slot:"content"},["form"==t.activeName?o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.01)"}},[o("fc-designer",{ref:"designer",style:t.drawHeight4})],1):t._e(),t._v(" "),"flow"==t.activeName?o("div",{staticStyle:{position:"relative"}},[o("my-form-flow",{ref:"flow",attrs:{formId:t.serverDataItem,"flow-data":t.flowListData,form:t.flowFormData},on:{versionClick:t.versionClick}})],1):t._e(),t._v(" "),"set"==t.activeName?o("div",[o("my-form-set",{attrs:{formId:t.serverDataItem}})],1):t._e()]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-row",[o("el-col",{staticClass:"text-left padding-lr-10",attrs:{span:12}},["form"==t.activeName?o("el-button",{attrs:{size:"mini",type:"warning",loading:t.btnLoading},on:{click:t.sendTempShop}},[o("i",{staticClass:"fa fa-send"}),t._v("\n              "+t._s(t.$t("发布到模版中心"))+"\n            ")]):o("span",[t._v(" ")])],1),t._v(" "),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"text-right padding-lr-10"},[o("el-button",{attrs:{size:"mini"},on:{click:t.cancelDrawDialog}},[t._v(t._s(t.$t("取消")))]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"success",loading:t.btnLoading},on:{click:function(e){return t.okFormDrawDialog()}}},[t._v(t._s(t.$t("保存")))]),t._v(" "),"flow"==t.activeName?o("el-button",{attrs:{size:"mini",type:"warning",loading:t.btnNewLoading},on:{click:function(e){return t.okFormDrawDialog("new")}}},[t._v(t._s(t.$t("保存为新版本")))]):t._e()],1)])],1)],1)]),t._v(" "),o("drawer-layout-right",{attrs:{tabindex:"0",hideFooter:!0,visible:t.drawerVersion,size:"600px",title:t.$t("版本管理")},on:{changeDrawer:t.closeVersionDialog,"right-close":t.cancelVersionDrawDialog}},[o("div",{staticClass:"color-muted",attrs:{slot:"content"},slot:"content"},[o("el-table",{ref:"refTable",staticStyle:{width:"100%"},attrs:{data:t.flowVersionData,"header-cell-class-name":"custom-table-cell-bg",size:"medium"}},[o("el-table-column",{attrs:{align:"center",label:t.$t("版本名称")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[t._v(t._s(e.row.version_name))]),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                      "+t._s(e.row.version_name)+"\n                    ")])])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:t.$t("状态")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[o("div",{staticClass:"text-center"},[t.serverDataItem.form_process_id==e.row.id&&""==t.versionStatus?o("label",{staticClass:"color-success"},[t._v(t._s(t.$t("当前版本")))]):t._e(),t._v(" "),t.serverDataItem.form_process_id!=e.row.id&&""==t.versionStatus?o("label",{staticClass:"color-danger"},[t._v(t._s(t.$t("未启用")))]):t._e(),t._v(" "),t.serverDataItem.form_process_id!=e.row.id&&"edit"==t.versionStatus?o("label",{staticClass:"color-danger"},[t._v("--")]):t._e(),t._v(" "),t.serverDataItem.form_process_id==e.row.id&&"edit"==t.versionStatus?o("label",{staticClass:"color-warning"},[t._v(t._s(t.$t("编辑中")))]):t._e()]),t._v(" "),o("span",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t.serverDataItem.form_process_id==e.row.id&&""==t.versionStatus?o("label",{staticClass:"color-success"},[t._v(t._s(t.$t("当前版本")))]):t._e(),t._v(" "),t.serverDataItem.form_process_id!=e.row.id&&""==t.versionStatus?o("label",{staticClass:"color-danger"},[t._v(t._s(t.$t("未启用")))]):t._e(),t._v(" "),t.serverDataItem.form_process_id!=e.row.id&&"edit"==t.versionStatus?o("label",{staticClass:"color-danger"},[t._v("--")]):t._e(),t._v(" "),t.serverDataItem.form_process_id==e.row.id&&"edit"==t.versionStatus?o("label",{staticClass:"color-warning"},[t._v(t._s(t.$t("编辑中")))]):t._e()])])]}}])}),t._v(" "),o("el-table-column",{attrs:{width:"100",align:"center",label:t.$t("操作")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("i",{staticClass:"fa fa-edit margin-right-5 color-success",on:{click:function(o){return t.editFlowInfo(e.row)}}}),t._v(" "),o("i",{staticClass:"fa fa-trash margin-right-5 color-danger",on:{click:function(o){return t.delFlowInfo(e.row)}}}),t._v(" "),t.serverDataItem.form_process_id!=e.row.id?o("i",{staticClass:"fa fa-cog margin-right-5 color-grand",on:{click:function(o){return t.currentFlowInfo(e.row)}}}):t._e()]}}])})],1)],1)]),t._v(" "),o("my-normal-dialog",{attrs:{visible:t.visibleConfim,loading:t.dialogLoading,title:"提示",detail:t.subTitle,content:"确认需要删除该信息？"},on:{"update:visible":function(e){t.visibleConfim=e},"ok-click":t.handleOkChange,"cancel-click":t.handleCancelChange,close:t.closeDialog}})],1)}),[],!1,null,"07e46af2",null);e.default=component.exports;installComponents(component,{MyElTree:o(1262).default,MySelect:o(1256).default,MyInputButton:o(1257).default,MyPagination:o(234).default,LayoutLr:o(1264).default,UploadSquare:o(238).default,DrawerLayoutRight:o(236).default,MyFormFlow:o(1544).default,MyFormSet:o(1540).default,MyNormalDialog:o(1260).default})}}]);