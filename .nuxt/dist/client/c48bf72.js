(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{1340:function(e,t,l){var content=l(1591);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(31).default)("0d17f4d1",content,!0,{sourceMap:!1})},1541:function(e,t,l){"use strict";l.r(t);l(179);var o={name:"myDeviceOnlineStatus",props:{type:{default:"",type:[String,Number,Boolean]}},computed:{},data:function(){return{value:""}},methods:{}},n=l(10),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("span",[1==e.type?l("label",{staticClass:"color-success"},[e._v(e._s(e.$t("在线")))]):e._e(),e._v(" "),0==e.type?l("label",{staticClass:"color-warning"},[e._v(e._s(e.$t("离线")))]):e._e()])}),[],!1,null,null,null);t.default=component.exports},1590:function(e,t,l){"use strict";var o=l(1340);l.n(o).a},1591:function(e,t,l){(t=l(30)(!1)).push([e.i,"",""]),e.exports=t},2e3:function(e,t,l){"use strict";l.r(t);l(360),l(709),l(53);var o=l(9),n=l(1264),r=l(1262),c=l(1257),d=l(234),v=l(235),m=l(1260),f=l(1268),h=l(1256),_=l(1541),w=l(76),y=l(7),L=l(6),C=l(1531),D={mixins:[w.a,C.a],components:{MyElTree:r.default,MyInputButton:c.default,MyPagination:d.default,LayoutLr:n.default,DialogNormal:v.default,MyNormalDialog:m.default,DrawerRight:f.default,MySelect:h.default,MyDeviceOnlineStatus:_.default},data:function(){return{mainType:"3",mainSubType:"2",tableData:[],tableDormData:[],tableDeviceData:[],modalVisible:!1,drawerVisible:!1,visibleConfim:!1,dialogLoading:!1,placeholderTips:"IP/设备名称/教室编号",subDetail:"",searchBuildId:"",searchFloorNum:"",searchCollege:"",searchMajor:"",searchGrade:"",searchClass:"",showType:1,searchOnline:"",searchKey:"",searchDeviceType:"3",searchDeviceKey:"",deviceList:[],buildList:[],buildMutiList:[],buildDormMutiList:[],setType:""}},created:function(){this.initInfo()},methods:{initInfo:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSessionInfo();case 2:e.init();case 3:case"end":return t.stop()}}),t)})))()},init:function(){var e=this,t="",l={page:this.page,num:this.num,buildId:this.searchBuildId,floorNum:this.searchFloorNum,online:this.searchOnline};1==this.showType?(l.searchKey=this.searchKey,t=y.a.device_class_location_page):2==this.showType&&(l.keyWord=this.searchKey,t=y.a.device_dorm_location_page),this.$axios.get(t,{params:l}).then((function(t){if(t.data.data){if(1==e.showType){for(var i=0;i<t.data.data.list.length;i++)t.data.data.list[i].onlyId=t.data.data.list[i].id+"-"+t.data.data.list[i].floor_num;e.tableData=t.data.data.list}else if(2==e.showType){for(var l=0;l<t.data.data.list.length;l++)t.data.data.list[l].onlyId=t.data.data.list[l].build_id+"-"+t.data.data.list[l].floor_num;e.tableDormData=t.data.data.list}e.total=t.data.data.totalCount,e.num=t.data.data.num,e.page=t.data.data.currentPage}}))},initDevice:function(){var e=this,t={page:1,num:9999,deviceType:this.searchDeviceType,searchKey:this.searchDeviceKey};1==this.showType?t.locationType=1:2==this.showType&&(t.locationType=11),this.$axios.get(y.a.device_unbind_list,{params:t}).then((function(t){t.data.data&&(e.tableDeviceData=t.data.data)}))},nodeClick:function(data){this.searchBuildId="",this.searchFloorNum="",6==data.unit?(this.searchBuildId=data.id,this.searchFloorNum=data.floorNum):7==data.unit&&(this.searchBuildId=data.buildId,this.searchFloorNum=data.floorNum),this.page=1,this.init()},bindInfo:function(e,t){this.setType=e,t&&(this.buildList=[{buildId:t.build_id,floorNum:t.floor_num,roomId:t.id}]),this.initDevice(),this.modalVisible=!0},deleteDeviceInfo:function(e,t,l){var o="",n={};1==this.showType?(o=y.a.device_bind_remove,n={sns:t.sn,roomId:e.id}):2==this.showType&&(o=y.a.device_bind_dorm_remove,n={sn:t.sn,buildId:e.build_id,floorNum:e.floor_num}),n=this.$qs.stringify(n),this.$axios.post(o,n).then((function(t){200==t.data.code?e.deviceList.splice(l,1):Object(L.a)(t.data.desc)}))},search:function(data){this.page=1,this.searchKey=data.input,this.init()},searchDevice:function(data){this.page=1,this.searchDeviceKey=data.input,this.initDevice()},sizeChange:function(e){this.page=1,this.num=e,this.init()},currentPage:function(e){this.page=e,this.init()},jumpPage:function(data){this.page=data,this.init()},mediaClassInfo:function(e){return Object(L.x)(e)},deviceTypeInfo:function(e){return Object(L.l)("set",e)},getDeviceTypeInfo:function(){var e=Object(L.l)("get"),t=[];for(var i in e)1!=i&&2!=i&&t.push({label:e[i],value:i});return t},handleChange:function(data){this.searchDeviceType=data,this.initDevice()},closeDialog:function(e){this.subTitle="",this.deviceList=[],this.buildList=[],this.searchDeviceType="3",this.$refs.tableRef&&this.$refs.tableRef.clearSelection()},cancelDialog:function(){this.modalVisible=!1},okDialog:function(e){var t=this,l="",o=[],n=[];this.dialogLoading=!0;for(var i=0;i<this.deviceList.length;i++)o.push(this.deviceList[i].sn);var r={};if(1==this.showType){if("muti"==this.setType){for(var c=0;c<this.buildMutiList.length;c++)n.push(this.buildMutiList[c].id);r={roomId:n.join(),sns:o.join(),termId:this.currentTermId}}else"only"==this.setType&&(r={roomId:this.buildList[0].roomId,sns:o.join(),termId:this.currentTermId});l=y.a.device_bind_build_set}else if(2==this.showType){for(var d=0;d<this.buildMutiList.length;d++)n.push({floorNum:this.buildMutiList[d].floor_num,buildId:this.buildMutiList[d].build_id});"muti"==this.setType?r={buildFloor:n,snList:o}:"only"==this.setType&&(r={buildFloor:this.buildList,snList:o}),l=y.a.device_bind_dorm_set}1==this.showType?r=this.$qs.stringify(r):2==this.showType&&(r=JSON.stringify(r)),this.$axios.post(l,r,2==this.showType?{dataType:"stringfy"}:null).then((function(e){200==e.data.code?(t.modalVisible=!1,t.init(),Object(L.b)(e.data.desc)):Object(L.a)(e.data.desc),t.dialogLoading=!1}))},getDeviceRowKeys:function(e){return e.sn},handleSelectionDeviceChange:function(data){this.deviceList=data},getRowKeys:function(e){return e.onlyId},getRowDormKeys:function(e){return e.onlyId},handleSelectionChange:function(data){this.buildMutiList=data},handleSelectionDormChange:function(data){this.buildMutiList=data},selBuild:function(e){this.showType=e,1==e?(this.mainType="3",this.mainSubType="2",this.placeholderTips="IP/设备名称/教室编号"):2==e&&(this.mainType="2",this.mainSubType="1",this.placeholderTips="IP/设备名称"),this.$refs.tableMainRef&&this.$refs.tableMainRef.clearSelection(),this.$refs.tableMainDormRef&&this.$refs.tableMainDormRef.clearSelection(),this.buildMutiList=[],this.page=1,this.init()}}},$=(l(1590),l(10)),component=Object($.a)(D,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"container"},[l("layout-lr",[l("div",{attrs:{slot:"left"},slot:"left"},[l("div",{staticClass:"color-muted font-size-12 padding-tb-5 margin-top-10"},[l("span",{staticClass:"layout-left-menu-title"},[e._v("设备位置")])]),e._v(" "),l("my-el-tree",{attrs:{type:e.mainType,"sub-type":e.mainSubType},on:{"node-click":e.nodeClick,"all-click":e.nodeClick}},[l("div",{attrs:{slot:"top"},slot:"top"},[l("el-button",{attrs:{size:"small",type:1==e.showType?"primary":"default"},on:{click:function(t){return e.selBuild(1)}}},[e._v(e._s(e.$t("教学楼")))]),e._v(" "),l("el-button",{attrs:{size:"small",type:2==e.showType?"primary":"default"},on:{click:function(t){return e.selBuild(2)}}},[e._v(e._s(e.$t("宿舍楼")))])],1)])],1),e._v(" "),l("div",{attrs:{slot:"right"},slot:"right"},[l("div",{staticClass:"layout-top-tab margin-top-5"},[l("el-row",[l("el-col",{attrs:{span:12}},[l("el-button",{attrs:{disabled:0==e.buildMutiList.length,size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.bindInfo("muti")}}},[e._v(e._s(e.$t("批量绑定")))])],1),e._v(" "),l("el-col",{staticClass:"text-right",attrs:{span:12}},[l("my-input-button",{attrs:{size:"small",placeholder:e.placeholderTips,clearable:!0,type:"success",plain:""},on:{click:e.search}})],1)],1)],1),e._v(" "),l("div",{staticClass:"margin-top-10"},[1==e.showType?l("el-table",{ref:"tableMainRef",staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-class-name":"custom-table-cell-bg",size:"medium","max-height":e.tableHeight2.height,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{"reserve-selection":!0,type:"selection",align:"center",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("房间编号"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[e._v(e._s(t.row.classroom_no))])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[e._v(e._s(t.row.classroom_no))])])])]}}],null,!1,4016956967)}),e._v(" "),l("el-table-column",{attrs:{prop:"floor_num",label:e.$t("楼层"),align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"people_num",label:e.$t("容纳人数"),align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"classroom_no",label:e.$t("教室用途"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[e._v(e._s(e.mediaClassInfo(t.row.is_media)))]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[e._v("\n                  "+e._s(e.mediaClassInfo(t.row.is_media))+"\n                ")])])]}}],null,!1,2663356327)}),e._v(" "),l("el-table-column",{attrs:{prop:"classroom_no",label:e.$t("绑定状态"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.bind>0?l("span",{staticClass:"color-success"},[e._v(e._s(e.$t("已绑定")))]):e._e(),e._v(" "),0==t.row.bind?l("span",{staticClass:"color-warning"},[e._v(e._s(e.$t("未绑定")))]):e._e()]}}],null,!1,1690082175)}),e._v(" "),l("el-table-column",{attrs:{prop:"classroom_no",label:e.$t("设备名称"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t.row.deviceList&&t.row.deviceList.length>0?l("span",[t.row.deviceList[0].name?l("label",[e._v(e._s(t.row.deviceList[0].name))]):l("label",[e._v("--")])]):l("span",[e._v("--")])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t.row.deviceList&&t.row.deviceList.length>0?l("span",[t.row.deviceList[0].name?l("label",[e._v(e._s(t.row.deviceList[0].name))]):l("label",[e._v("--")])]):l("span",[e._v("--")])])])]}}],null,!1,2184435431)}),e._v(" "),l("el-table-column",{attrs:{prop:"classroom_no",label:e.$t("设备IP"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t.row.deviceList&&t.row.deviceList.length>0?l("span",[t.row.deviceList[0].ip?l("label",[e._v(e._s(t.row.deviceList[0].ip))]):l("label",[e._v("--")])]):l("span",[e._v("--")])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t.row.deviceList&&t.row.deviceList.length>0?l("span",[t.row.deviceList[0].ip?l("label",[e._v(e._s(t.row.deviceList[0].ip))]):l("label",[e._v("--")])]):l("span",[e._v("--")])])])]}}],null,!1,1686933223)}),e._v(" "),l("el-table-column",{attrs:{prop:"classroom_no",label:e.$t("设备类型"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t.row.deviceList&&t.row.deviceList.length>0?l("span",[e._v(e._s(e.deviceTypeInfo(t.row.deviceList[0].type)))]):l("span",[e._v("--")])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t.row.deviceList&&t.row.deviceList.length>0?l("span",[e._v(e._s(e.deviceTypeInfo(t.row.deviceList[0].type)))]):l("span",[e._v("--")])])])]}}],null,!1,2762197351)}),e._v(" "),l("el-table-column",{attrs:{prop:"classroom_no",label:e.$t("在线状态"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.deviceList&&t.row.deviceList.length>0?l("my-device-online-status",{attrs:{type:t.row.deviceList[0].online}}):l("span",[e._v("--")]),e._v(" "),l("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.row.deviceList,"header-cell-class-name":"custom-table-cell-bg",size:"mini"}},[l("el-table-column",{attrs:{label:e.$t("名称"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[e._v(e._s(t.row.name?t.row.name:"--"))])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[e._v(e._s(t.row.name?t.row.name:"--"))])])])]}}],null,!0)}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("IP"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[e._v(e._s(t.row.ip?t.row.ip:"--"))])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[e._v(e._s(t.row.ip?t.row.ip:"--"))])])])]}}],null,!0)}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("SN"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[e._v(e._s(t.row.sn?t.row.sn:"--"))])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[e._v(e._s(t.row.sn?t.row.sn:"--"))])])])]}}],null,!0)}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("在线状态"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[l("my-device-online-status",{attrs:{type:e.row.online}})]}}],null,!0)}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("操作"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return[l("i",{staticClass:"fa fa-trash color-danger",on:{click:function(l){return e.deleteDeviceInfo(t.row,o.row,o.$index)}}})]}}],null,!0)})],1),e._v(" "),l("i",{directives:[{name:"show",rawName:"v-show",value:t.row.deviceList&&t.row.deviceList.length>0,expression:"scope.row.deviceList && scope.row.deviceList.length > 0"}],staticClass:"fa fa-ellipsis-h color-warning",attrs:{slot:"reference"},slot:"reference"})],1)]}}],null,!1,4143546051)}),e._v(" "),l("el-table-column",{attrs:{prop:"classroom_no",label:e.$t("操作"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("i",{staticClass:"fa fa-cog color-grand",on:{click:function(l){return e.bindInfo("only",t.row)}}})]}}],null,!1,2730136696)})],1):e._e(),e._v(" "),2==e.showType?l("el-table",{ref:"tableMainDormRef",staticStyle:{width:"100%"},attrs:{data:e.tableDormData,"header-cell-class-name":"custom-table-cell-bg",size:"medium","max-height":e.tableHeight2.height,"row-key":e.getRowDormKeys},on:{"selection-change":e.handleSelectionDormChange}},[l("el-table-column",{attrs:{"reserve-selection":!0,type:"selection",align:"center",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("宿舍楼"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[e._v(e._s(t.row.build_name))])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[e._v(e._s(t.row.build_name))])])])]}}],null,!1,2409777095)}),e._v(" "),l("el-table-column",{attrs:{prop:"floor_num",label:e.$t("楼层"),align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"room_count",label:e.$t("宿舍数量"),align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"classroom_no",label:e.$t("绑定状态"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.bind>0?l("span",{staticClass:"color-success"},[e._v(e._s(e.$t("已绑定")))]):e._e(),e._v(" "),0==t.row.bind?l("span",{staticClass:"color-warning"},[e._v(e._s(e.$t("未绑定")))]):e._e()]}}],null,!1,1690082175)}),e._v(" "),l("el-table-column",{attrs:{prop:"classroom_no",label:e.$t("设备名称"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t.row.deviceList&&t.row.deviceList.length>0?l("span",[t.row.deviceList[0].name?l("label",[e._v(e._s(t.row.deviceList[0].name))]):l("label",[e._v("--")])]):l("span",[e._v("--")])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t.row.deviceList&&t.row.deviceList.length>0?l("span",[t.row.deviceList[0].name?l("label",[e._v(e._s(t.row.deviceList[0].name))]):l("label",[e._v("--")])]):l("span",[e._v("--")])])])]}}],null,!1,2184435431)}),e._v(" "),l("el-table-column",{attrs:{prop:"classroom_no",label:e.$t("设备IP"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t.row.deviceList&&t.row.deviceList.length>0?l("span",[t.row.deviceList[0].ip?l("label",[e._v(e._s(t.row.deviceList[0].ip))]):l("label",[e._v("--")])]):l("span",[e._v("--")])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t.row.deviceList&&t.row.deviceList.length>0?l("span",[t.row.deviceList[0].ip?l("label",[e._v(e._s(t.row.deviceList[0].ip))]):l("label",[e._v("--")])]):l("span",[e._v("--")])])])]}}],null,!1,1686933223)}),e._v(" "),l("el-table-column",{attrs:{prop:"classroom_no",label:e.$t("设备类型"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[t.row.deviceList&&t.row.deviceList.length>0?l("span",[e._v(e._s(e.deviceTypeInfo(t.row.deviceList[0].type)))]):l("span",[e._v("--")])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[t.row.deviceList&&t.row.deviceList.length>0?l("span",[e._v(e._s(e.deviceTypeInfo(t.row.deviceList[0].type)))]):l("span",[e._v("--")])])])]}}],null,!1,2762197351)}),e._v(" "),l("el-table-column",{attrs:{prop:"classroom_no",label:e.$t("在线状态"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.deviceList&&t.row.deviceList.length>0?l("my-device-online-status",{attrs:{type:t.row.deviceList[0].online}}):l("span",[e._v("--")]),e._v(" "),l("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.row.deviceList,"header-cell-class-name":"custom-table-cell-bg",size:"mini"}},[l("el-table-column",{attrs:{label:e.$t("名称"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[e._v(e._s(t.row.name?t.row.name:"--"))])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[e._v(e._s(t.row.name?t.row.name:"--"))])])])]}}],null,!0)}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("IP"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[e._v(e._s(t.row.ip?t.row.ip:"--"))])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[e._v(e._s(t.row.ip?t.row.ip:"--"))])])])]}}],null,!0)}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("SN"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[e._v(e._s(t.row.sn?t.row.sn:"--"))])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[e._v(e._s(t.row.sn?t.row.sn:"--"))])])])]}}],null,!0)}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("在线状态"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[l("my-device-online-status",{attrs:{type:e.row.online}})]}}],null,!0)}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("操作"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return[l("i",{staticClass:"fa fa-trash color-danger",on:{click:function(l){return e.deleteDeviceInfo(t.row,o.row,o.$index)}}})]}}],null,!0)})],1),e._v(" "),l("i",{directives:[{name:"show",rawName:"v-show",value:t.row.deviceList&&t.row.deviceList.length>0,expression:"scope.row.deviceList && scope.row.deviceList.length > 0"}],staticClass:"fa fa-ellipsis-h color-warning",attrs:{slot:"reference"},slot:"reference"})],1)]}}],null,!1,4143546051)}),e._v(" "),l("el-table-column",{attrs:{prop:"classroom_no",label:e.$t("操作"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("i",{staticClass:"fa fa-cog color-grand",on:{click:function(l){return e.bindInfo("only",t.row)}}})]}}],null,!1,2730136696)})],1):e._e()],1),e._v(" "),l("div",{staticClass:"layout-right-footer text-right"},[l("my-pagination",{staticClass:"layout-pagination",attrs:{total:e.total,"current-page":e.page,"page-size":e.num},on:{currentPage:e.currentPage,sizeChange:e.sizeChange,jumpChange:e.jumpPage}})],1)])]),e._v(" "),l("dialog-normal",{attrs:{visible:e.modalVisible,title:e.$t("绑定设备")},on:{close:e.closeDialog,"right-close":e.cancelDialog}},[l("div",[l("div",{staticClass:"text-right layout-inline"},[l("my-select",{staticClass:"layout-item",attrs:{"width-style":"150",size:"small","sel-value":e.searchDeviceType,options:e.getDeviceTypeInfo()},on:{change:e.handleChange}}),e._v(" "),l("my-input-button",{staticClass:"layout-item",attrs:{size:"small",clearable:!0,type:"success",plain:""},on:{click:e.searchDevice}})],1),e._v(" "),l("div",{staticClass:"margin-top-10"},[l("el-table",{ref:"tableRef",staticStyle:{width:"100%"},attrs:{data:e.tableDeviceData,"header-cell-class-name":"custom-table-cell-bg",size:"mini","row-key":e.getDeviceRowKeys},on:{"selection-change":e.handleSelectionDeviceChange}},[l("el-table-column",{attrs:{"reserve-selection":!0,type:"selection",align:"center",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("名称"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[e._v(e._s(t.row.name?t.row.name:"--"))])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[e._v(e._s(t.row.name?t.row.name:"--"))])])])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("IP"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[e._v(e._s(t.row.ip?t.row.ip:"--"))])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[e._v(e._s(t.row.ip?t.row.ip:"--"))])])])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("SN"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"custom-table-popover"}},[l("div",{staticClass:"text-center"},[l("label",[e._v(e._s(t.row.sn?t.row.sn:"--"))])]),e._v(" "),l("div",{staticClass:"name-wrapper moon-content-text-ellipsis-class",attrs:{slot:"reference"},slot:"reference"},[l("label",[e._v(e._s(t.row.sn?t.row.sn:"--"))])])])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("在线状态"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[l("my-device-online-status",{attrs:{type:e.row.online}})]}}])})],1)],1)]),e._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"small"},on:{click:e.cancelDialog}},[e._v(e._s(e.$t("取消")))]),e._v(" "),l("el-button",{attrs:{disabled:0==e.deviceList.length,size:"small",type:"primary"},on:{click:function(t){0==e.dialogLoading&&e.okDialog()}}},[e.dialogLoading?l("i",{staticClass:"el-icon-loading"}):e._e(),e._v("\n        "+e._s(e.$t("确定"))+"\n      ")])],1)])],1)}),[],!1,null,"51c880bc",null);t.default=component.exports;installComponents(component,{MyElTree:l(1262).default,MyInputButton:l(1257).default,MyDeviceOnlineStatus:l(1541).default,MyPagination:l(234).default,LayoutLr:l(1264).default,MySelect:l(1256).default,DialogNormal:l(235).default})}}]);